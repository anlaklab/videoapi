/*! For license information please see main.3fb58baf.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var k=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+I(l,0):o,k(s)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(s,t,i,"",function(e){return e})):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",k(e))for(var c=0;c<e.length;c++){var u=o+I(a=e[c],c);l+=A(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=o+I(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},N={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:N,ReactCurrentOwner:S};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,N(x);else{var t=r(u);null!==t&&D(k,t.startTime-e)}}function x(e,n){g=!1,m&&(m=!1,v(C),C=-1),p=!0;var o=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(k,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,E=null,C=-1,T=5,I=-1;function A(){return!(t.unstable_now()-I<T)}function R(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?S():(_=!1,E=null)}}else _=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=R,S=function(){O.postMessage(null)}}else S=function(){y(R,0)};function N(e){E=e,_||(_=!0,S())}function D(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,N(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(m?(v(C),C=-1):m=!0,D(k,o-s))):(e.sortIndex=a,n(c,e),g||p||(g=!0,N(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=e[c],d=t[c];if(!1===(i=n?n.call(r,u,d,c):void 0)||void 0===i&&u!==d)return!1}return!0}},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function z(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case x:return"Portal";case E:return"Profiler";case _:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function oe(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Se=null,_e=null;function Ee(e){if(e=bi(e)){if("function"!==typeof xe)throw Error(o(280));var t=e.stateNode;t&&(t=ki(t),xe(e.stateNode,e.type,t))}}function Ce(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Te(){if(Se){var e=Se,t=_e;if(_e=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function Ae(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==Se||null!==_e)&&(Ae(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=ki(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ne=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Ne=!1}function je(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Ue=!1,Fe=null,ze={onError:function(e){Le=!0,Me=e}};function Ve(e,t,n,r,i,o,s,a,l){Le=!1,Me=null,je.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qe(i),e;if(s===r)return qe(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,$e=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,xt,St,_t,Et,Ct=!1,Tt=[],It=null,At=null,Rt=null,Pt=new Map,Ot=new Map,Nt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function zt(){Ct=!1,null!==It&&Ut(It)&&(It=null),null!==At&&Ut(At)&&(At=null),null!==Rt&&Ut(Rt)&&(Rt=null),Pt.forEach(Ft),Ot.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<Tt.length){Vt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==At&&Vt(At,e),null!==Rt&&Vt(Rt,e),Pt.forEach(t),Ot.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Nt.shift()}var Ht=w.ReactCurrentBatchConfig,qt=!0;function Wt(e,t,n,r){var i=bt,o=Ht.transition;Ht.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Ht.transition=o}}function Kt(e,t,n,r){var i=bt,o=Ht.transition;Ht.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Ht.transition=o}}function Gt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,$t,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return At=Lt(At,e,t,n,r,i),!0;case"mouseover":return Rt=Lt(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Lt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ot.set(o,Lt(Ot.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&kt(o),null===(o=Qt(e,t,n,r))&&qr(e,t,r,$t,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var $t=null;function Qt(e,t,n,r){if($t=null,null!==(e=vi(e=ke(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=M({},cn,{view:0,detail:0}),hn=on(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),gn=on(M({},fn,{dataTransfer:0})),mn=on(M({},dn,{relatedTarget:0})),yn=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),wn=on(M({},cn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return _n}var Cn=M({},dn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(Cn),In=on(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Rn=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(Pn),Nn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var Ln=u&&"TextEvent"in window&&!jn,Mn=u&&(!Dn||jn&&8<jn&&11>=jn),Un=String.fromCharCode(32),Fn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function $n(e){Ur(e,0)}function Qn(e){if(G(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Wn(t,Gn,e,ke(e)),Pe($n,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function or(e,t){if("click"===e)return Qn(t)}function sr(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==$(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Sr={},_r={};function Er(e){if(Sr[e])return Sr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Sr[e]=n[t];return e}u&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Cr=Er("animationend"),Tr=Er("animationiteration"),Ir=Er("animationstart"),Ar=Er("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Rr.set(e,t),l(t,[e])}for(var Nr=0;Nr<Pr.length;Nr++){var Dr=Pr[Nr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Cr,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Ir,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(o(198));var u=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,a,c),o=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,s.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=vi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Pe(function(){var r=o,i=ke(n),s=[];e:{var a=Rr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Cr:case Tr:case Ir:l=yn;break;case Ar:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Oe(p,h))&&u.push(Wr(p,g,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(g,p+"leave",l,n,i)).target=d,a.relatedTarget=f,g=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,g=h;g;g=Gr(g))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&$r(s,a,l,u,!1),null!==c&&null!==d&&$r(s,d,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Yn;else if(qn(a))if(Jn)m=sr;else{m=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=or);switch(m&&(m=m(e,r))?Wn(s,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(s,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&zn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Ur(s,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Oe(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Oe(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $r(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Oe(n,o))&&s.unshift(Wr(n,l,a)):i||null!=(l=Oe(n,o))&&s.push(Wr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ki(e){return e[fi]||null}var xi=[],Si=-1;function _i(e){return{current:e}}function Ei(e){0>Si||(e.current=xi[Si],xi[Si]=null,Si--)}function Ci(e,t){Si++,xi[Si]=e.current,e.current=t}var Ti={},Ii=_i(Ti),Ai=_i(!1),Ri=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Ei(Ai),Ei(Ii)}function Di(e,t,n){if(Ii.current!==Ti)throw Error(o(168));Ci(Ii,t),Ci(Ai,n)}function ji(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ri=Ii.current,Ci(Ii,e),Ci(Ai,Ai.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ji(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ii),Ci(Ii,e)):Ei(Ai),Ci(Ai,n)}var Ui=null,Fi=!1,zi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!zi&&null!==Ui){zi=!0;var e=0,t=bt;try{var n=Ui;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{bt=t,zi=!1}}return null}var Hi=[],qi=0,Wi=null,Ki=0,Gi=[],$i=0,Qi=null,Yi=1,Ji="";function Xi(e,t){Hi[qi++]=Ki,Hi[qi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[$i++]=Yi,Gi[$i++]=Ji,Gi[$i++]=Qi,Qi=e;var r=Yi;e=Ji;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Yi=1<<32-st(t)+i|n<<i|r,Ji=o+e}else Yi=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function to(e){for(;e===Wi;)Wi=Hi[--qi],Hi[qi]=null,Ki=Hi[--qi],Hi[qi]=null;for(;e===Qi;)Qi=Gi[--$i],Gi[$i]=null,Ji=Gi[--$i],Gi[$i]=null,Yi=Gi[--$i],Gi[$i]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=w.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function wo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&bo(o)===t.type)?((r=i(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=jc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=jc(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:d(e,t,n,r,null);vo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return d(t,e=e.get(n)||null,r,i,null);vo(t,r)}return null}function g(i,o,a,l){for(var c=null,u=null,d=o,g=o=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(i,d,a[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(i,d),o=s(y,o,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===a.length)return n(i,d),io&&Xi(i,g),c;if(null===d){for(;g<a.length;g++)null!==(d=h(i,a[g],l))&&(o=s(d,o,g),null===u?c=d:u.sibling=d,u=d);return io&&Xi(i,g),c}for(d=r(i,d);g<a.length;g++)null!==(m=p(d,i,g,a[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),io&&Xi(i,g),c}function m(i,a,l,c){var u=j(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),a=s(b,a,m),null===d?u=b:d.sibling=b,d=b,g=y}if(v.done)return n(i,g),io&&Xi(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=h(i,v.value,c))&&(a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return io&&Xi(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach(function(e){return t(i,e)}),io&&Xi(i,m),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case k:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&bo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=yo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===S?((o=jc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Dc(s.type,s.key,s.props,null,r.mode,l)).ref=yo(r,o,s),l.return=r,r=l)}return a(r);case x:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Uc(s,r.mode,l)).return=r,r=o}return a(r);case O:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return g(r,o,s,l);if(j(s))return m(r,o,s,l);vo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Mc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var ko=wo(!0),xo=wo(!1),So=_i(null),_o=null,Eo=null,Co=null;function To(){Co=Eo=_o=null}function Io(e){var t=So.current;Ei(So),e._currentValue=t}function Ao(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){_o=e,Co=Eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Po(e){var t=e._currentValue;if(Co!==e)if(e={context:e,memoizedValue:t,next:null},null===Eo){if(null===_o)throw Error(o(308));Eo=e,_o.dependencies={lanes:0,firstContext:e}}else Eo=Eo.next=e;return t}var Oo=null;function No(e){null===Oo?Oo=[e]:Oo.push(e)}function Do(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,No(t)):(n.next=i.next,i.next=n),t.interleaved=n,jo(e,r)}function jo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Lo=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,jo(e,n)}return null===(i=r.interleaved)?(t.next=t,No(r)):(t.next=i.next,i.next=t),r.interleaved=t,jo(e,n)}function Vo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ho(e,t,n,r){var i=e.updateQueue;Lo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Lo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ll|=s,e.lanes=s,e.memoizedState=d}}function qo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Wo={},Ko=_i(Wo),Go=_i(Wo),$o=_i(Wo);function Qo(e){if(e===Wo)throw Error(o(174));return e}function Yo(e,t){switch(Ci($o,t),Ci(Go,e),Ci(Ko,Wo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ko),Ci(Ko,t)}function Jo(){Ei(Ko),Ei(Go),Ei($o)}function Xo(e){Qo($o.current);var t=Qo(Ko.current),n=le(t,e.type);t!==n&&(Ci(Go,e),Ci(Ko,n))}function Zo(e){Go.current===e&&(Ei(Ko),Ei(Go))}var es=_i(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var is=w.ReactCurrentDispatcher,os=w.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,us=!1,ds=!1,hs=0,fs=0;function ps(){throw Error(o(321))}function gs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function ms(e,t,n,r,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?Zs:ea,e=n(r,i),ds){s=0;do{if(ds=!1,hs=0,25<=s)throw Error(o(301));s+=1,cs=ls=null,t.updateQueue=null,is.current=ta,e=n(r,i)}while(ds)}if(is.current=Xs,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,us=!1,t)throw Error(o(300));return e}function ys(){var e=0!==hs;return hs=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function bs(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function ws(e,t){return"function"===typeof t?t(e):t}function ks(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ls,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ss&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,as.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Ll|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xs(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ss(){}function _s(e,t){var n=as,r=bs(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ba=!0),r=r.queue,Ls(Ts.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,Ps(9,Cs.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(o(349));0!==(30&ss)||Es(n,t,i)}return i}function Es(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Cs(e,t,n,r){t.value=n,t.getSnapshot=r,Is(t)&&As(e)}function Ts(e,t,n){return n(function(){Is(t)&&As(e)})}function Is(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function As(e){var t=jo(e,1);null!==t&&nc(t,e,1,-1)}function Rs(e){var t=vs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},t.queue=e,e=e.dispatch=$s.bind(null,as,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Os(){return bs().memoizedState}function Ns(e,t,n,r){var i=vs();as.flags|=e,i.memoizedState=Ps(1|t,n,void 0,void 0===r?null:r)}function Ds(e,t,n,r){var i=bs();r=void 0===r?null:r;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==r&&gs(r,s.deps))return void(i.memoizedState=Ps(t,n,o,r))}as.flags|=e,i.memoizedState=Ps(1|t,n,o,r)}function js(e,t){return Ns(8390656,8,e,t)}function Ls(e,t){return Ds(2048,8,e,t)}function Ms(e,t){return Ds(4,2,e,t)}function Us(e,t){return Ds(4,4,e,t)}function Fs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ds(4,4,Fs.bind(null,t,e),n)}function Vs(){}function Bs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qs(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),as.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ws(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=os.transition;os.transition={};try{e(!1),t()}finally{bt=n,os.transition=r}}function Ks(){return bs().memoizedState}function Gs(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qs(e))Ys(t,n);else if(null!==(n=Do(e,t,n,r))){nc(n,e,r,ec()),Js(n,t,r)}}function $s(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qs(e))Ys(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,No(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Do(e,t,i,r))&&(nc(n,e,r,i=ec()),Js(n,t,r))}}function Qs(e){var t=e.alternate;return e===as||null!==t&&t===as}function Ys(e,t){ds=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Js(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xs={readContext:Po,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Zs={readContext:Po,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:js,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ns(4194308,4,Fs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ns(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ns(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gs.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:Rs,useDebugValue:Vs,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=Rs(!1),t=e[0];return e=Ws.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=vs();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Al)throw Error(o(349));0!==(30&ss)||Es(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,js(Ts.bind(null,r,s,e),[e]),r.flags|=2048,Ps(9,Cs.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=vs(),t=Al.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-st(Yi)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Po,useCallback:Bs,useContext:Po,useEffect:Ls,useImperativeHandle:zs,useInsertionEffect:Ms,useLayoutEffect:Us,useMemo:Hs,useReducer:ks,useRef:Os,useState:function(){return ks(ws)},useDebugValue:Vs,useDeferredValue:function(e){return qs(bs(),ls.memoizedState,e)},useTransition:function(){return[ks(ws)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:_s,useId:Ks,unstable_isNewReconciler:!1},ta={readContext:Po,useCallback:Bs,useContext:Po,useEffect:Ls,useImperativeHandle:zs,useInsertionEffect:Ms,useLayoutEffect:Us,useMemo:Hs,useReducer:xs,useRef:Os,useState:function(){return xs(ws)},useDebugValue:Vs,useDeferredValue:function(e){var t=bs();return null===ls?t.memoizedState=e:qs(t,ls.memoizedState,e)},useTransition:function(){return[xs(ws)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:_s,useId:Ks,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Fo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(nc(t,e,i,r),Vo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Fo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(nc(t,e,i,r),Vo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zo(e,i,r))&&(nc(t,e,r,n),Vo(t,e,r))}};function oa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function sa(e,t,n){var r=!1,i=Ti,o=t.contextType;return"object"===typeof o&&null!==o?o=Po(o):(i=Oi(t)?Ri:Ii.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Mo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Po(o):(o=Oi(t)?Ri:Ii.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ra(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Ho(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ha="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Fo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Wl=r),da(0,t)},n}function pa(e,t,n){(n=Fo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fo(-1,1)).tag=2,zo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=w.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?xo(t,null,n,r):ko(t,e.child,n,r)}function ka(e,t,n,r,i){n=n.render;var o=t.ref;return Ro(t,i),r=ms(e,t,n,r,o,i),n=ys(),null===e||ba?(io&&n&&eo(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function xa(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return qa(e,t,i)}return t.flags|=1,(e=Nc(o,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,qa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function _a(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Nl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Nl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Nl,Ol),Ol|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Nl,Ol),Ol|=r;return wa(e,t,i,n),t.child}function Ea(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var o=Oi(n)?Ri:Ii.current;return o=Pi(t,o),Ro(t,i),n=ms(e,t,n,r,o,i),r=ys(),null===e||ba?(io&&r&&eo(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function Ta(e,t,n,r,i){if(Oi(n)){var o=!0;Li(t)}else o=!1;if(Ro(t,i),null===t.stateNode)Ha(e,t),sa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Po(c):c=Pi(t,c=Oi(n)?Ri:Ii.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,s,r,c),Lo=!1;var h=t.memoizedState;s.state=h,Ho(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Ai.current||Lo?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Lo||oa(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Uo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Po(l):l=Pi(t,l=Oi(n)?Ri:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,s,r,l),Lo=!1,h=t.memoizedState,s.state=h,Ho(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||Ai.current||Lo?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Lo||oa(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ia(e,t,n,r,o,i)}function Ia(e,t,n,r,i,o){Ea(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Mi(t,n,!1),qa(e,t,o);r=t.stateNode,va.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=ko(t,e.child,null,o),t.child=ko(t,null,a,o)):wa(e,t,a,o),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Yo(e,t.containerInfo)}function Ra(e,t,n,r,i){return po(),go(i),t.flags|=256,wa(e,t,n,r),t.child}var Pa,Oa,Na,Da,ja={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ma(e,t,n){var r,i=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ci(es,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Lc(l,i,0,null),e=jc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=ja,e):Ua(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Fa(e,t,a,r=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(s=jc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&ko(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=ja,s);if(0===(1&t.mode))return Fa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fa(e,t,a,r=ua(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,jo(e,i),nc(r,e,i,-1))}return gc(),Fa(e,t,a,r=ua(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[$i++]=Yi,Gi[$i++]=Ji,Gi[$i++]=Qi,Yi=e.id,Ji=e.overflow,Qi=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Nc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Nc(r,a):(a=jc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=ja,i}return e=(a=e.child).sibling,i=Nc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fa(e,t,n,r){return null!==r&&go(r),ko(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ao(e.return,t,n)}function Va(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(es,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ts(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,o);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Nc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Oi(t.type)&&Ni(),Ka(t),null;case 3:return r=t.stateNode,Jo(),Ei(Ai),Ei(Ii),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),Oa(e,t),Ka(t),null;case 5:Zo(t);var i=Qo($o.current);if(n=t.type,null!==e&&null!=t.stateNode)Na(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ka(t),null}if(e=Qo(Ko.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)Fr(jr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,s),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fr("invalid",r);break;case"textarea":ie(r,s),Fr("invalid",r)}for(var l in ve(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":K(r),Z(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)Fr(jr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(s in ve(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Fr("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Qo($o.current),Qo(Ko.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ka(t),null;case 13:if(Ei(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),s=!1}else null!==oo&&(sc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Dl&&(Dl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return Jo(),Oa(e,t),null===e&&Br(t.stateNode.containerInfo),Ka(t),null;case 10:return Io(t.type._context),Ka(t),null;case 19:if(Ei(es),null===(s=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Wa(s,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Wa(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>Bl&&(t.flags|=128,r=!0,Wa(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ka(t),null}else 2*Je()-s.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Wa(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=es.current,Ci(es,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function $a(e,t){switch(to(t),t.tag){case 1:return Oi(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jo(),Ei(Ai),Ei(Ii),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ei(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(es),null;case 4:return Jo(),null;case 10:return Io(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Na=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qo(Ko.current);var o,s=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),s=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ya=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){_c(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ya||Za(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Ya&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_c(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,hl(e,t,n),Ya=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach(function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));fl(s,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){_c(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){_c(e,e.return,m)}try{nl(5,e,e.return)}catch(m){_c(e,e.return,m)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){_c(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&J(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":X(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(m){_c(e,e.return,m)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){_c(e,e.return,m)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){_c(e,e.return,m)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Je())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(u=Ya)||d,gl(t,e),Ya=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xa=e,d=e.child;null!==d;){for(h=Xa=d;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){_c(r,n,m)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){kl(h);continue}}null!==p?(p.return=f,Xa=p):kl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){_c(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){_c(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){_c(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xa=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Qa;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Qa;var c=Ya;if(Qa=s,(Ya=l)&&!c)for(Xa=i;null!==Xa;)l=(s=Xa).child,22===s.tag&&null!==s.memoizedState?xl(i):null!==l?(l.return=s,Xa=l):xl(i);for(;null!==o;)Xa=o,bl(o,t,n),o=o.sibling;Xa=i,Qa=a,Ya=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Xa=o):wl(e)}}function wl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&qo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(o(163))}Ya||512&t.flags&&il(t)}catch(f){_c(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function kl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function xl(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){_c(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){_c(t,i,l)}}var o=t.return;try{il(t)}catch(l){_c(t,o,l)}break;case 5:var s=t.return;try{il(t)}catch(l){_c(t,s,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Sl,_l=Math.ceil,El=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,Tl=w.ReactCurrentBatchConfig,Il=0,Al=null,Rl=null,Pl=0,Ol=0,Nl=_i(0),Dl=0,jl=null,Ll=0,Ml=0,Ul=0,Fl=null,zl=null,Vl=0,Bl=1/0,Hl=null,ql=!1,Wl=null,Kl=null,Gl=!1,$l=null,Ql=0,Yl=0,Jl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Il)?Je():-1!==Xl?Xl:Xl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Pl?Pl&-Pl:null!==mo.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(o(185));yt(e,n,r),0!==(2&Il)&&e===Al||(e===Al&&(0===(2&Il)&&(Ml|=n),4===Dl&&ac(e,Pl)),rc(e,r),1===n&&0===Il&&0===(1&t.mode)&&(Bl=Je()+500,Fi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Al?Pl:0);if(0===r)null!==n&&$e(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&$e(n),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(lc.bind(null,e)):Vi(lc.bind(null,e)),si(function(){0===(6&Il)&&Bi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,Zl=0,0!==(6&Il))throw Error(o(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Al?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Il;Il|=2;var s=pc();for(Al===e&&Pl===t||(Hl=null,Bl=Je()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}To(),El.current=s,Il=i,null!==Rl?t=0:(Al=null,Pl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=jl,hc(e,0),ac(e,r),rc(e,Je()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(s=pt(e))&&(r=s,t=oc(e,s))),1===t))throw n=jl,hc(e,0),ac(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:kc(e,zl,Hl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Vl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(kc.bind(null,e,zl,Hl),t);break}kc(e,zl,Hl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ri(kc.bind(null,e,zl,Hl),r);break}kc(e,zl,Hl);break;default:throw Error(o(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=zl,zl=n,null!==t&&sc(t)),e}function sc(e){null===zl?zl=e:zl.push.apply(zl,e)}function ac(e,t){for(t&=~Ul,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Il))throw Error(o(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=jl,hc(e,0),ac(e,t),rc(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,zl,Hl),rc(e,Je()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Bl=Je()+500,Fi&&Bi())}}function uc(e){null!==$l&&0===$l.tag&&0===(6&Il)&&xc();var t=Il;Il|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,0===(6&(Il=t))&&Bi()}}function dc(){Ol=Nl.current,Ei(Nl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:Jo(),Ei(Ai),Ei(Ii),rs();break;case 5:Zo(r);break;case 4:Jo();break;case 13:case 19:Ei(es);break;case 10:Io(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Al=e,Rl=e=Nc(e.current,null),Pl=Ol=t,Dl=0,jl=null,Ul=Ml=Ll=0,zl=Fl=null,null!==Oo){for(t=0;t<Oo.length;t++)if(null!==(r=(n=Oo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Oo=null}return e}function fc(e,t){for(;;){var n=Rl;try{if(To(),is.current=Xs,us){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}us=!1}if(ss=0,cs=ls=as=null,ds=!1,hs=0,Cl.current=null,null===n||null===n.return){Dl=1,jl=t,Rl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ma(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ga(s,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ga(s,u,t),gc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=ma(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),go(ca(c,l));break e}}s=c=ca(c,l),4!==Dl&&(Dl=2),null===Fl?Fl=[s]:Fl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,fa(0,c,t));break e;case 1:l=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,pa(s,l,t));break e}}s=s.return}while(null!==s)}wc(n)}catch(w){t=w,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=Xs,null===e?Xs:e}function gc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Al||0===(268435455&Ll)&&0===(268435455&Ml)||ac(Al,Pl)}function mc(e,t){var n=Il;Il|=2;var r=pc();for(Al===e&&Pl===t||(Hl=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(To(),Il=n,El.current=r,null!==Rl)throw Error(o(261));return Al=null,Pl=0,Dl}function yc(){for(;null!==Rl;)bc(Rl)}function vc(){for(;null!==Rl&&!Qe();)bc(Rl)}function bc(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?wc(e):Rl=t,Cl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Ol)))return void(Rl=n)}else{if(null!==(n=$a(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Dl=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Dl&&(Dl=5)}function kc(e,t,n){var r=bt,i=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==$l);if(0!==(6&Il))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Al&&(Rl=Al=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ac(tt,function(){return xc(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Tl.transition,Tl.transition=null;var a=bt;bt=1;var l=Il;Il|=4,Cl.current=null,function(e,t){if(ei=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(k){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(k){_c(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ye(),Il=l,bt=a,Tl.transition=s}else e.current=n;if(Gl&&(Gl=!1,$l=e,Ql=i),s=e.pendingLanes,0===s&&(Kl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Wl,Wl=null,e;0!==(1&Ql)&&0!==e.tag&&xc(),s=e.pendingLanes,0!==(1&s)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Bi()}(e,t,n,r)}finally{Tl.transition=i,bt=r}return null}function xc(){if(null!==$l){var e=wt(Ql),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===$l)var r=!1;else{if(e=$l,$l=null,Ql=0,0!==(6&Il))throw Error(o(331));var i=Il;for(Il|=4,Xa=e.current;null!==Xa;){var s=Xa,a=s.child;if(0!==(16&Xa.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var d=Xa;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Xa=h;else for(;null!==Xa;){var f=(d=Xa).sibling,p=d.return;if(ol(d),d===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Xa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(s=Xa).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Xa=v;break e}Xa=s.return}}var b=e.current;for(Xa=b;null!==Xa;){var w=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Xa=w;else e:for(a=b;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){_c(l,l.return,x)}if(l===a){Xa=null;break e}var k=l.sibling;if(null!==k){k.return=l.return,Xa=k;break e}Xa=l.return}}if(Il=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function Sc(e,t,n){e=zo(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function _c(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=zo(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Pl&n)===n&&(4===Dl||3===Dl&&(130023424&Pl)===Pl&&500>Je()-Vl?hc(e,0):Ul|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=jo(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Cc(e,n)}function Ac(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return jc(n.children,i,s,t);case _:a=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=s,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=s,e;case R:return(e=Pc(19,n,t,i)).elementType=R,e.lanes=s,e;case N:return Lc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case T:a=9;break e;case I:a=11;break e;case P:a=14;break e;case O:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function jc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,o,s,a,l){return e=new Fc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mo(o),e}function Vc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return ji(e,n,t)}return t}function Bc(e,t,n,r,i,o,s,a,l){return(e=zc(n,r,!0,e,0,o,0,a,l)).context=Vc(null),n=e.current,(o=Fo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,zo(n,o,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Hc(e,t,n,r){var i=t.current,o=ec(),s=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zo(i,t,s))&&(nc(e,i,s,o),Vo(e,i,s)),s}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),po();break;case 5:Xo(t);break;case 1:Oi(t.type)&&Li(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ma(e,t,n):(Ci(es,1&es.current),null!==(e=qa(e,t,n))?e.sibling:null);Ci(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,_a(e,t,n)}return qa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,io&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Pi(t,Ii.current);Ro(t,n),i=ms(null,t,r,e,i,n);var s=ys();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(s=!0,Li(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Mo(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ia(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=Ta(null,t,r,e,n);break e;case 11:t=ka(null,t,r,e,n);break e;case 14:t=xa(null,t,r,na(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Uo(e,t),Ho(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ra(e,t,r,n,i=ca(Error(o(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ca(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=qa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Xo(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ea(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ma(e,t,n);case 4:return Yo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ko(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ci(So,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ai.current){t=qa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Fo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ao(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ao(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ro(t,n),r=r(i=Po(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),xa(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),Ha(e,t),t.tag=1,Oi(r)?(e=!0,Li(t)):e=!1,Ro(t,n),sa(t,r,i),la(t,r,i,n),Ia(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return _a(e,t,n)}throw Error(o(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=qc(s);a.call(e)}}Hc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=qc(s);o.call(e)}}var s=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),uc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=qc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc(function(){Hc(t,l,n,r)}),l}(n,t,e,i,r);return qc(s)}Qc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hc(e,t,null,null)},Qc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Hc(null,e,null,null)}),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Mt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0===(6&Il)&&(Bl=Je()+500,Bi()))}break;case 13:uc(function(){var t=jo(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},xt=function(e){if(13===e.tag){var t=jo(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=jo(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},_t=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ki(r);if(!i)throw Error(o(90));G(r),X(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Ae=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,ki,Ce,Te,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(o(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,(()=>{"use strict";var e,t=n(43),r=n.t(t,2),i=n(391),o=n(950),s=n.t(o,2);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(t,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,u=o.history,p=e.Pop,g=null,m=y();function y(){return(u.state||{idx:null}).idx}function v(){p=e.Pop;let t=y(),n=null==t?null:t-m;m=t,g&&g({action:p,location:w.location,delta:n})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,u.replaceState(a({},u.state,{idx:m}),""));let w={get action(){return p},get location(){return t(o,u)},listen(e){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(l,v),g=e,()=>{o.removeEventListener(l,v),g=null}},createHref:e=>n(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let i=h(w.location,t,n);r&&r(i,t),m=y()+1;let a=d(i,m),l=w.createHref(i);try{u.pushState(a,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;o.location.assign(l)}s&&g&&g({action:p,location:w.location,delta:1})},replace:function(t,n){p=e.Replace;let i=h(w.location,t,n);r&&r(i,t),m=y();let o=d(i,m),a=w.createHref(i);u.replaceState(o,"",a),s&&g&&g({action:p,location:w.location,delta:0})},go:e=>u.go(e)};return w}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let i=O(("string"===typeof t?p(t):t).pathname||"/",n);if(null==i)return null;let o=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=P(i);s=A(o[a],e,r)}return s}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(c(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=M([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),b(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:I(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=w(r.join("/")),a=[];return a.push(...s.map(e=>""===e?o:[o,e].join("/"))),i&&a.push(...s),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const k=/^:[\w-]+$/,x=3,S=2,_=1,E=10,C=-2,T=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=C),t&&(r+=S),n.filter(e=>!T(e)).reduce((e,t)=>e+(k.test(t)?x:""===t?_:E),r)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:M([o,u.pathname]),pathnameBase:U(M([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=M([o,u.pathnameBase]))}return s}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:s,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function N(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function j(e,t){let n=D(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=p(e):(i=a({},e),c(!i.pathname||!i.pathname.includes("?"),N("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),N("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),N("#","search","hash",i)));let o,s=""===e||""===i.pathname,l=s?"/":i.pathname;if(null==l)o=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?p(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:F(r),hash:z(i)}}(i,o),d=l&&"/"!==l&&l.endsWith("/"),h=(s||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],H=(new Set(B),["get",...B]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}const W=t.createContext(null);const K=t.createContext(null);const G=t.createContext(null);const $=t.createContext(null);const Q=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=t.createContext(null);function J(){return null!=t.useContext($)}function X(){return J()||c(!1),t.useContext($).location}function Z(e){t.useContext(G).static||t.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=t.useContext(Q);return e?function(){let{router:e}=ce(ae.UseNavigateStable),n=de(le.UseNavigateStable),r=t.useRef(!1);return Z(()=>{r.current=!0}),t.useCallback(function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,q({fromRouteId:n},i)))},[e,n])}():function(){J()||c(!1);let e=t.useContext(W),{basename:n,future:r,navigator:i}=t.useContext(G),{matches:o}=t.useContext(Q),{pathname:s}=X(),a=JSON.stringify(j(o,r.v7_relativeSplatPath)),l=t.useRef(!1);return Z(()=>{l.current=!0}),t.useCallback(function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void i.go(t);let o=L(t,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==n&&(o.pathname="/"===o.pathname?n:M([n,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)},[n,i,a,s,e])}()}function te(n,r,i,o){J()||c(!1);let{navigator:s}=t.useContext(G),{matches:a}=t.useContext(Q),l=a[a.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=X();if(r){var g;let e="string"===typeof r?p(r):r;"/"===d||(null==(g=e.pathname)?void 0:g.startsWith(d))||c(!1),h=e}else h=f;let m=h.pathname||"/",v=m;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=y(n,{pathname:v});let w=se(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:M([d,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:M([d,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,i,o);return r&&w?t.createElement($.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},w):w}function ne(){let e=function(){var e;let n=t.useContext(Y),r=ue(le.UseRouteError),i=de(le.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}const re=t.createElement(ne,null);class ie extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(Q.Provider,{value:this.props.routeContext},t.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(W);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Q.Provider,{value:n},i)}function se(e,n,r,i){var o;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var s;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(s=i)&&s.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let a=e,l=null==(o=r)?void 0:o.errors;if(null!=l){let e=a.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,d=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){u=!0,a=d>=0?a.slice(0,d+1):[a[0]];break}}}return a.reduceRight((e,i,o)=>{let s,c=!1,h=null,f=null;var p;r&&(s=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||re,u&&(d<0&&0===o?(p="route-fallback",!1||he[p]||(he[p]=!0),c=!0,f=null):d===o&&(c=!0,f=i.route.hydrateFallbackElement||null)));let g=n.concat(a.slice(0,o+1)),m=()=>{let n;return n=s?h:c?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(oe,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(ie,{location:r.location,revalidation:r.revalidation,component:h,error:s,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let n=t.useContext(W);return n||c(!1),n}function ue(e){let n=t.useContext(K);return n||c(!1),n}function de(e){let n=function(){let e=t.useContext(Q);return e||c(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||c(!1),r.route.id}const he={};function fe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function pe(e){let{to:n,replace:r,state:i,relative:o}=e;J()||c(!1);let{future:s,static:a}=t.useContext(G),{matches:l}=t.useContext(Q),{pathname:u}=X(),d=ee(),h=L(n,j(l,s.v7_relativeSplatPath),u,"path"===o),f=JSON.stringify(h);return t.useEffect(()=>d(JSON.parse(f),{replace:r,state:i,relative:o}),[d,f,o,r,i]),null}function ge(e){c(!1)}function me(n){let{basename:r="/",children:i=null,location:o,navigationType:s=e.Pop,navigator:a,static:l=!1,future:u}=n;J()&&c(!1);let d=r.replace(/^\/*/,"/"),h=t.useMemo(()=>({basename:d,navigator:a,static:l,future:q({v7_relativeSplatPath:!1},u)}),[d,u,a,l]);"string"===typeof o&&(o=p(o));let{pathname:f="/",search:g="",hash:m="",state:y=null,key:v="default"}=o,b=t.useMemo(()=>{let e=O(f,d);return null==e?null:{location:{pathname:e,search:g,hash:m,state:y,key:v},navigationType:s}},[d,f,g,m,y,v,s]);return null==b?null:t.createElement(G.Provider,{value:h},t.createElement($.Provider,{children:i,value:b}))}function ye(e){let{children:t,location:n}=e;return te(ve(t),n)}new Promise(()=>{});t.Component;function ve(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,i)=>{if(!t.isValidElement(e))return;let o=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,ve(e.props.children,o));e.type!==ge&&c(!1),e.props.index&&e.props.children&&c(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ve(e.props.children,o)),r.push(s)}),r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(VA){}new Map;const be=r.startTransition;s.flushSync,r.useId;function we(e){let{basename:n,children:r,future:i,window:o}=e,s=t.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),g(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,a)));let l=s.current,[c,u]=t.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},p=t.useCallback(e=>{d&&be?be(()=>u(e)):u(e)},[u,d]);return t.useLayoutEffect(()=>l.listen(p),[l,p]),t.useEffect(()=>fe(i),[i]),t.createElement(me,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ke,xe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ke||(ke={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(xe||(xe={}));function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function _e(e){var t=function(e,t){if("object"!=Se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Se(t)?t:t+""}function Ee(e,t,n){return(t=_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach(function(t){Ee(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ie(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ae=function(){return Ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ae.apply(this,arguments)};Object.create;function Re(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Pe=n(324),Oe=n.n(Pe),Ne="-ms-",De="-moz-",je="-webkit-",Le="comm",Me="rule",Ue="decl",Fe="@keyframes",ze=Math.abs,Ve=String.fromCharCode,Be=Object.assign;function He(e){return e.trim()}function qe(e,t){return(e=t.exec(e))?e[0]:e}function We(e,t,n){return e.replace(t,n)}function Ke(e,t,n){return e.indexOf(t,n)}function Ge(e,t){return 0|e.charCodeAt(t)}function $e(e,t,n){return e.slice(t,n)}function Qe(e){return e.length}function Ye(e){return e.length}function Je(e,t){return t.push(e),e}function Xe(e,t){return e.filter(function(e){return!qe(e,t)})}var Ze=1,et=1,tt=0,nt=0,rt=0,it="";function ot(e,t,n,r,i,o,s,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Ze,column:et,length:s,return:"",siblings:a}}function st(e,t){return Be(ot("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function at(e){for(;e.root;)e=st(e.root,{children:[e]});Je(e,e.siblings)}function lt(){return rt=nt>0?Ge(it,--nt):0,et--,10===rt&&(et=1,Ze--),rt}function ct(){return rt=nt<tt?Ge(it,nt++):0,et++,10===rt&&(et=1,Ze++),rt}function ut(){return Ge(it,nt)}function dt(){return nt}function ht(e,t){return $e(it,e,t)}function ft(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function pt(e){return Ze=et=1,tt=Qe(it=e),nt=0,[]}function gt(e){return it="",e}function mt(e){return He(ht(nt-1,bt(91===e?e+2:40===e?e+1:e)))}function yt(e){for(;(rt=ut())&&rt<33;)ct();return ft(e)>2||ft(rt)>3?"":" "}function vt(e,t){for(;--t&&ct()&&!(rt<48||rt>102||rt>57&&rt<65||rt>70&&rt<97););return ht(e,dt()+(t<6&&32==ut()&&32==ct()))}function bt(e){for(;ct();)switch(rt){case e:return nt;case 34:case 39:34!==e&&39!==e&&bt(rt);break;case 40:41===e&&bt(e);break;case 92:ct()}return nt}function wt(e,t){for(;ct()&&e+rt!==57&&(e+rt!==84||47!==ut()););return"/*"+ht(t,nt-1)+"*"+Ve(47===e?e:ct())}function kt(e){for(;!ft(ut());)ct();return ht(e,nt)}function xt(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function St(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case Ue:return e.return=e.return||e.value;case Le:return"";case Fe:return e.return=e.value+"{"+xt(e.children,r)+"}";case Me:if(!Qe(e.value=e.props.join(",")))return""}return Qe(n=xt(e.children,r))?e.return=e.value+"{"+n+"}":""}function _t(e,t,n){switch(function(e,t){return 45^Ge(e,0)?(((t<<2^Ge(e,0))<<2^Ge(e,1))<<2^Ge(e,2))<<2^Ge(e,3):0}(e,t)){case 5103:return je+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return je+e+e;case 4789:return De+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return je+e+De+e+Ne+e+e;case 5936:switch(Ge(e,t+11)){case 114:return je+e+Ne+We(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return je+e+Ne+We(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return je+e+Ne+We(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return je+e+Ne+e+e;case 6165:return je+e+Ne+"flex-"+e+e;case 5187:return je+e+We(e,/(\w+).+(:[^]+)/,je+"box-$1$2"+Ne+"flex-$1$2")+e;case 5443:return je+e+Ne+"flex-item-"+We(e,/flex-|-self/g,"")+(qe(e,/flex-|baseline/)?"":Ne+"grid-row-"+We(e,/flex-|-self/g,""))+e;case 4675:return je+e+Ne+"flex-line-pack"+We(e,/align-content|flex-|-self/g,"")+e;case 5548:return je+e+Ne+We(e,"shrink","negative")+e;case 5292:return je+e+Ne+We(e,"basis","preferred-size")+e;case 6060:return je+"box-"+We(e,"-grow","")+je+e+Ne+We(e,"grow","positive")+e;case 4554:return je+We(e,/([^-])(transform)/g,"$1"+je+"$2")+e;case 6187:return We(We(We(e,/(zoom-|grab)/,je+"$1"),/(image-set)/,je+"$1"),e,"")+e;case 5495:case 3959:return We(e,/(image-set\([^]*)/,je+"$1$`$1");case 4968:return We(We(e,/(.+:)(flex-)?(.*)/,je+"box-pack:$3"+Ne+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+je+e+e;case 4200:if(!qe(e,/flex-|baseline/))return Ne+"grid-column-align"+$e(e,t)+e;break;case 2592:case 3360:return Ne+We(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(e,n){return t=n,qe(e.props,/grid-\w+-end/)})?~Ke(e+(n=n[t].value),"span",0)?e:Ne+We(e,"-start","")+e+Ne+"grid-row-span:"+(~Ke(n,"span",0)?qe(n,/\d+/):+qe(n,/\d+/)-+qe(e,/\d+/))+";":Ne+We(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(e){return qe(e.props,/grid-\w+-start/)})?e:Ne+We(We(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return We(e,/(.+)-inline(.+)/,je+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Qe(e)-1-t>6)switch(Ge(e,t+1)){case 109:if(45!==Ge(e,t+4))break;case 102:return We(e,/(.+:)(.+)-([^]+)/,"$1"+je+"$2-$3$1"+De+(108==Ge(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ke(e,"stretch",0)?_t(We(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return We(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(t,n,r,i,o,s,a){return Ne+n+":"+r+a+(i?Ne+n+"-span:"+(o?s:+s-+r)+a:"")+e});case 4949:if(121===Ge(e,t+6))return We(e,":",":"+je)+e;break;case 6444:switch(Ge(e,45===Ge(e,14)?18:11)){case 120:return We(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+je+(45===Ge(e,14)?"inline-":"")+"box$3$1"+je+"$2$3$1"+Ne+"$2box$3")+e;case 100:return We(e,":",":"+Ne)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return We(e,"scroll-","scroll-snap-")+e}return e}function Et(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Ue:return void(e.return=_t(e.value,e.length,n));case Fe:return xt([st(e,{value:We(e.value,"@","@"+je)})],r);case Me:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,function(t){switch(qe(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":at(st(e,{props:[We(t,/:(read-\w+)/,":-moz-$1")]})),at(st(e,{props:[t]})),Be(e,{props:Xe(n,r)});break;case"::placeholder":at(st(e,{props:[We(t,/:(plac\w+)/,":"+je+"input-$1")]})),at(st(e,{props:[We(t,/:(plac\w+)/,":-moz-$1")]})),at(st(e,{props:[We(t,/:(plac\w+)/,Ne+"input-$1")]})),at(st(e,{props:[t]})),Be(e,{props:Xe(n,r)})}return""})}}function Ct(e){return gt(Tt("",null,null,null,[""],e=pt(e),0,[0],e))}function Tt(e,t,n,r,i,o,s,a,l){for(var c=0,u=0,d=s,h=0,f=0,p=0,g=1,m=1,y=1,v=0,b="",w=i,k=o,x=r,S=b;m;)switch(p=v,v=ct()){case 40:if(108!=p&&58==Ge(S,d-1)){-1!=Ke(S+=We(mt(v),"&","&\f"),"&\f",ze(c?a[c-1]:0))&&(y=-1);break}case 34:case 39:case 91:S+=mt(v);break;case 9:case 10:case 13:case 32:S+=yt(p);break;case 92:S+=vt(dt()-1,7);continue;case 47:switch(ut()){case 42:case 47:Je(At(wt(ct(),dt()),t,n,l),l);break;default:S+="/"}break;case 123*g:a[c++]=Qe(S)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+u:-1==y&&(S=We(S,/\f/g,"")),f>0&&Qe(S)-d&&Je(f>32?Rt(S+";",r,n,d-1,l):Rt(We(S," ","")+";",r,n,d-2,l),l);break;case 59:S+=";";default:if(Je(x=It(S,t,n,c,u,i,a,b,w=[],k=[],d,o),o),123===v)if(0===u)Tt(S,t,x,x,w,o,d,a,k);else switch(99===h&&110===Ge(S,3)?100:h){case 100:case 108:case 109:case 115:Tt(e,x,x,r&&Je(It(e,x,x,0,0,i,a,b,i,w=[],d,k),k),i,k,d,a,r?w:k);break;default:Tt(S,x,x,x,[""],k,0,a,k)}}c=u=f=0,g=y=1,b=S="",d=s;break;case 58:d=1+Qe(S),f=p;default:if(g<1)if(123==v)--g;else if(125==v&&0==g++&&125==lt())continue;switch(S+=Ve(v),v*g){case 38:y=u>0?1:(S+="\f",-1);break;case 44:a[c++]=(Qe(S)-1)*y,y=1;break;case 64:45===ut()&&(S+=mt(ct())),h=ut(),u=d=Qe(b=S+=kt(dt())),v++;break;case 45:45===p&&2==Qe(S)&&(g=0)}}return o}function It(e,t,n,r,i,o,s,a,l,c,u,d){for(var h=i-1,f=0===i?o:[""],p=Ye(f),g=0,m=0,y=0;g<r;++g)for(var v=0,b=$e(e,h+1,h=ze(m=s[g])),w=e;v<p;++v)(w=He(m>0?f[v]+" "+b:We(b,/&\f/g,f[v])))&&(l[y++]=w);return ot(e,t,n,0===i?Me:a,l,c,u,d)}function At(e,t,n,r){return ot(e,t,n,Le,Ve(rt),$e(e,2,-2),0,r)}function Rt(e,t,n,r,i){return ot(e,t,n,Ue,$e(e,0,r),$e(e,r+1,-1),r,i)}var Pt={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ot="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",Nt="active",Dt="data-styled-version",jt="6.1.19",Lt="/*!sc*/\n",Mt="undefined"!=typeof window&&"undefined"!=typeof document,Ut=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),Ft=(new Set,Object.freeze([])),zt=Object.freeze({});function Vt(e,t,n){return void 0===n&&(n=zt),e.theme!==n.theme&&e.theme||t||n.theme}var Bt=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Ht=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,qt=/(^-|-$)/g;function Wt(e){return e.replace(Ht,"-").replace(qt,"")}var Kt=/(a)(d)/gi,Gt=function(e){return String.fromCharCode(e+(e>25?39:97))};function $t(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Gt(t%52)+n;return(Gt(t%52)+n).replace(Kt,"$1-$2")}var Qt,Yt=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Jt=function(e){return Yt(5381,e)};function Xt(e){return $t(Jt(e)>>>0)}function Zt(e){return e.displayName||e.name||"Component"}function en(e){return"string"==typeof e&&!0}var tn="function"==typeof Symbol&&Symbol.for,nn=tn?Symbol.for("react.memo"):60115,rn=tn?Symbol.for("react.forward_ref"):60112,on={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},sn={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},an={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ln=((Qt={})[rn]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Qt[nn]=an,Qt);function cn(e){return("type"in(t=e)&&t.type.$$typeof)===nn?an:"$$typeof"in e?ln[e.$$typeof]:on;var t}var un=Object.defineProperty,dn=Object.getOwnPropertyNames,hn=Object.getOwnPropertySymbols,fn=Object.getOwnPropertyDescriptor,pn=Object.getPrototypeOf,gn=Object.prototype;function mn(e,t,n){if("string"!=typeof t){if(gn){var r=pn(t);r&&r!==gn&&mn(e,r,n)}var i=dn(t);hn&&(i=i.concat(hn(t)));for(var o=cn(e),s=cn(t),a=0;a<i.length;++a){var l=i[a];if(!(l in sn||n&&n[l]||s&&l in s||o&&l in o)){var c=fn(t,l);try{un(e,l,c)}catch(e){}}}}return e}function yn(e){return"function"==typeof e}function vn(e){return"object"==typeof e&&"styledComponentId"in e}function bn(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function wn(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function kn(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function xn(e,t,n){if(void 0===n&&(n=!1),!n&&!kn(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=xn(e[r],t[r]);else if(kn(t))for(var r in t)e[r]=xn(e[r],t[r]);return e}function Sn(e,t){Object.defineProperty(e,"toString",{value:t})}function _n(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var En=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw _n(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),a=(o=0,t.length);o<a;o++)this.tag.insertRule(s,t[o])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(Lt);return t},e}(),Cn=new Map,Tn=new Map,In=1,An=function(e){if(Cn.has(e))return Cn.get(e);for(;Tn.has(In);)In++;var t=In++;return Cn.set(e,t),Tn.set(t,e),t},Rn=function(e,t){In=t+1,Cn.set(e,t),Tn.set(t,e)},Pn="style[".concat(Ot,"][").concat(Dt,'="').concat(jt,'"]'),On=new RegExp("^".concat(Ot,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Nn=function(e,t,n){for(var r,i=n.split(","),o=0,s=i.length;o<s;o++)(r=i[o])&&e.registerName(t,r)},Dn=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(Lt),i=[],o=0,s=r.length;o<s;o++){var a=r[o].trim();if(a){var l=a.match(On);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(Rn(u,c),Nn(e,u,l[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(a)}}},jn=function(e){for(var t=document.querySelectorAll(Pn),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(Ot)!==Nt&&(Dn(e,i),i.parentNode&&i.parentNode.removeChild(i))}};function Ln(){return n.nc}var Mn=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Ot,"]")));return t[t.length-1]}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(Ot,Nt),r.setAttribute(Dt,jt);var s=Ln();return s&&r.setAttribute("nonce",s),n.insertBefore(r,o),r},Un=function(){function e(e){this.element=Mn(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw _n(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Fn=function(){function e(e){this.element=Mn(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),zn=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Vn=Mt,Bn={isServer:!Mt,useCSSOMInjection:!Ut},Hn=function(){function e(e,t,n){void 0===e&&(e=zt),void 0===t&&(t={});var r=this;this.options=Ae(Ae({},Bn),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Mt&&Vn&&(Vn=!1,jn(this)),Sn(this,function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return Tn.get(e)}(n);if(void 0===i)return"continue";var o=e.names.get(i),s=t.getGroup(n);if(void 0===o||!o.size||0===s.length)return"continue";var a="".concat(Ot,".g").concat(n,'[id="').concat(i,'"]'),l="";void 0!==o&&o.forEach(function(e){e.length>0&&(l+="".concat(e,","))}),r+="".concat(s).concat(a,'{content:"').concat(l,'"}').concat(Lt)},o=0;o<n;o++)i(o);return r}(r)})}return e.registerId=function(e){return An(e)},e.prototype.rehydrate=function(){!this.server&&Mt&&jn(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(Ae(Ae({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new zn(n):t?new Un(n):new Fn(n)}(this.options),new En(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(An(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(An(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(An(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),qn=/&/g,Wn=/^\s*\/\/.*$/gm;function Kn(e,t){return e.map(function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(e){return"".concat(t," ").concat(e)})),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Kn(e.children,t)),e})}function Gn(e){var t,n,r,i=void 0===e?zt:e,o=i.options,s=void 0===o?zt:o,a=i.plugins,l=void 0===a?Ft:a,c=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=l.slice();u.push(function(e){e.type===Me&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(qn,n).replace(r,c))}),s.prefix&&u.push(Et),u.push(St);var d=function(e,i,o,a){void 0===i&&(i=""),void 0===o&&(o=""),void 0===a&&(a="&"),t=a,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var l=e.replace(Wn,""),c=Ct(o||i?"".concat(o," ").concat(i," { ").concat(l," }"):l);s.namespace&&(c=Kn(c,s.namespace));var d,h=[];return xt(c,function(e){var t=Ye(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}(u.concat((d=function(e){return h.push(e)},function(e){e.root||(e=e.return)&&d(e)})))),h};return d.hash=l.length?l.reduce(function(e,t){return t.name||_n(15),Yt(e,t.name)},5381).toString():"",d}var $n=new Hn,Qn=Gn(),Yn=t.createContext({shouldForwardProp:void 0,styleSheet:$n,stylis:Qn}),Jn=(Yn.Consumer,t.createContext(void 0));function Xn(){return(0,t.useContext)(Yn)}function Zn(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],o=Xn().styleSheet,s=(0,t.useMemo)(function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target,o]),a=(0,t.useMemo)(function(){return Gn({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:r})},[e.enableVendorPrefixes,e.namespace,r]);(0,t.useEffect)(function(){Oe()(r,e.stylisPlugins)||i(e.stylisPlugins)},[e.stylisPlugins]);var l=(0,t.useMemo)(function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:s,stylis:a}},[e.shouldForwardProp,s,a]);return t.createElement(Yn.Provider,{value:l},t.createElement(Jn.Provider,{value:a},e.children))}var er=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Qn);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,Sn(this,function(){throw _n(12,String(n.name))})}return e.prototype.getName=function(e){return void 0===e&&(e=Qn),this.name+e.hash},e}(),tr=function(e){return e>="A"&&e<="Z"};function nr(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;tr(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var rr=function(e){return null==e||!1===e||""===e},ir=function(e){var t,n,r=[];for(var i in e){var o=e[i];e.hasOwnProperty(i)&&!rr(o)&&(Array.isArray(o)&&o.isCss||yn(o)?r.push("".concat(nr(i),":"),o,";"):kn(o)?r.push.apply(r,Re(Re(["".concat(i," {")],ir(o),!1),["}"],!1)):r.push("".concat(nr(i),": ").concat((t=i,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in Pt||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function or(e,t,n,r){return rr(e)?[]:vn(e)?[".".concat(e.styledComponentId)]:yn(e)?!yn(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:or(e(t),t,n,r):e instanceof er?n?(e.inject(n,r),[e.getName(r)]):[e]:kn(e)?ir(e):Array.isArray(e)?Array.prototype.concat.apply(Ft,e.map(function(e){return or(e,t,n,r)})):[e.toString()];var i}function sr(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(yn(n)&&!vn(n))return!1}return!0}var ar=Jt(jt),lr=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&sr(e),this.componentId=t,this.baseHash=Yt(ar,t),this.baseStyle=n,Hn.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=bn(r,this.staticRulesId);else{var i=wn(or(this.rules,e,t,n)),o=$t(Yt(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var s=n(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,s)}r=bn(r,o),this.staticRulesId=o}else{for(var a=Yt(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var d=wn(or(u,e,t,n));a=Yt(a,d+c),l+=d}}if(l){var h=$t(a>>>0);t.hasNameForId(this.componentId,h)||t.insertRules(this.componentId,h,n(l,".".concat(h),void 0,this.componentId)),r=bn(r,h)}}return r},e}(),cr=t.createContext(void 0);cr.Consumer;var ur={};new Set;function dr(e,n,r){var i=vn(e),o=e,s=!en(e),a=n.attrs,l=void 0===a?Ft:a,c=n.componentId,u=void 0===c?function(e,t){var n="string"!=typeof e?"sc":Wt(e);ur[n]=(ur[n]||0)+1;var r="".concat(n,"-").concat(Xt(jt+n+ur[n]));return t?"".concat(t,"-").concat(r):r}(n.displayName,n.parentComponentId):c,d=n.displayName,h=void 0===d?function(e){return en(e)?"styled.".concat(e):"Styled(".concat(Zt(e),")")}(e):d,f=n.displayName&&n.componentId?"".concat(Wt(n.displayName),"-").concat(n.componentId):n.componentId||u,p=i&&o.attrs?o.attrs.concat(l).filter(Boolean):l,g=n.shouldForwardProp;if(i&&o.shouldForwardProp){var m=o.shouldForwardProp;if(n.shouldForwardProp){var y=n.shouldForwardProp;g=function(e,t){return m(e,t)&&y(e,t)}}else g=m}var v=new lr(r,f,i?o.componentStyle:void 0);function b(e,n){return function(e,n,r){var i=e.attrs,o=e.componentStyle,s=e.defaultProps,a=e.foldedComponentIds,l=e.styledComponentId,c=e.target,u=t.useContext(cr),d=Xn(),h=e.shouldForwardProp||d.shouldForwardProp,f=Vt(n,u,s)||zt,p=function(e,t,n){for(var r,i=Ae(Ae({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var s=yn(r=e[o])?r(i):r;for(var a in s)i[a]="className"===a?bn(i[a],s[a]):"style"===a?Ae(Ae({},i[a]),s[a]):s[a]}return t.className&&(i.className=bn(i.className,t.className)),i}(i,n,f),g=p.as||c,m={};for(var y in p)void 0===p[y]||"$"===y[0]||"as"===y||"theme"===y&&p.theme===f||("forwardedAs"===y?m.as=p.forwardedAs:h&&!h(y,g)||(m[y]=p[y]));var v=function(e,t){var n=Xn();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(o,p),b=bn(a,l);return v&&(b+=" "+v),p.className&&(b+=" "+p.className),m[en(g)&&!Bt.has(g)?"class":"className"]=b,r&&(m.ref=r),(0,t.createElement)(g,m)}(w,e,n)}b.displayName=h;var w=t.forwardRef(b);return w.attrs=p,w.componentStyle=v,w.displayName=h,w.shouldForwardProp=g,w.foldedComponentIds=i?bn(o.foldedComponentIds,o.styledComponentId):"",w.styledComponentId=f,w.target=i?o.target:e,Object.defineProperty(w,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)xn(e,i[r],!0);return e}({},o.defaultProps,e):e}}),Sn(w,function(){return".".concat(w.styledComponentId)}),s&&mn(w,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),w}function hr(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var fr=function(e){return Object.assign(e,{isCss:!0})};function pr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(yn(e)||kn(e))return fr(or(hr(Ft,Re([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?or(r):fr(or(hr(r,t)))}function gr(e,t,n){if(void 0===n&&(n=zt),!t)throw _n(1,t);var r=function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e(t,n,pr.apply(void 0,Re([r],i,!1)))};return r.attrs=function(r){return gr(e,t,Ae(Ae({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return gr(e,t,Ae(Ae({},n),r))},r}var mr=function(e){return gr(dr,e)},yr=mr;Bt.forEach(function(e){yr[e]=mr(e)});!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=sr(e),Hn.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(wn(or(this.rules,t,n,r)),""),o=this.componentId+e;n.insertRules(o,o,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&Hn.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();function vr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=wn(pr.apply(void 0,Re([e],t,!1))),i=Xt(r);return new er(i,r)}(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=Ln(),r=wn([n&&'nonce="'.concat(n,'"'),"".concat(Ot,'="true"'),"".concat(Dt,'="').concat(jt,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw _n(2);return e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)throw _n(2);var r=e.instance.toString();if(!r)return[];var i=((n={})[Ot]="",n[Dt]=jt,n.dangerouslySetInnerHTML={__html:r},n),o=Ln();return o&&(i.nonce=o),[t.createElement("style",Ae({},i,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Hn({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw _n(2);return t.createElement(Zn,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw _n(3)}})(),"__sc-".concat(Ot,"__");function br(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var wr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const kr=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],xr=(e,n)=>{const r=(0,t.forwardRef)((r,i)=>{let{color:o="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:c="",children:u}=r,d=br(r,kr);return(0,t.createElement)("svg",Te(Te({ref:i},wr),{},{width:s,height:s,stroke:o,strokeWidth:l?24*Number(a)/Number(s):a,className:["lucide","lucide-".concat((h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),c].join(" ")},d),[...n.map(e=>{let[n,r]=e;return(0,t.createElement)(n,r)}),...Array.isArray(u)?u:[u]]);var h});return r.displayName="".concat(e),r},Sr=xr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),_r=xr("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Er=xr("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Cr=xr("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Tr=["video","audio","text","overlay"],Ir=.1,Ar=[.25,.5,.75,1,1.25,1.5,2],Rr=xr("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Pr=xr("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),Or=xr("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),Nr=xr("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);var Dr=n(579);const jr=["timeline","tracks","currentTime","resolution","onVideoLoad"];var Lr,Mr,Ur,Fr,zr,Vr,Br,Hr;const qr=yr.div(Lr||(Lr=Ie(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #000;\n  border-radius: 8px;\n  overflow: hidden;\n  min-height: 300px;\n"]))),Wr=yr.video(Mr||(Mr=Ie(["\n  max-width: 100%;\n  max-height: 100%;\n  width: auto;\n  height: auto;\n  object-fit: contain;\n  border-radius: 4px;\n"]))),Kr=yr.img(Ur||(Ur=Ie(["\n  max-width: 100%;\n  max-height: 100%;\n  width: auto;\n  height: auto;\n  object-fit: contain;\n  border-radius: 4px;\n"]))),Gr=yr.div(Fr||(Fr=Ie(["\n  position: absolute;\n  color: white;\n  font-size: ","px;\n  font-family: ",";\n  opacity: ",";\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);\n  pointer-events: none;\n  z-index: 10;\n  text-align: center;\n"])),e=>e.$fontSize||24,e=>e.$fontFamily||"Arial",e=>e.$opacity||1),$r=yr.div(zr||(zr=Ie(["\n  position: absolute;\n  top: 1rem;\n  left: 1rem;\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  font-size: 0.85rem;\n  font-family: monospace;\n  backdrop-filter: blur(4px);\n"]))),Qr=yr.div(Vr||(Vr=Ie(["\n  position: absolute;\n  bottom: 1rem;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  gap: 0.5rem;\n  background: rgba(0, 0, 0, 0.8);\n  padding: 0.5rem;\n  border-radius: 8px;\n  backdrop-filter: blur(4px);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  \n  ",":hover & {\n    opacity: 1;\n  }\n"])),qr),Yr=yr.button(Br||(Br=Ie(["\n  background: rgba(255, 255, 255, 0.1);\n  border: none;\n  border-radius: 4px;\n  color: white;\n  padding: 0.5rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n  }\n"]))),Jr=yr.div(Hr||(Hr=Ie(["\n  color: #666;\n  text-align: center;\n  font-size: 1.1rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n"]))),Xr=(0,t.forwardRef)((e,n)=>{var r;let{timeline:i,tracks:o=[],currentTime:s=0,resolution:a={width:1920,height:1080},onVideoLoad:l}=e,c=br(e,jr);const u=(0,t.useRef)(null),[d,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(!1),[g,m]=(0,t.useState)(null),y=(0,t.useCallback)(e=>{if(!o||!Array.isArray(o))return[];const t=[];return o.forEach(n=>{n.clips&&!1!==n.enabled&&n.clips.forEach(r=>{r.start<=e&&r.end>e&&t.push(Te(Te({},r),{},{trackId:n.id,trackType:n.type}))})}),t.sort((e,t)=>{const n="video"===e.type||"image"===e.type,r="video"===t.type||"image"===t.type;return n&&!r?-1:!n&&r?1:e.start-t.start})},[o]);(0,t.useEffect)(()=>{const e=y(s);if(e.length>0){const t=e.find(e=>"video"===e.type||"image"===e.type)||e[0];m({clip:t,overlays:e.filter(e=>"text"===e.type||"font"===e.type),audio:e.filter(e=>"audio"===e.type)})}else m(null)},[s,y]);const v=(0,t.useCallback)(()=>{u.current&&(d?u.current.pause():u.current.play(),h(!d))},[d]),b=(0,t.useCallback)(()=>{u.current&&(u.current.muted=!f,p(!f))},[f]),w=(0,t.useCallback)(()=>{u.current&&u.current.requestFullscreen&&u.current.requestFullscreen()},[]);(0,t.useEffect)(()=>{var e;if(u.current&&"video"===(null===g||void 0===g||null===(e=g.clip)||void 0===e?void 0:e.type)){const e=s-g.clip.start,t=Math.max(0,e+(g.clip.trimStart||0));Math.abs(u.current.currentTime-t)>.1&&(u.current.currentTime=t)}},[s,g]),(0,t.useEffect)(()=>{if(u.current&&l){const e=()=>{l(u.current)};return u.current.addEventListener("loadedmetadata",e),()=>{u.current&&u.current.removeEventListener("loadedmetadata",e)}}},[l,g]);const k=e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))};return(0,Dr.jsxs)(qr,Te(Te({ref:n},c),{},{children:[(()=>{var e,t,n,r,i,o,s,a;if(!g||!g.clip)return(0,Dr.jsxs)(Jr,{children:[(0,Dr.jsx)("div",{style:{fontSize:"2rem",opacity:.3},children:"\ud83d\udcf9"}),(0,Dr.jsx)("div",{children:"No content to preview"}),(0,Dr.jsx)("div",{style:{fontSize:"0.9rem",color:"#555"},children:"Drag assets to the timeline to see them here"})]});const{clip:l,overlays:c}=g;switch(l.type){case"video":return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(Wr,{ref:u,src:l.source,muted:f,style:{opacity:l.opacity||1,transform:"\n                  translate(".concat((null===(e=l.position)||void 0===e?void 0:e.x)||0,"px, ").concat((null===(t=l.position)||void 0===t?void 0:t.y)||0,"px)\n                  scale(").concat((null===(n=l.scale)||void 0===n?void 0:n.x)||1,", ").concat((null===(r=l.scale)||void 0===r?void 0:r.y)||1,")\n                  rotate(").concat(l.rotation||0,"deg)\n                ")}}),c&&c.map(e=>(0,Dr.jsx)(Gr,{$fontSize:e.fontSize,$fontFamily:e.fontFamily,$opacity:e.opacity,style:{color:e.color},children:e.text||e.name},e.id))]});case"image":return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(Kr,{src:l.source,alt:l.name,style:{opacity:l.opacity||1,transform:"\n                  translate(".concat((null===(i=l.position)||void 0===i?void 0:i.x)||0,"px, ").concat((null===(o=l.position)||void 0===o?void 0:o.y)||0,"px)\n                  scale(").concat((null===(s=l.scale)||void 0===s?void 0:s.x)||1,", ").concat((null===(a=l.scale)||void 0===a?void 0:a.y)||1,")\n                  rotate(").concat(l.rotation||0,"deg)\n                ")}}),c&&c.map(e=>(0,Dr.jsx)(Gr,{$fontSize:e.fontSize,$fontFamily:e.fontFamily,$opacity:e.opacity,style:{color:e.color},children:e.text||e.name},e.id))]});case"text":case"font":return(0,Dr.jsx)(Gr,{$fontSize:l.fontSize,$fontFamily:l.fontFamily,$opacity:l.opacity,style:{color:l.color,position:"static",transform:"none"},children:l.text||l.name});default:return(0,Dr.jsx)(Jr,{children:(0,Dr.jsxs)("div",{children:["Unsupported content type: ",l.type]})})}})(),g&&(0,Dr.jsxs)($r,{children:[(0,Dr.jsx)("div",{children:g.clip.name}),(0,Dr.jsxs)("div",{children:[k(s)," / ",k((null===i||void 0===i?void 0:i.duration)||0)]}),(0,Dr.jsxs)("div",{children:[a.width,"\xd7",a.height]})]}),"video"===(null===g||void 0===g||null===(r=g.clip)||void 0===r?void 0:r.type)&&(0,Dr.jsxs)(Qr,{children:[(0,Dr.jsx)(Yr,{onClick:v,children:d?(0,Dr.jsx)(Rr,{size:16}):(0,Dr.jsx)(Er,{size:16})}),(0,Dr.jsx)(Yr,{onClick:b,children:f?(0,Dr.jsx)(Pr,{size:16}):(0,Dr.jsx)(Or,{size:16})}),(0,Dr.jsx)(Yr,{onClick:w,children:(0,Dr.jsx)(Nr,{size:16})})]})]}))});Xr.displayName="Canvas";const Zr=Xr,ei=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!==typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e))},s=t=e(r,i,o);return o},ti=e=>e;const ni=e=>{const n=(e=>e?ei(e):ei)(e),r=e=>function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ti;const r=t.useSyncExternalStore(e.subscribe,()=>n(e.getState()),()=>n(e.getInitialState()));return t.useDebugValue(r),r}(n,e);return Object.assign(r,n),r};const ri=(ii=(e=>(t,n,r)=>{const i=r.subscribe;r.subscribe=(e,t,n)=>{let o=e;if(t){const i=(null==n?void 0:n.equalityFn)||Object.is;let s=e(r.getState());o=n=>{const r=e(n);if(!i(s,r)){const e=s;t(s=r,e)}},(null==n?void 0:n.fireImmediately)&&t(s,s)}return i(o)};return e(t,n,r)})((e,t)=>({timeline:{position:0,duration:30,zoomLevel:1,isPlaying:!1,playbackRate:1,snapToGrid:!0,gridSize:.5,loopRegion:null},uploads:{active:[],completed:[],failed:[],totalProgress:0,isUploading:!1},selection:{selectedClips:[],selectedTracks:[],selectedAssets:[],multiSelectMode:!1},ui:{sidebarCollapsed:!1,inspectorCollapsed:!1,jsonViewerCollapsed:!0,mergeFieldsOpen:!1,fullscreenMode:!1,darkMode:!0},project:{id:null,name:"Untitled Project",lastSaved:null,isDirty:!1,autoSaveEnabled:!0},setPlayheadPosition:t=>e(e=>({timeline:Te(Te({},e.timeline),{},{position:Math.max(0,Math.min(t,e.timeline.duration))})})),setTimelineDuration:t=>e(e=>({timeline:Te(Te({},e.timeline),{},{duration:Math.max(1,t)})})),setZoomLevel:t=>e(e=>({timeline:Te(Te({},e.timeline),{},{zoomLevel:Math.max(.1,Math.min(10,t))})})),setPlaybackState:t=>e(e=>({timeline:Te(Te({},e.timeline),{},{isPlaying:t})})),setPlaybackRate:t=>e(e=>({timeline:Te(Te({},e.timeline),{},{playbackRate:Math.max(.25,Math.min(2,t))})})),toggleSnapToGrid:()=>e(e=>({timeline:Te(Te({},e.timeline),{},{snapToGrid:!e.timeline.snapToGrid})})),setLoopRegion:t=>e(e=>({timeline:Te(Te({},e.timeline),{},{loopRegion:t})})),startUpload:t=>e(e=>{const n=Te({id:"upload-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),filename:t.filename,fileSize:t.fileSize,fileType:t.fileType,progress:0,status:"uploading",startTime:Date.now(),estimatedTime:null,speed:0,error:null,thumbnail:t.thumbnail||null},t);return{uploads:Te(Te({},e.uploads),{},{active:[...e.uploads.active,n],isUploading:!0})}}),updateUploadProgress:function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e(e=>({uploads:Te(Te({},e.uploads),{},{active:e.uploads.active.map(e=>e.id===t?Te(Te(Te({},e),{},{progress:Math.min(100,Math.max(0,n))},r),{},{speed:r.speed||e.speed,estimatedTime:r.estimatedTime||e.estimatedTime}):e),totalProgress:e.uploads.active.length>0?e.uploads.active.reduce((e,r)=>e+(r.id===t?Math.min(100,Math.max(0,n)):r.progress),0)/e.uploads.active.length:0})}))},completeUpload:(t,n)=>e(e=>{const r=e.uploads.active.find(e=>e.id===t);if(!r)return e;const i=Te(Te({},r),{},{progress:100,status:"completed",completedTime:Date.now(),result:n});return{uploads:Te(Te({},e.uploads),{},{active:e.uploads.active.filter(e=>e.id!==t),completed:[...e.uploads.completed,i],isUploading:e.uploads.active.length>1,totalProgress:e.uploads.active.length>1?e.uploads.active.filter(e=>e.id!==t).reduce((e,t)=>e+t.progress,0)/(e.uploads.active.length-1):0})}}),failUpload:(t,n)=>e(e=>{const r=e.uploads.active.find(e=>e.id===t);if(!r)return e;const i=Te(Te({},r),{},{status:"failed",error:n.message||n,failedTime:Date.now()});return{uploads:Te(Te({},e.uploads),{},{active:e.uploads.active.filter(e=>e.id!==t),failed:[...e.uploads.failed,i],isUploading:e.uploads.active.length>1,totalProgress:e.uploads.active.length>1?e.uploads.active.filter(e=>e.id!==t).reduce((e,t)=>e+t.progress,0)/(e.uploads.active.length-1):0})}}),clearCompletedUploads:()=>e(e=>({uploads:Te(Te({},e.uploads),{},{completed:[]})})),clearFailedUploads:()=>e(e=>({uploads:Te(Te({},e.uploads),{},{failed:[]})})),retryFailedUpload:t=>e(e=>{const n=e.uploads.failed.find(e=>e.id===t);if(!n)return e;const r=Te(Te({},n),{},{status:"uploading",progress:0,error:null,retryCount:(n.retryCount||0)+1,startTime:Date.now()});return{uploads:Te(Te({},e.uploads),{},{active:[...e.uploads.active,r],failed:e.uploads.failed.filter(e=>e.id!==t),isUploading:!0})}}),selectClips:function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e(e=>({selection:Te(Te({},e.selection),{},{selectedClips:n?[...new Set([...e.selection.selectedClips,...t])]:t})}))},deselectClips:t=>e(e=>({selection:Te(Te({},e.selection),{},{selectedClips:e.selection.selectedClips.filter(e=>!t.includes(e))})})),clearClipSelection:()=>e(e=>({selection:Te(Te({},e.selection),{},{selectedClips:[]})})),selectTracks:function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e(e=>({selection:Te(Te({},e.selection),{},{selectedTracks:n?[...new Set([...e.selection.selectedTracks,...t])]:t})}))},clearTrackSelection:()=>e(e=>({selection:Te(Te({},e.selection),{},{selectedTracks:[]})})),toggleSidebar:()=>e(e=>({ui:Te(Te({},e.ui),{},{sidebarCollapsed:!e.ui.sidebarCollapsed})})),toggleInspector:()=>e(e=>({ui:Te(Te({},e.ui),{},{inspectorCollapsed:!e.ui.inspectorCollapsed})})),toggleJsonViewer:()=>e(e=>({ui:Te(Te({},e.ui),{},{jsonViewerCollapsed:!e.ui.jsonViewerCollapsed})})),setMergeFieldsOpen:t=>e(e=>({ui:Te(Te({},e.ui),{},{mergeFieldsOpen:t})})),toggleFullscreen:()=>e(e=>({ui:Te(Te({},e.ui),{},{fullscreenMode:!e.ui.fullscreenMode})})),setProjectName:t=>e(e=>({project:Te(Te({},e.project),{},{name:t,isDirty:!0})})),markProjectSaved:()=>e(e=>({project:Te(Te({},e.project),{},{lastSaved:(new Date).toISOString(),isDirty:!1})})),markProjectDirty:()=>e(e=>({project:Te(Te({},e.project),{},{isDirty:!0})})),resetEditor:()=>e(()=>({timeline:{position:0,duration:30,zoomLevel:1,isPlaying:!1,playbackRate:1,snapToGrid:!0,gridSize:.5,loopRegion:null},selection:{selectedClips:[],selectedTracks:[],selectedAssets:[],multiSelectMode:!1},project:{id:null,name:"Untitled Project",lastSaved:null,isDirty:!1,autoSaveEnabled:!0}})),getActiveUploads:()=>t().uploads.active,getCompletedUploads:()=>t().uploads.completed,getFailedUploads:()=>t().uploads.failed,getTotalUploadProgress:()=>t().uploads.totalProgress,isUploading:()=>t().uploads.isUploading,hasActiveUploads:()=>t().uploads.active.length>0,getSelectedClips:()=>t().selection.selectedClips,getSelectedTracks:()=>t().selection.selectedTracks,getPlayheadPosition:()=>t().timeline.position,getTimelineDuration:()=>t().timeline.duration,isPlaying:()=>t().timeline.isPlaying,getZoomLevel:()=>t().timeline.zoomLevel})),ii?ni(ii):ni);var ii;const oi=ri,si=["tracks","clips","player","onClipSelect","onClipMove","onClipTrim","onClipSplit","onAssetDrop","onTrackUpdate","selectedClips"];var ai,li,ci,ui,di,hi,fi,pi,gi,mi,yi,vi,bi,wi,ki;const xi=yr.div(ai||(ai=Ie(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  background: #1a1a1a;\n  overflow: hidden;\n"]))),Si=yr.div(li||(li=Ie(["\n  height: 30px;\n  background: #2a2a2a;\n  border-bottom: 1px solid #333;\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 0 1rem;\n  font-size: 0.8rem;\n  color: #666;\n  overflow: hidden;\n  cursor: pointer;\n"]))),_i=yr.div(ci||(ci=Ie(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  pointer-events: none;\n"]))),Ei=yr.div(ui||(ui=Ie(["\n  position: absolute;\n  top: 0;\n  width: 1px;\n  background: #555;\n  height: ",";\n  \n  &::after {\n    content: '","';\n    position: absolute;\n    top: -2px;\n    left: 4px;\n    font-size: 0.7rem;\n    color: #999;\n    white-space: nowrap;\n  }\n"])),e=>e.$major?"20px":"10px",e=>e.$label||""),Ci=yr.div(di||(di=Ie(["\n  flex: 1;\n  overflow-y: auto;\n  background: #1a1a1a;\n"]))),Ti=yr.div(hi||(hi=Ie(["\n  display: flex;\n  min-height: 60px;\n  border-bottom: 1px solid #333;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.02);\n  }\n"]))),Ii=yr.div(fi||(fi=Ie(["\n  width: 150px;\n  background: #2a2a2a;\n  border-right: 1px solid #333;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 0.75rem;\n  font-size: 0.85rem;\n  color: white;\n  position: sticky;\n  left: 0;\n  z-index: 10;\n  cursor: pointer;\n  \n  &:hover {\n    background: #333;\n  }\n"]))),Ai=yr.div(pi||(pi=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n"]))),Ri=yr.input(gi||(gi=Ie(["\n  background: transparent;\n  border: none;\n  color: white;\n  font-size: 0.85rem;\n  outline: none;\n  width: 100%;\n  \n  &:focus {\n    background: #444;\n    border-radius: 2px;\n    padding: 2px 4px;\n  }\n"]))),Pi=yr.div(mi||(mi=Ie(["\n  display: flex;\n  gap: 0.25rem;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  \n  ",":hover & {\n    opacity: 1;\n  }\n"])),Ii),Oi=yr.button(yi||(yi=Ie(["\n  background: none;\n  border: none;\n  color: #666;\n  cursor: pointer;\n  padding: 2px;\n  border-radius: 2px;\n  \n  &:hover {\n    color: #00d4ff;\n    background: rgba(0, 212, 255, 0.1);\n  }\n"]))),Ni=yr.div(vi||(vi=Ie(["\n  flex: 1;\n  position: relative;\n  background: repeating-linear-gradient(\n    90deg,\n    transparent,\n    transparent 49px,\n    #333 49px,\n    #333 50px\n  );\n  min-height: 60px;\n  transition: background-color 0.2s ease;\n  \n  &.drag-over {\n    background-color: rgba(0, 212, 255, 0.1);\n    border: 2px dashed #00d4ff;\n    border-radius: 4px;\n  }\n"]))),Di=yr.div(bi||(bi=Ie(["\n  position: absolute;\n  top: 8px;\n  bottom: 8px;\n  background: ",";\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  padding: 0 0.5rem;\n  color: white;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: ",";\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  border: 2px solid ",";\n  user-select: none;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    filter: brightness(1.1);\n    transform: translateY(-1px);\n    border-color: ",";\n  }\n  \n  /* Resize handles */\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    width: 8px;\n    background: rgba(255, 255, 255, 0.3);\n    opacity: ",";\n    cursor: ew-resize;\n    transition: opacity 0.2s ease;\n    z-index: 2;\n  }\n  \n  &::before {\n    left: 0;\n    border-top-left-radius: 4px;\n    border-bottom-left-radius: 4px;\n  }\n  \n  &::after {\n    right: 0;\n    border-top-right-radius: 4px;\n    border-bottom-right-radius: 4px;\n  }\n  \n  &:hover::before,\n  &:hover::after {\n    opacity: 1;\n    background: rgba(255, 255, 255, 0.6);\n  }\n"])),e=>e.$color||"#00d4ff",e=>e.$resizing?"ew-resize":"grab",e=>e.$selected?"#fff":"transparent",e=>e.$selected?"#fff":"rgba(255, 255, 255, 0.5)",e=>e.$selected?1:0),ji=yr.div(wi||(wi=Ie(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 2px;\n  background: #ff4444;\n  left: ","px;\n  z-index: 20;\n  pointer-events: none;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: -8px;\n    left: -6px;\n    width: 14px;\n    height: 16px;\n    background: #ff4444;\n    clip-path: polygon(50% 100%, 0 0, 100% 0);\n  }\n"])),e=>e.$position),Li=yr.div(ki||(ki=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  color: #666;\n  font-size: 1rem;\n  text-align: center;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),Mi=(0,t.forwardRef)((e,n)=>{let{tracks:r,clips:i,player:o,onClipSelect:s,onClipMove:a,onClipTrim:l,onClipSplit:c,onAssetDrop:u,onTrackUpdate:d,selectedClips:h=[]}=e,f=br(e,si);const[p,g]=(0,t.useState)(null),[m,y]=(0,t.useState)(null),{timeline:v,setPlayheadPosition:b,getPlayheadPosition:w,getZoomLevel:k,getTimelineDuration:x}=oi(),S=w(),_=k(),E=x(),C=50*_,T=S*C+150,I=((0,t.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},[]),(0,t.useCallback)((e,t)=>{e.preventDefault(),console.log("\ud83c\udfaf Drop detected on track:",t);try{const n=e.dataTransfer.getData("application/json");if(console.log("\ud83d\udce6 Raw drag data:",n),!n)return void console.error("\u274c No drag data found");const r=JSON.parse(n);console.log("\u2705 Parsed asset data:",r);const i=e.currentTarget.getBoundingClientRect(),o=e.clientX-i.left-150,s=Math.max(0,o/C),a=Math.round(2*s)/2;console.log("\ud83c\udfaf Drop position: ".concat(s.toFixed(2),"s \u2192 snapped to: ").concat(a,"s")),u?(console.log("\ud83d\ude80 Calling onAssetDrop with:",{assetData:r,trackId:t,snappedPosition:a}),u(r,t,a)):console.error("\u274c onAssetDrop callback not provided")}catch(n){console.error("\u274c Failed to parse dropped asset:",n)}},[C,u])),A=(0,t.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy",e.currentTarget.classList.add("drag-over")},[]),R=(0,t.useCallback)(e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over")},[]),P=(0,t.useCallback)(e=>{e.preventDefault(),e.currentTarget.classList.add("drag-over")},[]),O=(0,t.useCallback)((e,t,n)=>{e.stopPropagation();const r=e.currentTarget.getBoundingClientRect(),i=e.clientX-r.left;let o="move";i<8?o="resize-left":i>r.width-8&&(o="resize-right"),y({clipId:t.id,trackId:n,interactionType:o,startX:e.clientX,startPosition:t.start,startDuration:t.duration,initialRect:r}),s&&s(t.id,e.ctrlKey||e.metaKey)},[s]),N=(0,t.useCallback)(e=>{s&&s(e,!1)},[s]),D=(0,t.useCallback)((e,t)=>{t.stopPropagation(),g(e)},[]),j=(0,t.useCallback)((e,t)=>{d&&d(e,{name:t}),g(null)},[d]),L=(0,t.useCallback)((e,t)=>{"Enter"===e.key?j(t,e.target.value):"Escape"===e.key&&g(null)},[j]),M=(0,t.useCallback)(e=>{const t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left-150,r=Math.max(0,n/C),i=Math.min(r,E);b(i)},[C,E,b]);(0,t.useEffect)(()=>{const e=e=>{if(!m)return;const t=(e.clientX-m.startX)/C;switch(m.interactionType){case"move":if(a){const e=Math.max(0,m.startPosition+t);a(m.clipId,e)}break;case"resize-left":if(l){const e=Math.max(0,m.startPosition+t),n=m.startPosition+m.startDuration-.1,r=Math.min(e,n),i=m.startPosition+m.startDuration-r;l(m.clipId,r,i)}break;case"resize-right":if(l){const e=Math.max(.1,m.startDuration+t);l(m.clipId,m.startPosition,e)}}},t=()=>{y(null)};if(m)return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[m,C,a,l]);const U=e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))};return(0,Dr.jsxs)(xi,Te(Te({ref:n},f),{},{children:[(0,Dr.jsxs)(Si,{onClick:M,children:[(0,Dr.jsx)(_i,{children:(()=>{const e=[],t=Math.max(1,Math.round(5/_));for(let n=0;n<=E;n+=t){const r=n*C+150,i=n%(2*t)===0;e.push((0,Dr.jsx)(Ei,{$major:i,$label:i?U(n):"",style:{left:r}},n))}return e})()}),(0,Dr.jsx)(ji,{$position:T}),(0,Dr.jsx)("div",{style:{width:150,flexShrink:0},children:"Timeline"}),(0,Dr.jsx)("div",{style:{flex:1,position:"relative"}})]}),(0,Dr.jsx)(Ci,{children:null!==r&&void 0!==r&&r.tracks&&0!==r.tracks.length?r.tracks.map(e=>(0,Dr.jsxs)(Ti,{children:[(0,Dr.jsxs)(Ii,{style:{background:e.color+"20"},children:[(0,Dr.jsxs)(Ai,{children:[(0,Dr.jsx)("div",{style:{width:12,height:12,background:e.color,borderRadius:"50%"}}),p===e.id?(0,Dr.jsx)(Ri,{defaultValue:e.name,onBlur:t=>j(e.id,t.target.value),onKeyPress:t=>L(t,e.id)}):(0,Dr.jsx)("span",{onClick:t=>D(e.id,t),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||D(e.id,t)},role:"button",tabIndex:0,children:e.name})]}),(0,Dr.jsxs)(Pi,{children:[(0,Dr.jsx)(Oi,{onClick:()=>null===d||void 0===d?void 0:d(e.id,{enabled:!e.enabled}),style:{color:e.enabled?"#00d4ff":"#666"},children:"\ud83d\udc41"}),(0,Dr.jsx)(Oi,{onClick:()=>null===d||void 0===d?void 0:d(e.id,{locked:!e.locked}),style:{color:e.locked?"#ff6b6b":"#666"},children:"\ud83d\udd12"})]})]}),(0,Dr.jsxs)(Ni,{onDragOver:A,onDragEnter:P,onDragLeave:R,onDrop:t=>{R(t),I(t,e.id)},style:{position:"relative"},children:[(0,Dr.jsx)(ji,{$position:T-150}),e.clips&&e.clips.map((t,n)=>{var r;const i=h.includes(t.id),o=(null===m||void 0===m?void 0:m.clipId)===t.id;return(0,Dr.jsx)(Di,{$color:e.color,$selected:i,$resizing:o&&(null===m||void 0===m||null===(r=m.interactionType)||void 0===r?void 0:r.includes("resize")),style:{left:(t.start||0)*C,width:(t.duration||3)*C,opacity:o?.8:1},onMouseDown:n=>O(n,t,e.id),onClick:()=>N(t.id),children:t.name||"Clip ".concat(n+1)},t.id||n)})]})]},e.id)):(0,Dr.jsxs)(Li,{children:[(0,Dr.jsx)("div",{children:"No tracks available"}),(0,Dr.jsx)("div",{style:{fontSize:"0.8rem",color:"#555"},children:"Add tracks to start editing your timeline"})]})})]}))});Mi.displayName="Timeline";const Ui=Mi,Fi=xr("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),zi=xr("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Vi=xr("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),Bi=xr("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Hi=xr("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),qi=xr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var Wi,Ki,Gi,$i,Qi,Yi;const Ji=yr.div(Wi||(Wi=Ie(["\n  display: flex;\n  align-items: center;\n  padding: 0.75rem 1rem;\n  background: #2a2a2a;\n  border-bottom: 1px solid #333;\n  gap: 1rem;\n"]))),Xi=yr.div(Ki||(Ki=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),Zi=yr.button(Gi||(Gi=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: ",";\n  border: none;\n  border-radius: 6px;\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: ",";\n    transform: translateY(-1px);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),e=>e.$primary?"linear-gradient(45deg, #00d4ff, #0099cc)":"rgba(255, 255, 255, 0.1)",e=>e.$primary?"linear-gradient(45deg, #00b8e6, #0088bb)":"rgba(255, 255, 255, 0.2)"),eo=yr.div($i||($i=Ie(["\n  font-family: monospace;\n  color: white;\n  font-size: 0.9rem;\n  min-width: 120px;\n"]))),to=yr.div(Qi||(Qi=Ie(["\n  width: 1px;\n  height: 24px;\n  background: #444;\n"]))),no=yr.div(Yi||(Yi=Ie(["\n  color: #666;\n  font-size: 0.8rem;\n  min-width: 60px;\n  text-align: center;\n"]))),ro=e=>{let{tracks:t,clips:n,onAddTrack:r,onDeleteTrack:i}=e;const{timeline:o,setPlaybackState:s,setPlayheadPosition:a,setZoomLevel:l,getPlayheadPosition:c,getTimelineDuration:u,isPlaying:d,getZoomLevel:h}=oi(),f=c(),p=u(),g=d(),m=h(),y=e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))};return(0,Dr.jsxs)(Ji,{children:[(0,Dr.jsxs)(Xi,{children:[(0,Dr.jsx)(Zi,{onClick:()=>{a(Math.max(0,f-10))},children:(0,Dr.jsx)(Fi,{size:16})}),(0,Dr.jsx)(Zi,{$primary:!0,onClick:()=>{s(!g)},children:g?(0,Dr.jsx)(Rr,{size:16}):(0,Dr.jsx)(Er,{size:16})}),(0,Dr.jsx)(Zi,{onClick:()=>{s(!1),a(0)},children:(0,Dr.jsx)(zi,{size:16})}),(0,Dr.jsx)(Zi,{onClick:()=>{a(Math.min(p,f+10))},children:(0,Dr.jsx)(Vi,{size:16})})]}),(0,Dr.jsx)(to,{}),(0,Dr.jsxs)(eo,{children:[y(f)," / ",y(p)]}),(0,Dr.jsx)(to,{}),(0,Dr.jsxs)(Xi,{children:[(0,Dr.jsx)(Zi,{onClick:()=>{l(m/1.2)},children:(0,Dr.jsx)(Bi,{size:16})}),(0,Dr.jsxs)(no,{children:[Math.round(100*m),"%"]}),(0,Dr.jsx)(Zi,{onClick:()=>{l(1.2*m)},children:(0,Dr.jsx)(Hi,{size:16})})]}),(0,Dr.jsx)(to,{}),(0,Dr.jsx)(Xi,{children:(0,Dr.jsx)(Zi,{onClick:()=>null===r||void 0===r?void 0:r(),children:(0,Dr.jsx)(Sr,{size:16})})}),(0,Dr.jsx)("div",{style:{flex:1}}),(0,Dr.jsx)(Zi,{children:(0,Dr.jsx)(qi,{size:16})})]})},io=xr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),oo=xr("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),so=[{id:"all",label:"Todos",icon:"FolderOpen",color:"#00d4ff",accept:"*",extensions:["*"],description:"Todos los tipos de assets"},{id:"video",label:"Videos",icon:"Video",color:"#ff6b6b",accept:"video/*",extensions:["mp4","webm","mov","avi","mkv"],description:"Archivos de video",maxSize:524288e3,supportedFormats:["H.264","H.265","VP9","AV1"]},{id:"audio",label:"Audio",icon:"Music",color:"#4ecdc4",accept:"audio/*",extensions:["mp3","wav","aac","ogg","flac"],description:"Archivos de audio",maxSize:104857600,supportedFormats:["MP3","WAV","AAC","OGG"]},{id:"image",label:"Im\xe1genes",icon:"Image",color:"#45b7d1",accept:"image/*",extensions:["jpg","jpeg","png","gif","webp","svg"],description:"Archivos de imagen",maxSize:52428800,supportedFormats:["JPEG","PNG","GIF","WebP","SVG"]},{id:"text",label:"Texto",icon:"Type",color:"#96ceb4",accept:".txt,.json,.srt,.vtt",extensions:["txt","json","srt","vtt","md"],description:"Archivos de texto y subt\xedtulos",maxSize:10485760,supportedFormats:["TXT","JSON","SRT","VTT","Markdown"]},{id:"font",label:"Fuentes",icon:"FileText",color:"#ffeaa7",accept:".ttf,.otf,.woff,.woff2",extensions:["ttf","otf","woff","woff2"],description:"Archivos de fuentes",maxSize:5242880,supportedFormats:["TTF","OTF","WOFF","WOFF2"]}],ao=xr("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),lo=xr("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),co=xr("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),uo=xr("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),ho=xr("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),fo=xr("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),po=xr("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),go=xr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),mo=xr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),yo=xr("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),vo=xr("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),bo=xr("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),wo=xr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ko=xr("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),xo=xr("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),So=xr("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),_o=xr("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Eo=xr("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Co=xr("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),To=xr("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Io=xr("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),Ao=xr("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]),Ro=xr("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Po=xr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Oo=xr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),No=xr("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Do=xr("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),jo=xr("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Lo=xr("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Mo=xr("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Uo=xr("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Fo=xr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),zo=xr("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Vo=xr("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Bo=xr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ho=xr("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),qo=xr("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Wo=xr("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Ko=xr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Go=["name","size","color","fallback","className"],$o={Video:ao,Music:lo,Image:co,Type:uo,FileText:ho,FolderOpen:fo,Upload:po,Download:go,Trash2:mo,Edit3:yo,Copy:vo,Share2:bo,Play:Er,Pause:Rr,Square:zi,SkipForward:Vi,SkipBack:Fi,Volume2:Or,VolumeX:Pr,Settings:qi,Search:io,Filter:wo,Grid:ko,List:xo,Eye:So,EyeOff:_o,Lock:Eo,Unlock:Co,Plus:Sr,Minus:To,RotateCw:Io,Move:Ao,Maximize2:Nr,Calendar:Ro,Clock:Po,User:Oo,Tag:No,Star:Do,AlertCircle:jo,CheckCircle:Lo,XCircle:Mo,Info:Uo,ChevronDown:Fo,ChevronUp:zo,ChevronLeft:Vo,ChevronRight:Bo,MoreVertical:Ho,MoreHorizontal:qo,Menu:Wo,X:Ko},Qo=e=>{let{name:t,size:n=16,color:r="currentColor",fallback:i="FolderOpen",className:o=""}=e,s=br(e,Go);const a=$o[t]||$o[i]||fo;return(0,Dr.jsx)(a,Te({size:n,color:r,className:o},s))};var Yo,Jo;const Xo=yr.button(Yo||(Yo=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  flex: 1;\n  min-width: 100px;\n  padding: 1rem 1.25rem;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 12px 12px 0 0;\n  color: ",";\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: ",";\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n  backdrop-filter: blur(10px);\n\n  &:hover {\n    background: ",";\n    color: #fff;\n    transform: translateY(-2px);\n    border-color: ",";\n    box-shadow: 0 8px 25px ",";\n  }\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(\n      90deg,\n      transparent,\n      ",",\n      transparent\n    );\n    transition: left 0.6s ease;\n  }\n\n  &:hover:before {\n    left: 100%;\n  }\n\n  .icon {\n    transition: all 0.3s ease;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20px;\n    height: 20px;\n  }\n\n  &:hover .icon {\n    transform: scale(1.15) rotate(5deg);\n    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));\n  }\n\n  .badge {\n    background: ",";\n    color: ",";\n    font-size: 0.75rem;\n    font-weight: 700;\n    padding: 0.25rem 0.5rem;\n    border-radius: 16px;\n    margin-left: auto;\n    min-width: 24px;\n    height: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n    transition: all 0.3s ease;\n  }\n\n  &:hover .badge {\n    transform: scale(1.1);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  }\n\n  /* Ripple effect */\n  &:active {\n    transform: translateY(0);\n  }\n\n  &:active:before {\n    animation: ripple 0.6s ease-out;\n  }\n\n  @keyframes ripple {\n    0% {\n      transform: scale(0);\n      opacity: 1;\n    }\n    100% {\n      transform: scale(4);\n      opacity: 0;\n    }\n  }\n"])),e=>{let{$active:t,$color:n}=e;return t?"linear-gradient(135deg, ".concat(n,"25, ").concat(n,"15)"):"rgba(42, 42, 42, 0.5)"},e=>{let{$active:t,$color:n}=e;return t?n:"rgba(255, 255, 255, 0.1)"},e=>{let{$active:t}=e;return t?"#fff":"#999"},e=>{let{$active:t}=e;return t?"600":"500"},e=>{let{$active:t,$color:n}=e;return t?"linear-gradient(135deg, ".concat(n,"35, ").concat(n,"25)"):"linear-gradient(135deg, ".concat(n,"20, ").concat(n,"10)")},e=>{let{$color:t}=e;return t},e=>{let{$color:t}=e;return"".concat(t,"30")},e=>{let{$color:t}=e;return"".concat(t,"20")},e=>{let{$active:t,$color:n}=e;return t?"#fff":n},e=>{let{$active:t,$color:n}=e;return t?n:"#000"}),Zo=yr.span(Jo||(Jo=Ie(["\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),es=e=>{let{category:t,active:n,onSelect:r,assetCount:i=0,showBadge:o=!0}=e;return(0,Dr.jsxs)(Xo,{$active:n,$color:t.color,onClick:()=>{r(t.id)},title:t.description,children:[(0,Dr.jsx)(Qo,{name:t.icon,size:16,className:"icon",color:n?t.color:"currentColor"}),(0,Dr.jsx)(Zo,{children:t.label}),o&&i>0&&(0,Dr.jsx)("span",{className:"badge",children:i})]})};var ts,ns,rs,is,os,ss,as,ls,cs,us;const ds=yr.div(ts||(ts=Ie(["\n  position: relative;\n  background: #2a2a2a;\n  border-radius: 8px;\n  overflow: hidden;\n  cursor: grab;\n  transition: all 0.3s ease;\n  border: 2px solid transparent;\n  user-select: none;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);\n    border-color: #00d4ff;\n  }\n\n  &.selected {\n    border-color: #00d4ff;\n    box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);\n  }\n\n  &.dragging {\n    opacity: 0.7;\n    transform: rotate(2deg) scale(0.95);\n    cursor: grabbing;\n    z-index: 1000;\n  }\n\n  &:active {\n    cursor: grabbing;\n  }\n"]))),hs=yr.div(ns||(ns=Ie(["\n  position: relative;\n  width: 100%;\n  height: 80px;\n  background: #1a1a1a;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  canvas {\n    width: 100%;\n    height: 100%;\n  }\n"]))),fs=yr.div(rs||(rs=Ie(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n\n  ",":hover & {\n    opacity: 1;\n  }\n"])),ds),ps=yr.button(is||(is=Ie(["\n  background: rgba(0, 212, 255, 0.9);\n  border: none;\n  border-radius: 50%;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: transform 0.2s ease;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n"]))),gs=yr.div(os||(os=Ie(["\n  padding: 0.75rem;\n"]))),ms=yr.div(ss||(ss=Ie(["\n  font-size: 0.75rem;\n  font-weight: 500;\n  color: #fff;\n  margin-bottom: 0.25rem;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),ys=yr.div(as||(as=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.625rem;\n  color: #888;\n"]))),vs=yr.span(ls||(ls=Ie(["\n  background: ",";\n  color: #000;\n  padding: 0.125rem 0.375rem;\n  border-radius: 4px;\n  font-weight: 600;\n  text-transform: uppercase;\n"])),e=>{let{color:t}=e;return t||"#666"}),bs=yr.span(cs||(cs=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n"]))),ws=yr.div(us||(us=Ie(["\n  width: 20px;\n  height: 20px;\n  border: 2px solid #333;\n  border-top: 2px solid #00d4ff;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n"]))),ks=e=>{let{asset:n,onClick:r,onPlay:i,selected:o=!1,dragging:s=!1}=e;const[a,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1);return(0,Dr.jsxs)(ds,{className:"".concat(o?"selected":""," ").concat(d||s?"dragging":""),onClick:e=>{e.stopPropagation(),null===r||void 0===r||r(n)},draggable:!0,onDragStart:e=>{console.log("\ud83c\udfaf Starting drag for asset:",n.name);const t=Te({id:n.id,name:n.name,type:n.type,url:n.url||n.src||n.downloadURL,thumbnail:n.thumbnail||n.thumbnailURL,duration:n.duration||("image"===n.type?5:3),size:n.size,file:n.file},n);e.dataTransfer.setData("application/json",JSON.stringify(t)),e.dataTransfer.effectAllowed="copy",h(!0);const r=new Image;r.src=n.thumbnail||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iOCIgZmlsbD0iIzAwZDRmZiIvPgo8L3N2Zz4K",e.dataTransfer.setDragImage(r,20,20)},onDragEnd:e=>{console.log("\ud83c\udfc1 Drag ended for asset:",n.name),h(!1)},onMouseDown:e=>{0===e.button&&(e.currentTarget.style.cursor="grabbing")},onMouseUp:e=>{e.currentTarget.style.cursor="grab"},style:{cursor:d?"grabbing":"grab",opacity:d?.7:1,transform:d?"rotate(2deg) scale(0.95)":"none"},children:[(0,Dr.jsxs)(hs,{children:[(()=>{if(n.thumbnail)return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)("img",{src:n.thumbnail,alt:n.name,onLoad:()=>l(!1),onError:()=>{u(!0),l(!1)}}),a&&(0,Dr.jsx)(ws,{})]});const e="video"===n.type?"Video":"audio"===n.type?"Music":"image"===n.type?"Image":"text"===n.type?"Type":"FileText";return(0,Dr.jsx)(Qo,{name:e,size:24,color:"#666"})})(),("video"===n.type||"audio"===n.type)&&(0,Dr.jsx)(fs,{children:(0,Dr.jsx)(ps,{onClick:e=>{e.stopPropagation(),null===i||void 0===i||i(n)},children:(0,Dr.jsx)(Qo,{name:"Play",size:14,color:"#000"})})})]}),(0,Dr.jsxs)(gs,{children:[(0,Dr.jsx)(ms,{title:n.name,children:n.name}),(0,Dr.jsxs)(ys,{children:[(0,Dr.jsx)(vs,{color:n.categoryColor,children:n.type}),n.duration&&(0,Dr.jsxs)(bs,{children:[(0,Dr.jsx)(Qo,{name:"Clock",size:10}),(e=>{if(!e)return null;const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))})(n.duration)]}),n.size&&(0,Dr.jsx)("span",{children:(e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(1))," ").concat(["B","KB","MB","GB"][t])})(n.size)})]})]})]})};var xs,Ss,_s,Es,Cs,Ts,Is,As,Rs,Ps,Os,Ns,Ds;const js=yr.div(xs||(xs=Ie(["\n  height: 100%;\n  overflow-y: auto;\n  padding: 1rem;\n"]))),Ls=yr.div(Ss||(Ss=Ie(["\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n  gap: 1rem;\n  margin-bottom: 2rem;\n"]))),Ms=yr.div(_s||(_s=Ie(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  color: #666;\n  text-align: center;\n  padding: 2rem;\n"]))),Us=yr.div(Es||(Es=Ie(["\n  margin-bottom: 1rem;\n  opacity: 0.5;\n"]))),Fs=yr.h3(Cs||(Cs=Ie(["\n  font-size: 1.25rem;\n  margin: 0 0 0.5rem 0;\n  color: #888;\n"]))),zs=yr.p(Ts||(Ts=Ie(["\n  margin: 0;\n  font-size: 0.875rem;\n  line-height: 1.4;\n"]))),Vs=yr.div(Is||(Is=Ie(["\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n  gap: 1rem;\n"]))),Bs=yr.div(As||(As=Ie(["\n  background: #2a2a2a;\n  border-radius: 8px;\n  overflow: hidden;\n  animation: pulse 1.5s ease-in-out infinite;\n\n  @keyframes pulse {\n    0% { opacity: 1; }\n    50% { opacity: 0.5; }\n    100% { opacity: 1; }\n  }\n"]))),Hs=yr.div(Rs||(Rs=Ie(["\n  height: 80px;\n  background: #1a1a1a;\n"]))),qs=yr.div(Ps||(Ps=Ie(["\n  padding: 0.75rem;\n"]))),Ws=yr.div(Os||(Os=Ie(["\n  height: 12px;\n  background: #1a1a1a;\n  border-radius: 4px;\n  margin-bottom: 0.5rem;\n  \n  &.short {\n    width: 60%;\n  }\n"]))),Ks=yr.div(Ns||(Ns=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 1rem 1rem 1rem;\n  font-size: 0.875rem;\n  color: #888;\n  border-bottom: 1px solid #333;\n  margin-bottom: 1rem;\n"]))),Gs=yr.span(Ds||(Ds=Ie(["\n  color: #00d4ff;\n  font-weight: 600;\n"]))),$s=e=>{let{assets:t=[],onAssetClick:n,onAssetPlay:r,selectedAssets:i=[],loading:o=!1,searchQuery:s="",activeCategory:a="all",emptyStateConfig:l={}}=e;return o?(0,Dr.jsx)(js,{children:(0,Dr.jsx)(Vs,{children:Array.from({length:8}).map((e,t)=>(0,Dr.jsxs)(Bs,{children:[(0,Dr.jsx)(Hs,{}),(0,Dr.jsxs)(qs,{children:[(0,Dr.jsx)(Ws,{}),(0,Dr.jsx)(Ws,{className:"short"})]})]},t))})}):(0,Dr.jsxs)(js,{children:[t.length>0&&(0,Dr.jsxs)(Ks,{children:[(0,Dr.jsxs)(Gs,{children:[t.length," asset",1!==t.length?"s":"",s&&' para "'.concat(s,'"')]}),i.length>0&&(0,Dr.jsxs)("span",{children:[i.length," seleccionado",1!==i.length?"s":""]})]}),0===t.length?(()=>{const e=(()=>{if(s)return{icon:"Search",title:"No se encontraron resultados",description:'No hay assets que coincidan con "'.concat(s,'"')};if("all"!==a)return{icon:"FolderOpen",title:"No hay ".concat({video:"videos",audio:"archivos de audio",image:"im\xe1genes",text:"archivos de texto",font:"fuentes"}[a]||"assets"),description:"Arrastra y suelta archivos aqu\xed o usa el bot\xf3n de subida"};return Te({icon:"Upload",title:"No hay assets",description:"Comienza subiendo algunos archivos para tu proyecto"},l)})();return(0,Dr.jsxs)(Ms,{children:[(0,Dr.jsx)(Us,{children:(0,Dr.jsx)(Qo,{name:e.icon,size:48})}),(0,Dr.jsx)(Fs,{children:e.title}),(0,Dr.jsx)(zs,{children:e.description})]})})():(0,Dr.jsx)(Ls,{children:t.map(e=>{return(0,Dr.jsx)(ks,{asset:e,onClick:n,onPlay:r,selected:(t=e.id,i.includes(t))},e.id);var t})})]})};const Qs=new class{constructor(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.audioContext=null,this.cache=new Map}async generateThumbnail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n=150,height:r=100,quality:i=.8,format:o="image/jpeg"}=t,s="".concat(e.name,"-").concat(e.size,"-").concat(n,"x").concat(r);if(this.cache.has(s))return this.cache.get(s);let a;try{switch(e.type.split("/")[0]){case"video":a=await this.generateVideoThumbnail(e,{width:n,height:r,quality:i,format:o});break;case"image":a=await this.generateImageThumbnail(e,{width:n,height:r,quality:i,format:o});break;case"audio":a=await this.generateAudioThumbnail(e,{width:n,height:r,quality:i,format:o});break;default:a=e.name.match(/\.(ttf|otf|woff|woff2)$/i)?await this.generateFontThumbnail(e,{width:n,height:r,quality:i,format:o}):await this.generateGenericThumbnail(e,{width:n,height:r,quality:i,format:o})}return this.cache.set(s,a),a}catch(l){return console.error("Thumbnail generation failed:",l),this.generateErrorThumbnail({width:n,height:r,format:o})}}async generateVideoThumbnail(e,t){return new Promise((n,r)=>{const i=document.createElement("video"),o=document.createElement("canvas"),s=o.getContext("2d");i.addEventListener("loadedmetadata",()=>{o.width=t.width,o.height=t.height,i.currentTime=.1*i.duration}),i.addEventListener("seeked",()=>{try{const e=i.videoWidth/i.videoHeight;let r=t.width,a=t.height,l=0,c=0;e>t.width/t.height?(a=t.width/e,c=(t.height-a)/2):(r=t.height*e,l=(t.width-r)/2),s.fillStyle="#000000",s.fillRect(0,0,t.width,t.height),s.drawImage(i,l,c,r,a),this.addPlayIconOverlay(s,t.width,t.height),this.addDurationOverlay(s,i.duration,t.width,t.height);const u=o.toDataURL(t.format,t.quality);n({url:u,width:t.width,height:t.height,duration:i.duration,type:"video"})}catch(e){r(e)}}),i.addEventListener("error",r),i.src=URL.createObjectURL(e)})}async generateImageThumbnail(e,t){return new Promise((n,r)=>{const i=new Image,o=document.createElement("canvas"),s=o.getContext("2d");i.onload=()=>{try{o.width=t.width,o.height=t.height;const e=i.width/i.height;let r=t.width,a=t.height,l=0,c=0;e>t.width/t.height?(a=t.width/e,c=(t.height-a)/2):(r=t.height*e,l=(t.width-r)/2),s.fillStyle="#f0f0f0",s.fillRect(0,0,t.width,t.height),s.drawImage(i,l,c,r,a),this.addImageInfoOverlay(s,i.width,i.height,t.width,t.height);const u=o.toDataURL(t.format,t.quality);n({url:u,width:t.width,height:t.height,originalWidth:i.width,originalHeight:i.height,type:"image"})}catch(e){r(e)}},i.onerror=r,i.src=URL.createObjectURL(e)})}async generateAudioThumbnail(e,t){try{this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext));const n=await e.arrayBuffer(),r=await this.audioContext.decodeAudioData(n),i=document.createElement("canvas"),o=i.getContext("2d");i.width=t.width,i.height=t.height,this.drawWaveform(o,r,t.width,t.height),this.addAudioInfoOverlay(o,r.duration,t.width,t.height);return{url:i.toDataURL(t.format,t.quality),width:t.width,height:t.height,duration:r.duration,sampleRate:r.sampleRate,channels:r.numberOfChannels,type:"audio"}}catch(n){return console.error("Audio thumbnail generation failed:",n),this.generateGenericThumbnail(e,t)}}async generateFontThumbnail(e,t){try{const n=new FontFace("PreviewFont","url(".concat(URL.createObjectURL(e),")"));await n.load(),document.fonts.add(n);const r=document.createElement("canvas"),i=r.getContext("2d");r.width=t.width,r.height=t.height,i.fillStyle="#ffffff",i.fillRect(0,0,t.width,t.height);const o="Abc 123",s=Math.min(t.width/4,t.height/2);i.fillStyle="#333333",i.font="".concat(s,"px PreviewFont, sans-serif"),i.textAlign="center",i.textBaseline="middle",i.fillText(o,t.width/2,t.height/2),i.fillStyle="#666666",i.font="".concat(s/4,"px Arial, sans-serif"),i.fillText(e.name.replace(/\.[^/.]+$/,""),t.width/2,t.height-10);const a=r.toDataURL(t.format,t.quality);return document.fonts.delete(n),{url:a,width:t.width,height:t.height,fontName:e.name,type:"font"}}catch(n){return console.error("Font thumbnail generation failed:",n),this.generateGenericThumbnail(e,t)}}async generateGenericThumbnail(e,t){const n=document.createElement("canvas"),r=n.getContext("2d");n.width=t.width,n.height=t.height,r.fillStyle="#2a2a2a",r.fillRect(0,0,t.width,t.height);const i=Math.min(t.width,t.height)/3;r.fillStyle="#666666",r.fillRect((t.width-i)/2,(t.height-i)/2-10,i,i);const o=e.name.split(".").pop().toUpperCase();r.fillStyle="#ffffff",r.font="".concat(i/4,"px Arial, sans-serif"),r.textAlign="center",r.textBaseline="middle",r.fillText(o,t.width/2,t.height/2),r.fillStyle="#cccccc",r.font="".concat(i/6,"px Arial, sans-serif");const s=e.name.length>20?e.name.substring(0,17)+"...":e.name;r.fillText(s,t.width/2,t.height-10);return{url:n.toDataURL(t.format,t.quality),width:t.width,height:t.height,fileName:e.name,type:"generic"}}generateErrorThumbnail(e){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.fillStyle="#ff6b6b",n.fillRect(0,0,e.width,e.height),n.fillStyle="#ffffff",n.font="".concat(Math.min(e.width,e.height)/3,"px Arial, sans-serif"),n.textAlign="center",n.textBaseline="middle",n.fillText("\u2715",e.width/2,e.height/2),n.font="".concat(Math.min(e.width,e.height)/8,"px Arial, sans-serif"),n.fillText("Error",e.width/2,e.height/2+20),{url:t.toDataURL(e.format,.8),width:e.width,height:e.height,type:"error"}}drawWaveform(e,t,n,r){const i=t.getChannelData(0),o=Math.ceil(i.length/n),s=r/2;e.fillStyle="#1a1a1a",e.fillRect(0,0,n,r),e.strokeStyle="#00d4ff",e.lineWidth=1,e.beginPath();for(let a=0;a<n;a++){let t=1,n=-1;for(let e=0;e<o;e++){const r=i[a*o+e];r<t&&(t=r),r>n&&(n=r)}e.moveTo(a,(1+t)*s),e.lineTo(a,(1+n)*s)}e.stroke()}addPlayIconOverlay(e,t,n){const r=t/2,i=n/2,o=Math.min(t,n)/8;e.fillStyle="rgba(0, 0, 0, 0.6)",e.beginPath(),e.arc(r,i,o,0,2*Math.PI),e.fill(),e.fillStyle="rgba(255, 255, 255, 0.9)",e.beginPath(),e.moveTo(r-o/3,i-o/2),e.lineTo(r-o/3,i+o/2),e.lineTo(r+o/2,i),e.closePath(),e.fill()}addDurationOverlay(e,t,n,r){const i=Math.floor(t/60),o=Math.floor(t%60),s="".concat(i,":").concat(o.toString().padStart(2,"0"));e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(n-45,r-20,40,15),e.fillStyle="white",e.font="10px Arial, sans-serif",e.textAlign="center",e.fillText(s,n-25,r-10)}addImageInfoOverlay(e,t,n,r,i){const o="".concat(t,"\xd7").concat(n);e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(5,i-20,60,15),e.fillStyle="white",e.font="9px Arial, sans-serif",e.textAlign="left",e.fillText(o,8,i-10)}addAudioInfoOverlay(e,t,n,r){e.fillStyle="rgba(255, 255, 255, 0.8)",e.font="".concat(Math.min(n,r)/6,"px Arial, sans-serif"),e.textAlign="center",e.textBaseline="middle",e.fillText("\u266a",n/2,r/4);const i=Math.floor(t/60),o=Math.floor(t%60),s="".concat(i,":").concat(o.toString().padStart(2,"0"));e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(n-45,r-20,40,15),e.fillStyle="white",e.font="10px Arial, sans-serif",e.textAlign="center",e.fillText(s,n-25,r-10)}clearCache(){this.cache.clear()}getCacheSize(){return this.cache.size}};var Ys,Js,Xs,Zs,ea,ta,na,ra,ia,oa,sa,aa;const la=yr.div(Ys||(Ys=Ie(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: linear-gradient(180deg, #1a1a1a 0%, #1e1e1e 100%);\n  border-right: 1px solid #333;\n"]))),ca=yr.div(Js||(Js=Ie(["\n  padding: 1.25rem;\n  border-bottom: 1px solid #333;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"]))),ua=yr.h3(Xs||(Xs=Ie(["\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 700;\n  color: white;\n  background: linear-gradient(135deg, #00d4ff, #0ea5e9);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n"]))),da=yr.div(Zs||(Zs=Ie(["\n  position: relative;\n  display: flex;\n  align-items: center;\n"]))),ha=yr.input(ea||(ea=Ie(["\n  width: 100%;\n  padding: 0.75rem 2.5rem 0.75rem 1rem;\n  background: #2a2a2a;\n  border: 1px solid #444;\n  border-radius: 8px;\n  color: white;\n  font-size: 0.875rem;\n  transition: all 0.3s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: #00d4ff;\n    box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);\n  }\n  \n  &::placeholder {\n    color: #666;\n  }\n"]))),fa=yr(io)(ta||(ta=Ie(["\n  position: absolute;\n  right: 0.75rem;\n  color: #666;\n  cursor: pointer;\n  transition: color 0.2s ease;\n  \n  &:hover {\n    color: #00d4ff;\n  }\n"]))),pa=yr.div(na||(na=Ie(["\n  padding: 1.5rem;\n  border: 2px dashed #444;\n  border-radius: 12px;\n  text-align: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  background: rgba(42, 42, 42, 0.3);\n  \n  &:hover {\n    border-color: #00d4ff;\n    background: rgba(0, 212, 255, 0.05);\n    transform: translateY(-1px);\n  }\n  \n  &.dragover {\n    border-color: #00d4ff;\n    background: rgba(0, 212, 255, 0.1);\n    box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);\n  }\n"]))),ga=yr.div(ra||(ra=Ie(["\n  margin-bottom: 0.75rem;\n  color: #666;\n  transition: color 0.3s ease;\n  \n  ",":hover & {\n    color: #00d4ff;\n  }\n"])),pa),ma=yr.div(ia||(ia=Ie(["\n  color: #888;\n  font-size: 0.875rem;\n  font-weight: 500;\n  \n  .highlight {\n    color: #00d4ff;\n    font-weight: 600;\n  }\n"]))),ya=yr.button(oa||(oa=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.875rem 1.25rem;\n  background: linear-gradient(135deg, #6b46c1, #8b5cf6);\n  border: none;\n  border-radius: 8px;\n  color: white;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  width: 100%;\n  justify-content: center;\n  \n  &:hover {\n    background: linear-gradient(135deg, #7c3aed, #a855f7);\n    transform: translateY(-1px);\n    box-shadow: 0 6px 20px rgba(139, 92, 246, 0.3);\n  }\n  \n  &:active {\n    transform: translateY(0);\n  }\n"]))),va=yr.div(sa||(sa=Ie(["\n  display: flex;\n  gap: 0.25rem;\n  padding: 0.75rem 1rem 0 1rem;\n  background: rgba(26, 26, 26, 0.95);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n  overflow-x: auto;\n  overflow-y: hidden;\n  scrollbar-width: none;\n  position: relative;\n  \n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  /* Scroll shadows */\n  &:before,\n  &:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    width: 20px;\n    pointer-events: none;\n    z-index: 2;\n    transition: opacity 0.3s ease;\n  }\n\n  &:before {\n    left: 0;\n    background: linear-gradient(90deg, rgba(26, 26, 26, 1), transparent);\n  }\n\n  &:after {\n    right: 0;\n    background: linear-gradient(270deg, rgba(26, 26, 26, 1), transparent);\n  }\n\n  /* Smooth scrollbar track */\n  &:hover {\n    scrollbar-width: thin;\n    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;\n  }\n\n  &::-webkit-scrollbar:hover {\n    height: 4px;\n  }\n\n  &::-webkit-scrollbar-track:hover {\n    background: rgba(255, 255, 255, 0.05);\n    border-radius: 2px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: rgba(255, 255, 255, 0.2);\n    border-radius: 2px;\n  }\n"]))),ba=yr.input(aa||(aa=Ie(["\n  display: none;\n"]))),wa=e=>{let{onAssetUpload:n,onAssetSelect:r,onAssetPlay:i,onOpenMergeFields:o,assets:s=[],selectedAssets:a=[],loading:l=!1}=e;const[c,u]=(0,t.useState)("all"),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(!1),g=(0,t.useRef)(null),[m,y]=(0,t.useState)(!1),{generateThumbnail:v}=(()=>{const[e,n]=(0,t.useState)(new Map),[r,i]=(0,t.useState)(new Set),o=(0,t.useCallback)(async function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="".concat(t.name,"-").concat(t.size);if(e.has(s))return e.get(s);if(r.has(s))return null;i(e=>new Set(e).add(s));try{const e=await Qs.generateThumbnail(t,o);return n(t=>new Map(t).set(s,e)),i(e=>{const t=new Set(e);return t.delete(s),t}),e}catch(a){return console.error("Thumbnail generation failed:",a),i(e=>{const t=new Set(e);return t.delete(s),t}),null}},[e,r]),s=(0,t.useCallback)(e=>{const t="".concat(e.name,"-").concat(e.size);return r.has(t)},[r]);return{generateThumbnail:o,getThumbnail:(0,t.useCallback)(t=>{const n="".concat(t.name,"-").concat(t.size);return e.get(n)},[e]),isGenerating:s,clearCache:()=>{Qs.clearCache(),n(new Map)}}})(),b=e=>{const t=e.type.split("/")[0];return["video","audio","image"].includes(t)?t:e.name.match(/\.(ttf|otf|woff|woff2)$/i)?"font":e.name.match(/\.(txt|json|srt|vtt|md)$/i)?"text":"document"},w=e=>{const t=so.find(t=>t.id===e);return(null===t||void 0===t?void 0:t.color)||"#666"},k=(0,t.useCallback)(async e=>{const t=Array.from(e);try{y(!0);const e=await Promise.all(t.map(async e=>{const t=b(e),n={id:Date.now()+Math.random(),name:e.name,type:t,file:e,size:e.size,uploadedAt:(new Date).toISOString(),categoryColor:w(t),url:URL.createObjectURL(e),src:URL.createObjectURL(e),downloadURL:URL.createObjectURL(e)};try{const t=await v(e,{width:150,height:100,quality:.8});n.thumbnail=t.url,n.thumbnailURL=t.url}catch(r){console.warn("Thumbnail generation failed for",e.name,r)}return n}));console.log("\u2705 Processed assets:",e),n&&await n(e)}catch(r){console.error("\u274c Error processing files:",r)}finally{y(!1)}},[n,v,b,w]),x=(0,t.useCallback)(e=>{e.preventDefault(),p(!0)},[]),S=(0,t.useCallback)(e=>{e.preventDefault(),p(!1)},[]),_=(0,t.useCallback)(e=>{e.preventDefault(),p(!1);const t=e.dataTransfer.files;t.length>0&&k(t)},[k]),E=(0,t.useCallback)(()=>{var e;null===(e=g.current)||void 0===e||e.click()},[]),C=(0,t.useCallback)(e=>{const t=e.target.files;t&&t.length>0&&k(t),e.target.value=""},[k]),T=s.filter(e=>{const t="all"===c||e.type===c,n=!d||e.name.toLowerCase().includes(d.toLowerCase());return t&&n});return(0,Dr.jsxs)(la,{children:[(0,Dr.jsxs)(ca,{children:[(0,Dr.jsx)(ua,{children:"Asset Library"}),(0,Dr.jsxs)(da,{children:[(0,Dr.jsx)(ha,{type:"text",placeholder:"Buscar assets...",value:d,onChange:e=>h(e.target.value)}),(0,Dr.jsx)(fa,{size:16})]}),(0,Dr.jsxs)(ya,{onClick:o,children:[(0,Dr.jsx)(oo,{size:16}),"Merge Fields"]}),(0,Dr.jsxs)(pa,{className:f?"dragover":"",onDragOver:x,onDragLeave:S,onDrop:_,onClick:E,children:[(0,Dr.jsx)(ga,{children:(0,Dr.jsx)(Qo,{name:"Upload",size:28})}),(0,Dr.jsxs)(ma,{children:[(0,Dr.jsx)("span",{className:"highlight",children:"Arrastra y suelta"})," archivos o ",(0,Dr.jsx)("span",{className:"highlight",children:"haz clic"})," para subir"]})]}),(0,Dr.jsx)(ba,{ref:g,type:"file",multiple:!0,accept:so.filter(e=>"all"!==e.id).map(e=>e.accept).join(","),onChange:C})]}),(0,Dr.jsx)(va,{children:so.map(e=>{return(0,Dr.jsx)(es,{category:e,active:c===e.id,onSelect:u,assetCount:(t=e.id,"all"===t?s.length:s.filter(e=>e.type===t).length),showBadge:!0},e.id);var t})}),(0,Dr.jsx)($s,{assets:T,onAssetClick:r,onAssetPlay:i,selectedAssets:a,loading:l,searchQuery:d,activeCategory:c,emptyStateConfig:{title:"Tu biblioteca est\xe1 vac\xeda",description:"Comienza subiendo videos, im\xe1genes, audio o texto para crear contenido incre\xedble"}})]})},ka=xr("Sliders",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);var xa,Sa,_a,Ea,Ca,Ta,Ia,Aa,Ra,Pa,Oa,Na,Da,ja,La,Ma;const Ua=yr.div(xa||(xa=Ie(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: #1a1a1a;\n"]))),Fa=yr.div(Sa||(Sa=Ie(["\n  padding: 1rem;\n  border-bottom: 1px solid #333;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),za=yr.h3(_a||(_a=Ie(["\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: white;\n"]))),Va=yr.div(Ea||(Ea=Ie(["\n  display: flex;\n  border-bottom: 1px solid #333;\n"]))),Ba=yr.button(Ca||(Ca=Ie(["\n  flex: 1;\n  padding: 0.75rem 0.5rem;\n  background: ",";\n  border: none;\n  border-bottom: 2px solid ",";\n  color: ",";\n  font-size: 0.8rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.25rem;\n  \n  &:hover {\n    background: #2a2a2a;\n    color: white;\n  }\n"])),e=>e.$active?"#2a2a2a":"transparent",e=>e.$active?"#00d4ff":"transparent",e=>e.$active?"white":"#666"),Ha=yr.div(Ta||(Ta=Ie(["\n  flex: 1;\n  overflow-y: auto;\n  padding: 1rem;\n"]))),qa=yr.div(Ia||(Ia=Ie(["\n  margin-bottom: 1.5rem;\n"]))),Wa=yr.h4(Aa||(Aa=Ie(["\n  margin: 0 0 0.75rem 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #ccc;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n"]))),Ka=yr.div(Ra||(Ra=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 0.75rem;\n"]))),Ga=yr.label(Pa||(Pa=Ie(["\n  font-size: 0.8rem;\n  color: #999;\n  flex: 1;\n"]))),$a=yr.div(Oa||(Oa=Ie(["\n  flex: 1;\n  margin-left: 0.5rem;\n"]))),Qa=yr.input(Na||(Na=Ie(["\n  width: 100%;\n  height: 4px;\n  background: #333;\n  border-radius: 2px;\n  outline: none;\n  -webkit-appearance: none;\n  \n  &::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    width: 16px;\n    height: 16px;\n    background: #00d4ff;\n    border-radius: 50%;\n    cursor: pointer;\n  }\n  \n  &::-moz-range-thumb {\n    width: 16px;\n    height: 16px;\n    background: #00d4ff;\n    border-radius: 50%;\n    cursor: pointer;\n    border: none;\n  }\n"]))),Ya=yr.input(Da||(Da=Ie(["\n  width: 100%;\n  padding: 0.4rem;\n  background: #2a2a2a;\n  border: 1px solid #444;\n  border-radius: 4px;\n  color: white;\n  font-size: 0.8rem;\n  \n  &:focus {\n    outline: none;\n    border-color: #00d4ff;\n  }\n"]))),Ja=yr.button(ja||(ja=Ie(["\n  width: 32px;\n  height: 20px;\n  background: ",";\n  border: none;\n  border-radius: 10px;\n  position: relative;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &::after {\n    content: '';\n    position: absolute;\n    top: 2px;\n    left: ",";\n    width: 16px;\n    height: 16px;\n    background: white;\n    border-radius: 50%;\n    transition: all 0.2s ease;\n  }\n"])),e=>e.active?"#00d4ff":"#444",e=>e.active?"14px":"2px"),Xa=yr.input(La||(La=Ie(["\n  width: 40px;\n  height: 24px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  background: transparent;\n"]))),Za=yr.div(Ma||(Ma=Ie(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  color: #666;\n  text-align: center;\n  gap: 0.5rem;\n"]))),el=e=>{let{selectedClips:n,selectedTracks:r,onClipUpdate:i,onTrackUpdate:o,project:s,onProjectUpdate:a}=e;const[l,c]=(0,t.useState)("properties"),u=[{id:"properties",label:"Properties",icon:qi},{id:"transform",label:"Transform",icon:Ao},{id:"effects",label:"Effects",icon:ka}],d=()=>{if(n&&n.length>0){const e=n[0];return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)(qa,{children:[(0,Dr.jsx)(Wa,{children:"Clip Properties"}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Opacity"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Qa,{type:"range",min:"0",max:"1",step:"0.01",value:e.opacity||1,onChange:t=>null===i||void 0===i?void 0:i(e.id,{opacity:parseFloat(t.target.value)})})})]}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Volume"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Qa,{type:"range",min:"0",max:"2",step:"0.01",value:e.volume||1,onChange:t=>null===i||void 0===i?void 0:i(e.id,{volume:parseFloat(t.target.value)})})})]}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Muted"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Ja,{active:e.muted,onClick:()=>null===i||void 0===i?void 0:i(e.id,{muted:!e.muted})})})]})]}),(0,Dr.jsxs)(qa,{children:[(0,Dr.jsx)(Wa,{children:"Timing"}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Start"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Ya,{type:"number",step:"0.1",value:e.start||0,onChange:t=>null===i||void 0===i?void 0:i(e.id,{start:parseFloat(t.target.value)})})})]}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Duration"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Ya,{type:"number",step:"0.1",value:e.duration||3,onChange:t=>null===i||void 0===i?void 0:i(e.id,{duration:parseFloat(t.target.value)})})})]})]})]})}if(r&&r.length>0){const e=r[0];return(0,Dr.jsx)(Dr.Fragment,{children:(0,Dr.jsxs)(qa,{children:[(0,Dr.jsx)(Wa,{children:"Track Properties"}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Name"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Ya,{type:"text",value:e.name||"",onChange:t=>null===o||void 0===o?void 0:o(e.id,{name:t.target.value})})})]}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Color"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Xa,{type:"color",value:e.color||"#00d4ff",onChange:t=>null===o||void 0===o?void 0:o(e.id,{color:t.target.value})})})]}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Enabled"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Ja,{active:e.enabled,onClick:()=>null===o||void 0===o?void 0:o(e.id,{enabled:!e.enabled})})})]}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Locked"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Ja,{active:e.locked,onClick:()=>null===o||void 0===o?void 0:o(e.id,{locked:!e.locked})})})]})]})})}var e,t,l,c,u,d;return s?(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)(qa,{children:[(0,Dr.jsx)(Wa,{children:"Project Settings"}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Name"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Ya,{type:"text",value:s.name||"",onChange:e=>null===a||void 0===a?void 0:a(Te(Te({},s),{},{name:e.target.value}))})})]}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Duration"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Ya,{type:"number",step:"0.1",value:(null===(e=s.settings)||void 0===e?void 0:e.duration)||30,onChange:e=>null===a||void 0===a?void 0:a(Te(Te({},s),{},{settings:Te(Te({},s.settings),{},{duration:parseFloat(e.target.value)})}))})})]}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"FPS"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Ya,{type:"number",value:(null===(t=s.settings)||void 0===t?void 0:t.fps)||30,onChange:e=>null===a||void 0===a?void 0:a(Te(Te({},s),{},{settings:Te(Te({},s.settings),{},{fps:parseInt(e.target.value)})}))})})]})]}),(0,Dr.jsxs)(qa,{children:[(0,Dr.jsx)(Wa,{children:"Resolution"}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Width"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Ya,{type:"number",value:(null===(l=s.settings)||void 0===l||null===(c=l.resolution)||void 0===c?void 0:c.width)||1920,onChange:e=>{var t;return null===a||void 0===a?void 0:a(Te(Te({},s),{},{settings:Te(Te({},s.settings),{},{resolution:Te(Te({},null===(t=s.settings)||void 0===t?void 0:t.resolution),{},{width:parseInt(e.target.value)})})}))}})})]}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Height"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Ya,{type:"number",value:(null===(u=s.settings)||void 0===u||null===(d=u.resolution)||void 0===d?void 0:d.height)||1080,onChange:e=>{var t;return null===a||void 0===a?void 0:a(Te(Te({},s),{},{settings:Te(Te({},s.settings),{},{resolution:Te(Te({},null===(t=s.settings)||void 0===t?void 0:t.resolution),{},{height:parseInt(e.target.value)})})}))}})})]})]})]}):(0,Dr.jsxs)(Za,{children:[(0,Dr.jsx)(qi,{size:32,color:"#666"}),(0,Dr.jsx)("div",{children:"No Selection"}),(0,Dr.jsx)("div",{style:{fontSize:"0.8rem",color:"#555"},children:"Select clips, tracks, or project to edit properties"})]})};return(0,Dr.jsxs)(Ua,{children:[(0,Dr.jsx)(Fa,{children:(0,Dr.jsx)(za,{children:"Inspector"})}),(0,Dr.jsx)(Va,{children:u.map(e=>(0,Dr.jsxs)(Ba,{$active:l===e.id,onClick:()=>c(e.id),children:[(0,Dr.jsx)(e.icon,{size:14}),e.label]},e.id))}),(0,Dr.jsx)(Ha,{children:(()=>{switch(l){case"properties":default:return d();case"transform":return(()=>{if(n&&n.length>0){var e,t,r,o;const s=n[0];return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)(qa,{children:[(0,Dr.jsx)(Wa,{children:"Position"}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"X"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Ya,{type:"number",value:(null===(e=s.position)||void 0===e?void 0:e.x)||0,onChange:e=>null===i||void 0===i?void 0:i(s.id,{position:Te(Te({},s.position),{},{x:parseFloat(e.target.value)})})})})]}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Y"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Ya,{type:"number",value:(null===(t=s.position)||void 0===t?void 0:t.y)||0,onChange:e=>null===i||void 0===i?void 0:i(s.id,{position:Te(Te({},s.position),{},{y:parseFloat(e.target.value)})})})})]})]}),(0,Dr.jsxs)(qa,{children:[(0,Dr.jsx)(Wa,{children:"Scale"}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Scale X"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Qa,{type:"range",min:"0.1",max:"3",step:"0.01",value:(null===(r=s.scale)||void 0===r?void 0:r.x)||1,onChange:e=>null===i||void 0===i?void 0:i(s.id,{scale:Te(Te({},s.scale),{},{x:parseFloat(e.target.value)})})})})]}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Scale Y"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Qa,{type:"range",min:"0.1",max:"3",step:"0.01",value:(null===(o=s.scale)||void 0===o?void 0:o.y)||1,onChange:e=>null===i||void 0===i?void 0:i(s.id,{scale:Te(Te({},s.scale),{},{y:parseFloat(e.target.value)})})})})]})]}),(0,Dr.jsxs)(qa,{children:[(0,Dr.jsx)(Wa,{children:"Rotation"}),(0,Dr.jsxs)(Ka,{children:[(0,Dr.jsx)(Ga,{children:"Angle"}),(0,Dr.jsx)($a,{children:(0,Dr.jsx)(Qa,{type:"range",min:"0",max:"360",step:"1",value:s.rotation||0,onChange:e=>null===i||void 0===i?void 0:i(s.id,{rotation:parseFloat(e.target.value)})})})]})]})]})}return(0,Dr.jsxs)(Za,{children:[(0,Dr.jsx)(Ao,{size:32,color:"#666"}),(0,Dr.jsx)("div",{children:"No Clip Selected"}),(0,Dr.jsx)("div",{style:{fontSize:"0.8rem",color:"#555"},children:"Select a clip to adjust transform properties"})]})})();case"effects":return(0,Dr.jsxs)(Za,{children:[(0,Dr.jsx)(ka,{size:32,color:"#666"}),(0,Dr.jsx)("div",{children:"Effects Coming Soon"}),(0,Dr.jsx)("div",{style:{fontSize:"0.8rem",color:"#555"},children:"Effects and filters will be available in the next update"})]})}})()})]})},tl=xr("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var nl,rl,il,ol,sl,al,ll,cl,ul,dl,hl,fl,pl,gl,ml,yl,vl,bl,wl,kl,xl,Sl;const _l=yr.div(nl||(nl=Ie(["\n  position: fixed;\n  top: 0;\n  right: 0;\n  width: 400px;\n  height: 100vh;\n  background: #1a1a1a;\n  border-left: 1px solid #333;\n  display: flex;\n  flex-direction: column;\n  z-index: 1000;\n  transform: translateX(",");\n  transition: transform 0.3s ease;\n"])),e=>e.$isOpen?"0":"100%"),El=yr.div(rl||(rl=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem;\n  border-bottom: 1px solid #333;\n  background: linear-gradient(90deg, #2a2a2a 0%, #1a1a1a 100%);\n"]))),Cl=yr.h3(il||(il=Ie(["\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),Tl=yr.button(ol||(ol=Ie(["\n  background: none;\n  border: none;\n  color: #666;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 4px;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n    color: white;\n  }\n"]))),Il=yr.div(sl||(sl=Ie(["\n  display: flex;\n  border-bottom: 1px solid #333;\n"]))),Al=yr.button(al||(al=Ie(["\n  flex: 1;\n  padding: 0.75rem 0.5rem;\n  background: ",";\n  border: none;\n  border-bottom: 2px solid ",";\n  color: ",";\n  font-size: 0.8rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.25rem;\n  \n  &:hover {\n    background: #2a2a2a;\n    color: white;\n  }\n"])),e=>e.$active?"#2a2a2a":"transparent",e=>e.$active?"#00d4ff":"transparent",e=>e.$active?"white":"#666"),Rl=yr.div(ll||(ll=Ie(["\n  flex: 1;\n  overflow-y: auto;\n  padding: 1rem;\n"]))),Pl=yr.div(cl||(cl=Ie(["\n  display: flex;\n  gap: 0.5rem;\n  margin-bottom: 0.75rem;\n  align-items: center;\n"]))),Ol=yr.input(ul||(ul=Ie(["\n  flex: 1;\n  padding: 0.5rem;\n  background: #2a2a2a;\n  border: 1px solid #444;\n  border-radius: 4px;\n  color: white;\n  font-size: 0.8rem;\n  font-family: monospace;\n  \n  &:focus {\n    outline: none;\n    border-color: #00d4ff;\n  }\n  \n  &::placeholder {\n    color: #666;\n  }\n"]))),Nl=yr.input(dl||(dl=Ie(["\n  flex: 1.5;\n  padding: 0.5rem;\n  background: #2a2a2a;\n  border: 1px solid #444;\n  border-radius: 4px;\n  color: white;\n  font-size: 0.8rem;\n  \n  &:focus {\n    outline: none;\n    border-color: #00d4ff;\n  }\n  \n  &::placeholder {\n    color: #666;\n  }\n"]))),Dl=yr.button(hl||(hl=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  color: ",";\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: ",";\n    transform: translateY(-1px);\n  }\n"])),e=>e.$danger?"rgba(255, 107, 107, 0.1)":e.$success?"rgba(0, 255, 136, 0.1)":"rgba(255, 255, 255, 0.1)",e=>e.$danger?"#ff6b6b":e.$success?"#00ff88":"#444",e=>e.$danger?"#ff6b6b":e.$success?"#00ff88":"#ccc",e=>e.$danger?"rgba(255, 107, 107, 0.2)":e.$success?"rgba(0, 255, 136, 0.2)":"rgba(255, 255, 255, 0.2)"),jl=yr.div(fl||(fl=Ie(["\n  margin-bottom: 1.5rem;\n"]))),Ll=yr.div(pl||(pl=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 0.75rem;\n"]))),Ml=yr.h4(gl||(gl=Ie(["\n  margin: 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #ccc;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n"]))),Ul=yr.button(ml||(ml=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background: linear-gradient(45deg, #00d4ff, #0099cc);\n  border: none;\n  border-radius: 6px;\n  color: white;\n  font-size: 0.8rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  width: 100%;\n  justify-content: center;\n  margin-bottom: 1rem;\n  \n  &:hover {\n    background: linear-gradient(45deg, #00b8e6, #0088bb);\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);\n  }\n"]))),Fl=yr.div(yl||(yl=Ie(["\n  background: #2a2a2a;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n"]))),zl=yr.h5(vl||(vl=Ie(["\n  margin: 0 0 0.5rem 0;\n  font-size: 0.8rem;\n  color: #ccc;\n  text-transform: uppercase;\n"]))),Vl=yr.div(bl||(bl=Ie(["\n  background: #1a1a1a;\n  border-radius: 4px;\n  padding: 0.75rem;\n  font-family: monospace;\n  font-size: 0.75rem;\n  color: #00d4ff;\n  white-space: pre-wrap;\n  max-height: 150px;\n  overflow-y: auto;\n"]))),Bl=yr.div(wl||(wl=Ie(["\n  background: rgba(0, 212, 255, 0.1);\n  border: 1px solid rgba(0, 212, 255, 0.3);\n  border-radius: 6px;\n  padding: 0.75rem;\n  margin-bottom: 1rem;\n  font-size: 0.8rem;\n  color: #ccc;\n  line-height: 1.4;\n"]))),Hl=yr.div(kl||(kl=Ie(["\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 1rem;\n"]))),ql=yr.button(xl||(xl=Ie(["\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  padding: 0.75rem;\n  background: ",";\n  border: none;\n  border-radius: 6px;\n  color: white;\n  font-size: 0.8rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);\n  }\n"])),e=>e.$primary?"linear-gradient(45deg, #00d4ff, #0099cc)":e.$success?"linear-gradient(45deg, #00ff88, #00cc66)":"rgba(255, 255, 255, 0.1)"),Wl=yr.select(Sl||(Sl=Ie(["\n  width: 100%;\n  padding: 0.5rem;\n  background: #2a2a2a;\n  border: 1px solid #444;\n  border-radius: 4px;\n  color: white;\n  font-size: 0.8rem;\n  margin-bottom: 1rem;\n  \n  &:focus {\n    outline: none;\n    border-color: #00d4ff;\n  }\n  \n  option {\n    background: #2a2a2a;\n    color: white;\n  }\n"]))),Kl=e=>{let{isOpen:n,onClose:r,onApplyMergeFields:i}=e;const[o,s]=(0,t.useState)("fields"),[a,l]=(0,t.useState)([{id:1,name:"MY_IMAGE",value:"https://my.domain.com/image.png"},{id:2,name:"MY_IMAGE",value:"https://my.domain.com/image.png"},{id:3,name:"MY_IMAGE",value:"https://my.domain.com/image.png"},{id:4,name:"MY_IMAGE",value:"https://my.domain.com/image.png"}]),[c,u]=(0,t.useState)("default"),[d,h]=(0,t.useState)(!1),f=[{id:"fields",label:"Fields",icon:tl},{id:"connect",label:"Connect",icon:Cr},{id:"automate",label:"Automate",icon:qi}],p=(0,t.useCallback)(()=>{const e={id:Date.now(),name:"NEW_FIELD",value:"placeholder value"};l(t=>[...t,e])},[]),g=(0,t.useCallback)(e=>{l(t=>t.filter(t=>t.id!==e))},[]),m=(0,t.useCallback)((e,t)=>{l(n=>n.map(n=>n.id===e?Te(Te({},n),t):n))},[]),y=(0,t.useCallback)(()=>{const e={mergeFields:a.reduce((e,t)=>(e[t.name]=t.value,e),{}),template:c,timestamp:(new Date).toISOString()};return JSON.stringify(e,null,2)},[a,c]),v=(0,t.useCallback)(()=>{const e={fields:a,template:c,savedAt:(new Date).toISOString()};localStorage.setItem("mergeFields",JSON.stringify(e)),console.log("\u2705 Merge fields saved:",e)},[a,c]),b=(0,t.useCallback)(()=>{i&&i(a),console.log("\ud83d\udd04 Applying merge fields to timeline:",a)},[a,i]),w=()=>(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)(Bl,{children:["Build dynamic videos by replacing placeholders with variables via the API or workflows.",(0,Dr.jsx)("br",{}),(0,Dr.jsx)("br",{}),"Assign a merge field to a clip property using the merge button ","{ }"," in the clip properties panel or wrap text in double braces."]}),(0,Dr.jsxs)(Ul,{onClick:p,children:[(0,Dr.jsx)(Sr,{size:16}),"Add a merge field"]}),(0,Dr.jsxs)(jl,{children:[(0,Dr.jsx)(Ll,{children:(0,Dr.jsxs)(Ml,{children:["Merge Fields (",a.length,")"]})}),a.map(e=>(0,Dr.jsxs)(Pl,{children:[(0,Dr.jsx)(Ol,{type:"text",placeholder:"MERGE FIELD",value:e.name,onChange:t=>m(e.id,{name:t.target.value.toUpperCase()})}),(0,Dr.jsx)(Nl,{type:"text",placeholder:"PLACEHOLDER VALUE",value:e.value,onChange:t=>m(e.id,{value:t.target.value})}),(0,Dr.jsx)(Dl,{$danger:!0,onClick:()=>g(e.id),children:(0,Dr.jsx)(To,{size:14})})]},e.id))]}),(0,Dr.jsxs)(Fl,{children:[(0,Dr.jsx)(zl,{children:"JSON Preview"}),(0,Dr.jsx)(Vl,{children:y()})]}),(0,Dr.jsxs)(Hl,{children:[(0,Dr.jsxs)(ql,{onClick:v,children:[(0,Dr.jsx)(_r,{size:16}),"Save"]}),(0,Dr.jsxs)(ql,{$primary:!0,onClick:b,children:[(0,Dr.jsx)(Er,{size:16}),"Apply"]})]})]});return(0,Dr.jsxs)(_l,{$isOpen:n,children:[(0,Dr.jsxs)(El,{children:[(0,Dr.jsxs)(Cl,{children:[(0,Dr.jsx)(oo,{size:16}),"Merge Fields"]}),(0,Dr.jsx)(Tl,{onClick:r,children:(0,Dr.jsx)(Ko,{size:16})})]}),(0,Dr.jsx)(Il,{children:f.map(e=>(0,Dr.jsxs)(Al,{$active:o===e.id,onClick:()=>s(e.id),children:[(0,Dr.jsx)(e.icon,{size:14}),e.label]},e.id))}),(0,Dr.jsx)(Rl,{children:(()=>{switch(o){case"fields":default:return w();case"connect":return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(Bl,{children:"Connect your merge fields to external data sources and APIs for dynamic content generation."}),(0,Dr.jsxs)(jl,{children:[(0,Dr.jsx)(Ml,{children:"Data Sources"}),(0,Dr.jsxs)(Wl,{value:c,onChange:e=>u(e.target.value),children:[(0,Dr.jsx)("option",{value:"default",children:"Default Template"}),(0,Dr.jsx)("option",{value:"api",children:"External API"}),(0,Dr.jsx)("option",{value:"csv",children:"CSV Import"}),(0,Dr.jsx)("option",{value:"json",children:"JSON Data"}),(0,Dr.jsx)("option",{value:"database",children:"Database"})]})]}),(0,Dr.jsxs)(jl,{children:[(0,Dr.jsx)(Ml,{children:"Connection Status"}),(0,Dr.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",background:d?"rgba(0, 255, 136, 0.1)":"rgba(255, 107, 107, 0.1)",border:"1px solid ".concat(d?"#00ff88":"#ff6b6b"),borderRadius:"6px",marginBottom:"1rem"},children:[(0,Dr.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:d?"#00ff88":"#ff6b6b"}}),(0,Dr.jsx)("span",{style:{fontSize:"0.8rem",color:"#ccc"},children:d?"Connected":"Disconnected"})]})]}),(0,Dr.jsxs)(Hl,{children:[(0,Dr.jsxs)(ql,{$success:!d,onClick:()=>h(!d),children:[(0,Dr.jsx)(Cr,{size:16}),d?"Disconnect":"Connect"]}),(0,Dr.jsxs)(ql,{children:[(0,Dr.jsx)(qi,{size:16}),"Configure"]})]})]});case"automate":return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(Bl,{children:"Set up automated workflows to generate videos at scale using your merge fields and templates."}),(0,Dr.jsxs)(jl,{children:[(0,Dr.jsx)(Ml,{children:"Automation Rules"}),(0,Dr.jsxs)("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#666",fontSize:"0.9rem"},children:[(0,Dr.jsx)(qi,{size:32,style:{marginBottom:"1rem",opacity:.5}}),(0,Dr.jsx)("div",{children:"Automation workflows coming soon"}),(0,Dr.jsx)("div",{style:{fontSize:"0.8rem",marginTop:"0.5rem"},children:"Set triggers, conditions, and actions for automatic video generation"})]})]}),(0,Dr.jsxs)(Hl,{children:[(0,Dr.jsxs)(ql,{children:[(0,Dr.jsx)(Sr,{size:16}),"Create Workflow"]}),(0,Dr.jsxs)(ql,{children:[(0,Dr.jsx)(po,{size:16}),"Import Rules"]})]})]})}})()})]})},Gl=xr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),$l=xr("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);var Ql,Yl,Jl,Xl,Zl,ec,tc,nc,rc,ic;const oc=yr.div(Ql||(Ql=Ie(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: #0a0a0a;\n  border: 1px solid #333;\n  border-radius: 8px;\n  overflow: hidden;\n"]))),sc=yr.div(Yl||(Yl=Ie(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 1rem;\n  background: #1a1a1a;\n  border-bottom: 1px solid #333;\n"]))),ac=yr.h3(Jl||(Jl=Ie(["\n  margin: 0;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #00d4ff;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),lc=yr.div(Xl||(Xl=Ie(["\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n"]))),cc=yr.button(Zl||(Zl=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.375rem 0.75rem;\n  background: rgba(255, 255, 255, 0.1);\n  color: white;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.75rem;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n    border-color: #00d4ff;\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),uc=yr.div(ec||(ec=Ie(["\n  flex: 1;\n  position: relative;\n  overflow: hidden;\n"]))),dc=yr.pre(tc||(tc=Ie(["\n  margin: 0;\n  padding: 1rem;\n  font-family: 'Monaco', 'Courier New', monospace;\n  font-size: 0.8rem;\n  line-height: 1.4;\n  background: #0a0a0a;\n  color: #f8f8f2;\n  overflow: auto;\n  height: 100%;\n  white-space: pre-wrap;\n  word-break: break-word;\n  \n  /* Scrollbar styling */\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: #1a1a1a;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: #444;\n    border-radius: 4px;\n  }\n  \n  &::-webkit-scrollbar-thumb:hover {\n    background: #666;\n  }\n"]))),hc=yr.textarea(nc||(nc=Ie(["\n  width: 100%;\n  height: 100%;\n  padding: 1rem;\n  font-family: 'Monaco', 'Courier New', monospace;\n  font-size: 0.8rem;\n  line-height: 1.4;\n  background: #0a0a0a;\n  color: #f8f8f2;\n  border: none;\n  outline: none;\n  resize: none;\n  \n  &:focus {\n    background: #111;\n  }\n"]))),fc=yr.div(rc||(rc=Ie(["\n  padding: 0.5rem 1rem;\n  background: #1a1a1a;\n  border-top: 1px solid #333;\n  font-size: 0.75rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),pc=yr.div(ic||(ic=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: ",";\n"])),e=>{switch(e.status){case"valid":return"#00ff88";case"invalid":return"#ff6b6b";case"editing":return"#ffaa00";default:return"#666"}}),gc=e=>{let{json:n,onDataChange:r,title:i="JSON Timeline",editable:o=!1,collapsed:s=!1,onToggleCollapse:a}=e;const[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(!s),[h,f]=(0,t.useState)(""),[p,g]=(0,t.useState)("valid"),[m,y]=(0,t.useState)(""),[v,b]=(0,t.useState)(!1),w=(0,t.useRef)(null),k=n||{};(0,t.useEffect)(()=>{n||console.warn("JsonViewer: No data provided, using empty object")},[n]),(0,t.useEffect)(()=>{d(!s)},[s]);const x=e=>{try{return null===e||void 0===e?"null":JSON.stringify(e,null,2)}catch(t){return"Error: Invalid JSON"}},S=e=>{try{const t=JSON.parse(e);return g("valid"),y("JSON v\xe1lido"),t}catch(t){return g("invalid"),y("Error: ".concat(t.message)),null}},_=(()=>{if(!k)return null;const e=x(k);return{lines:e.split("\n").length,chars:e.length,size:new Blob([e]).size}})();return(0,Dr.jsxs)(oc,{children:[(0,Dr.jsxs)(sc,{children:[(0,Dr.jsxs)(ac,{children:[(0,Dr.jsx)(oo,{size:16}),i]}),(0,Dr.jsxs)(lc,{children:[o&&(0,Dr.jsx)(Dr.Fragment,{children:l?(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)(cc,{onClick:()=>{if("valid"===p||"editing"===p){const e=S(h);e&&r&&r(e)}c(!1)},disabled:"invalid"===p,children:[(0,Dr.jsx)(Gl,{size:14}),"Guardar"]}),(0,Dr.jsx)(cc,{onClick:()=>{c(!1),f(""),g("valid"),y("")},children:"Cancelar"})]}):(0,Dr.jsxs)(cc,{onClick:()=>{f(x(k)),c(!0),g("editing"),y("Editando...")},children:[(0,Dr.jsx)(oo,{size:14}),"Editar"]})}),(0,Dr.jsxs)(cc,{onClick:async()=>{try{const e=x(k);await navigator.clipboard.writeText(e),b(!0),setTimeout(()=>b(!1),2e3)}catch(e){console.error("Error copiando JSON:",e)}},children:[v?(0,Dr.jsx)(Gl,{size:14}):(0,Dr.jsx)(vo,{size:14}),v?"Copiado!":"Copiar"]}),(0,Dr.jsxs)(cc,{onClick:()=>{const e=x(k),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="timeline-".concat(Date.now(),".json"),r.click(),URL.revokeObjectURL(n)},children:[(0,Dr.jsx)(go,{size:14}),"Exportar"]}),(0,Dr.jsx)("input",{ref:w,type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=e=>{try{const t=e.target.result,n=JSON.parse(t);r&&r(n),g("valid"),y("JSON importado correctamente")}catch(t){g("invalid"),y("Error importando: ".concat(t.message))}},n.readAsText(t),w.current&&(w.current.value="")},style:{display:"none"}}),(0,Dr.jsxs)(cc,{onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},children:[(0,Dr.jsx)(po,{size:14}),"Importar"]}),(0,Dr.jsxs)(cc,{onClick:()=>{a?a():d(!u)},children:[u?(0,Dr.jsx)($l,{size:14}):(0,Dr.jsx)(Nr,{size:14}),u?"Colapsar":"Expandir"]})]})]}),u&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(uc,{children:l?(0,Dr.jsx)(hc,{value:h,onChange:e=>{const t=e.target.value;if(f(t),t.trim()){const e=S(t);e&&r&&r(e)}},placeholder:"Ingresa JSON v\xe1lido...",spellCheck:!1}):(0,Dr.jsx)(dc,{dangerouslySetInnerHTML:{__html:(e=>{if(!e||"string"!==typeof e)return"null";try{return e.replace(/(".*?")\s*:/g,'<span style="color: #66d9ef;">$1</span>:').replace(/:\s*(".*?")/g,': <span style="color: #a6e22e;">$1</span>').replace(/:\s*(\d+\.?\d*)/g,': <span style="color: #ae81ff;">$1</span>').replace(/:\s*(true|false|null)/g,': <span style="color: #fd971f;">$1</span>').replace(/\{/g,'<span style="color: #f92672;">{</span>').replace(/\}/g,'<span style="color: #f92672;">}</span>').replace(/\[/g,'<span style="color: #f92672;">[</span>').replace(/\]/g,'<span style="color: #f92672;">]</span>')}catch(t){return console.error("Error in highlightJson:",t),e||"null"}})(x(k))}})}),(0,Dr.jsxs)(fc,{children:[(0,Dr.jsxs)(pc,{status:p,children:["invalid"===p&&(0,Dr.jsx)(jo,{size:14}),"valid"===p&&(0,Dr.jsx)(Gl,{size:14}),m]}),_&&(0,Dr.jsxs)("div",{style:{color:"#666"},children:[_.lines," l\xedneas \u2022 ",_.chars," caracteres \u2022 ",(_.size/1024).toFixed(1)," KB"]})]})]})]})},mc=xr("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),yc=xr("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var vc,bc,wc,kc,xc,Sc,_c,Ec,Cc,Tc,Ic,Ac,Rc,Pc,Oc,Nc,Dc,jc,Lc,Mc,Uc,Fc,zc,Vc,Bc,Hc,qc,Wc,Kc,Gc,$c,Qc,Yc,Jc,Xc,Zc,eu,tu;const nu=vr(vc||(vc=Ie(["\n  from {\n    transform: translateY(100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n"]))),ru=vr(bc||(bc=Ie(["\n  0% {\n    background-position: 0% 50%;\n  }\n  50% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n"]))),iu=vr(wc||(wc=Ie(["\n  0%, 100% {\n    box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);\n  }\n  50% {\n    box-shadow: 0 0 30px rgba(0, 212, 255, 0.6);\n  }\n"]))),ou=vr(kc||(kc=Ie(["\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n"]))),su=yr.div(xc||(xc=Ie(["\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  width: 420px;\n  max-height: 80vh;\n  z-index: 1000;\n  animation: "," 0.3s ease-out;\n  \n  ","\n  \n  @media (max-width: 768px) {\n    width: calc(100vw - 40px);\n    right: 20px;\n    left: 20px;\n  }\n"])),nu,e=>e.$minimized&&pr(Sc||(Sc=Ie(["\n    width: 300px;\n    max-height: 120px;\n  "])))),au=yr.div(_c||(_c=Ie(["\n  background: rgba(26, 26, 26, 0.95);\n  backdrop-filter: blur(20px);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 16px;\n  box-shadow: \n    0 20px 40px rgba(0, 0, 0, 0.3),\n    0 0 0 1px rgba(255, 255, 255, 0.05);\n  overflow: hidden;\n  \n  ","\n"])),e=>e.$isActive&&pr(Ec||(Ec=Ie(["\n    animation: "," 2s ease-in-out infinite;\n  "])),iu)),lu=yr.div(Cc||(Cc=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px 20px;\n  background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 150, 200, 0.1));\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n"]))),cu=yr.div(Tc||(Tc=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-weight: 600;\n  color: white;\n  font-size: 0.95rem;\n"]))),uu=yr.div(Ic||(Ic=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n"]))),du=yr.button(Ac||(Ac=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: rgba(255, 255, 255, 0.1);\n  border: none;\n  border-radius: 8px;\n  color: #ccc;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n    color: white;\n    transform: scale(1.05);\n  }\n  \n  &:active {\n    transform: scale(0.95);\n  }\n"]))),hu=yr.div(Rc||(Rc=Ie(["\n  padding: 16px 20px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n"]))),fu=yr.div(Pc||(Pc=Ie(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n  font-size: 0.85rem;\n  color: #ccc;\n"]))),pu=yr.div(Oc||(Oc=Ie(["\n  width: 100%;\n  height: 8px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 4px;\n  overflow: hidden;\n  position: relative;\n"]))),gu=yr.div(Nc||(Nc=Ie(["\n  height: 100%;\n  background: linear-gradient(\n    90deg,\n    #00d4ff 0%,\n    #0099cc 50%,\n    #00d4ff 100%\n  );\n  background-size: 200% 100%;\n  border-radius: 4px;\n  width: ","%;\n  transition: width 0.3s ease;\n  \n  ","\n"])),e=>e.$progress,e=>e.$animated&&pr(Dc||(Dc=Ie(["\n    animation: "," 2s linear infinite;\n  "])),ru)),mu=yr.div(jc||(jc=Ie(["\n  max-height: 400px;\n  overflow-y: auto;\n  \n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: rgba(255, 255, 255, 0.05);\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: rgba(255, 255, 255, 0.2);\n    border-radius: 3px;\n  }\n"]))),yu=yr.div(Lc||(Lc=Ie(["\n  display: flex;\n  align-items: center;\n  padding: 16px 20px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n  transition: background 0.2s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.02);\n  }\n  \n  &:last-child {\n    border-bottom: none;\n  }\n"]))),vu=yr.div(Mc||(Mc=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border-radius: 8px;\n  margin-right: 12px;\n  flex-shrink: 0;\n  \n  ","\n"])),e=>{switch(e.$type){case"video":return pr(Uc||(Uc=Ie(["\n          background: linear-gradient(135deg, #ff6b6b, #ff8e8e);\n          color: white;\n        "])));case"image":return pr(Fc||(Fc=Ie(["\n          background: linear-gradient(135deg, #4ecdc4, #6ee5e0);\n          color: white;\n        "])));case"audio":return pr(zc||(zc=Ie(["\n          background: linear-gradient(135deg, #45b7d1, #96ceb4);\n          color: white;\n        "])));default:return pr(Vc||(Vc=Ie(["\n          background: linear-gradient(135deg, #666, #888);\n          color: white;\n        "])))}}),bu=yr.img(Bc||(Bc=Ie(["\n  width: 40px;\n  height: 40px;\n  object-fit: cover;\n  border-radius: 8px;\n  margin-right: 12px;\n  flex-shrink: 0;\n"]))),wu=yr.div(Hc||(Hc=Ie(["\n  flex: 1;\n  min-width: 0;\n"]))),ku=yr.div(qc||(qc=Ie(["\n  font-weight: 500;\n  color: white;\n  font-size: 0.85rem;\n  margin-bottom: 4px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),xu=yr.div(Wc||(Wc=Ie(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 0.75rem;\n  color: #999;\n"]))),Su=yr.span(Kc||(Kc=Ie(["\n  color: #999;\n"]))),_u=yr.span(Gc||(Gc=Ie(["\n  color: #00d4ff;\n"]))),Eu=yr.div($c||($c=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  margin-left: 12px;\n  flex-shrink: 0;\n  \n  ","\n  \n  ","\n  \n  ","\n"])),e=>"uploading"===e.$status&&pr(Qc||(Qc=Ie(["\n    animation: "," 1s linear infinite;\n  "])),ou),e=>"completed"===e.$status&&pr(Yc||(Yc=Ie(["\n    color: #4ade80;\n  "]))),e=>"failed"===e.$status&&pr(Jc||(Jc=Ie(["\n    color: #f87171;\n  "])))),Cu=yr.button(Xc||(Xc=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  background: rgba(248, 113, 113, 0.2);\n  border: 1px solid #f87171;\n  border-radius: 4px;\n  color: #f87171;\n  cursor: pointer;\n  margin-left: 8px;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: rgba(248, 113, 113, 0.3);\n    transform: scale(1.05);\n  }\n"]))),Tu=yr.div(Zc||(Zc=Ie(["\n  width: 100%;\n  height: 3px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 2px;\n  overflow: hidden;\n  margin-top: 8px;\n"]))),Iu=yr.div(eu||(eu=Ie(["\n  height: 100%;\n  background: linear-gradient(90deg, #00d4ff, #0099cc);\n  border-radius: 2px;\n  width: ","%;\n  transition: width 0.3s ease;\n"])),e=>e.$progress),Au=yr.div(tu||(tu=Ie(["\n  padding: 40px 20px;\n  text-align: center;\n  color: #666;\n  font-size: 0.9rem;\n"]))),Ru=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(2))," ").concat(["Bytes","KB","MB","GB"][t])},Pu=e=>{if(!e||e===1/0)return"--";const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))},Ou=()=>{const[e,n]=(0,t.useState)(!1),{uploads:r,updateUploadProgress:i,completeUpload:o,failUpload:s,retryFailedUpload:a,clearCompletedUploads:l,clearFailedUploads:c,hasActiveUploads:u,getTotalUploadProgress:d}=oi(),{active:h,completed:f,failed:p,isUploading:g,totalProgress:m}=r;if(!u()&&0===f.length&&0===p.length)return null;const y=[...h,...f,...p],v=h.length,b=f.length,w=p.length;return(0,Dr.jsx)(su,{$minimized:e,children:(0,Dr.jsxs)(au,{$isActive:g,children:[(0,Dr.jsxs)(lu,{children:[(0,Dr.jsxs)(cu,{children:[(0,Dr.jsx)(po,{size:18}),g?"Uploading Files":"Upload Complete",v>0&&(0,Dr.jsxs)("span",{style:{color:"#00d4ff",fontSize:"0.8rem"},children:["(",v," active)"]})]}),(0,Dr.jsxs)(uu,{children:[b>0&&(0,Dr.jsx)(du,{onClick:()=>{l()},title:"Clear completed",children:(0,Dr.jsx)(Lo,{size:14})}),w>0&&(0,Dr.jsx)(du,{onClick:()=>{c()},title:"Clear failed",children:(0,Dr.jsx)(Mo,{size:14})}),(0,Dr.jsx)(du,{onClick:()=>n(!e),title:e?"Expand":"Minimize",children:e?(0,Dr.jsx)(Nr,{size:14}):(0,Dr.jsx)($l,{size:14})})]})]}),!e&&(0,Dr.jsxs)(Dr.Fragment,{children:[g&&(0,Dr.jsxs)(hu,{children:[(0,Dr.jsxs)(fu,{children:[(0,Dr.jsx)("span",{children:"Overall Progress"}),(0,Dr.jsxs)("span",{children:[Math.round(m),"%"]})]}),(0,Dr.jsx)(pu,{children:(0,Dr.jsx)(gu,{$progress:m,$animated:g})})]}),(0,Dr.jsx)(mu,{children:y.length>0?y.map(e=>{const t=(n=e.fileType).startsWith("video/")?ao:n.startsWith("image/")?co:n.startsWith("audio/")?lo:n.startsWith("text/")?ho:mc;var n;const r=(e=>e.startsWith("video/")?"video":e.startsWith("image/")?"image":e.startsWith("audio/")?"audio":"file")(e.fileType);return(0,Dr.jsxs)(yu,{children:[e.thumbnail?(0,Dr.jsx)(bu,{src:e.thumbnail,alt:e.filename}):(0,Dr.jsx)(vu,{$type:r,children:(0,Dr.jsx)(t,{size:20})}),(0,Dr.jsxs)(wu,{children:[(0,Dr.jsx)(ku,{children:e.filename}),(0,Dr.jsxs)(xu,{children:[(0,Dr.jsx)(Su,{children:Ru(e.fileSize)}),"uploading"===e.status&&e.speed>0&&(0,Dr.jsx)(_u,{children:(i=e.speed,"".concat(Ru(i),"/s"))}),"uploading"===e.status&&e.estimatedTime&&(0,Dr.jsxs)("span",{children:["ETA: ",Pu(e.estimatedTime)]})]}),"uploading"===e.status&&(0,Dr.jsx)(Tu,{children:(0,Dr.jsx)(Iu,{$progress:e.progress})})]}),(0,Dr.jsxs)(Eu,{$status:e.status,children:["uploading"===e.status&&(0,Dr.jsx)(po,{size:16}),"completed"===e.status&&(0,Dr.jsx)(Lo,{size:16}),"failed"===e.status&&(0,Dr.jsx)(Mo,{size:16})]}),"failed"===e.status&&(0,Dr.jsx)(Cu,{onClick:()=>{return t=e.id,void a(t);var t},children:(0,Dr.jsx)(yc,{size:12})})]},e.id);var i}):(0,Dr.jsx)(Au,{children:"No uploads in progress"})})]})]})})},Nu=xr("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),Du=xr("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),ju=xr("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),Lu=xr("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]),Mu=xr("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]),Uu=xr("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]),Fu=xr("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]),zu=xr("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]),Vu=xr("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Bu=xr("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var Hu,qu,Wu,Ku,Gu,$u,Qu,Yu;const Ju=vr(Hu||(Hu=Ie(["\n  0% { background-position: -200px 0; }\n  100% { background-position: calc(200px + 100%) 0; }\n"]))),Xu=yr.div(qu||(qu=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 16px;\n  background: #2a2a2a;\n  border-bottom: 1px solid #333;\n  border-top: 1px solid #333;\n  overflow-x: auto;\n  \n  &::-webkit-scrollbar {\n    height: 4px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: #1a1a1a;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: #555;\n    border-radius: 2px;\n  }\n"]))),Zu=yr.div(Wu||(Wu=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 0 8px;\n  border-right: 1px solid #444;\n  \n  &:last-child {\n    border-right: none;\n  }\n"]))),ed=yr.button(Ku||(Ku=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: ",";\n  border: none;\n  border-radius: 6px;\n  color: ",";\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  \n  &:hover {\n    background: ",";\n    color: ",";\n    transform: scale(1.05);\n  }\n  \n  &:active {\n    transform: scale(0.95);\n  }\n  \n  &:disabled {\n    opacity: 0.4;\n    cursor: not-allowed;\n    transform: none;\n  }\n  \n  ","\n"])),e=>e.$active?"#00d4ff":"rgba(255, 255, 255, 0.1)",e=>e.$active?"#000":"#ccc",e=>e.$active?"#00b8e6":"rgba(255, 255, 255, 0.2)",e=>e.$active?"#000":"white",e=>e.$shimmer&&"\n    background: linear-gradient(\n      90deg,\n      rgba(255, 255, 255, 0.1) 0%,\n      rgba(255, 255, 255, 0.3) 50%,\n      rgba(255, 255, 255, 0.1) 100%\n    );\n    background-size: 200px 100%;\n    animation: ".concat(Ju," 1.5s infinite;\n  ")),td=yr.div(Gu||(Gu=Ie(["\n  position: relative;\n  display: inline-block;\n"]))),nd=yr.div($u||($u=Ie(["\n  position: absolute;\n  top: 100%;\n  left: 0;\n  background: #2a2a2a;\n  border: 1px solid #444;\n  border-radius: 8px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);\n  min-width: 200px;\n  z-index: 1000;\n  display: ",";\n  animation: slideDown 0.2s ease;\n  \n  @keyframes slideDown {\n    from { opacity: 0; transform: translateY(-10px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n"])),e=>e.$show?"block":"none"),rd=yr.div(Qu||(Qu=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  color: #ccc;\n  cursor: pointer;\n  transition: background 0.2s ease;\n  \n  &:hover {\n    background: rgba(0, 212, 255, 0.1);\n    color: #00d4ff;\n  }\n  \n  &:first-child {\n    border-top-left-radius: 8px;\n    border-top-right-radius: 8px;\n  }\n  \n  &:last-child {\n    border-bottom-left-radius: 8px;\n    border-bottom-right-radius: 8px;\n  }\n"]))),id=yr.input(Yu||(Yu=Ie(["\n  width: 80px;\n  height: 4px;\n  background: #444;\n  outline: none;\n  border-radius: 2px;\n  margin: 0 8px;\n  \n  &::-webkit-slider-thumb {\n    appearance: none;\n    width: 12px;\n    height: 12px;\n    background: #00d4ff;\n    border-radius: 50%;\n    cursor: pointer;\n    transition: all 0.2s ease;\n  }\n  \n  &::-webkit-slider-thumb:hover {\n    transform: scale(1.2);\n  }\n"]))),od=e=>{let{selectedClips:n=[],onClipOperation:r,onTrackOperation:i,clipboard:o,undoStack:s,redoStack:a}=e;const[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(!1),{timeline:h,selection:f,selectClips:p,clearClipSelection:g}=oi(),m=(0,t.useCallback)(()=>{0!==n.length&&(d(!0),setTimeout(()=>{null===r||void 0===r||r("copy",n),d(!1)},500))},[n,r]),y=(0,t.useCallback)(()=>{0!==n.length&&(d(!0),setTimeout(()=>{null===r||void 0===r||r("cut",n),d(!1)},500))},[n,r]),v=(0,t.useCallback)(()=>{o&&0!==o.length&&(d(!0),setTimeout(()=>{null===r||void 0===r||r("paste",[],{position:h.position}),d(!1)},500))},[o,h.position,r]),b=(0,t.useCallback)(()=>{0!==n.length&&(null===r||void 0===r||r("split",n,{position:h.position}))},[n,h.position,r]),w=(0,t.useCallback)(()=>{n.length<2||null===r||void 0===r||r("merge",n)},[n,r]),k=(0,t.useCallback)(e=>{0!==n.length&&(null===r||void 0===r||r("align",n,{alignment:e}),c(null))},[n,r]),x=(0,t.useCallback)(e=>{0!==n.length&&(null===r||void 0===r||r("speed",n,{speed:parseFloat(e)}))},[n,r]),S=(0,t.useCallback)(()=>{null===i||void 0===i||i("mute",f.selectedTracks)},[f.selectedTracks,i]),_=(0,t.useCallback)(()=>{null===i||void 0===i||i("solo",f.selectedTracks)},[f.selectedTracks,i]),E=(0,t.useCallback)(()=>{null===i||void 0===i||i("lock",f.selectedTracks)},[f.selectedTracks,i]),C=(0,t.useCallback)(()=>{null===r||void 0===r||r("undo")},[r]),T=(0,t.useCallback)(()=>{null===r||void 0===r||r("redo")},[r]),I=(0,t.useCallback)(()=>{null===r||void 0===r||r("selectAll")},[r]),A=(0,t.useCallback)(()=>{g()},[g]),R=e=>{c(l===e?null:e)},P=n.length>0,O=n.length>1,N=o&&o.length>0,D=s&&s.length>0,j=a&&a.length>0;return(0,Dr.jsxs)(Xu,{children:[(0,Dr.jsxs)(Zu,{children:[(0,Dr.jsx)(ed,{onClick:I,title:"Select All (Ctrl+A)",children:(0,Dr.jsx)(Nu,{size:16})}),(0,Dr.jsx)(ed,{onClick:A,disabled:!P,title:"Deselect All (Ctrl+D)",children:(0,Dr.jsx)(Ao,{size:16})})]}),(0,Dr.jsxs)(Zu,{children:[(0,Dr.jsx)(ed,{onClick:m,disabled:!P,$shimmer:u,title:"Copy (Ctrl+C)",children:(0,Dr.jsx)(vo,{size:16})}),(0,Dr.jsx)(ed,{onClick:y,disabled:!P,$shimmer:u,title:"Cut (Ctrl+X)",children:(0,Dr.jsx)(Du,{size:16})}),(0,Dr.jsx)(ed,{onClick:v,disabled:!N,$shimmer:u,title:"Paste (Ctrl+V)",children:(0,Dr.jsx)(ju,{size:16})})]}),(0,Dr.jsxs)(Zu,{children:[(0,Dr.jsx)(ed,{onClick:b,disabled:!P,title:"Split at Playhead (S)",children:(0,Dr.jsx)(Lu,{size:16})}),(0,Dr.jsx)(ed,{onClick:w,disabled:!O,title:"Merge Selected Clips",children:(0,Dr.jsx)(Mu,{size:16})}),(0,Dr.jsxs)(td,{children:[(0,Dr.jsxs)(ed,{onClick:()=>R("align"),disabled:!P,title:"Alignment Options",children:[(0,Dr.jsx)(Uu,{size:16}),(0,Dr.jsx)(Fo,{size:12,style:{marginLeft:2}})]}),(0,Dr.jsxs)(nd,{$show:"align"===l,children:[(0,Dr.jsxs)(rd,{onClick:()=>k("left"),children:[(0,Dr.jsx)(Fu,{size:16}),"Align Left"]}),(0,Dr.jsxs)(rd,{onClick:()=>k("center"),children:[(0,Dr.jsx)(Uu,{size:16}),"Align Center"]}),(0,Dr.jsxs)(rd,{onClick:()=>k("right"),children:[(0,Dr.jsx)(zu,{size:16}),"Align Right"]})]})]})]}),(0,Dr.jsxs)(Zu,{children:[(0,Dr.jsx)(Po,{size:16,style:{color:"#666"}}),(0,Dr.jsx)(id,{type:"range",min:"0.25",max:"4",step:"0.25",defaultValue:"1",disabled:!P,onChange:e=>x(e.target.value),title:"Speed Control"}),(0,Dr.jsx)("span",{style:{fontSize:"0.7rem",color:"#666",minWidth:"30px"},children:"1.0x"})]}),(0,Dr.jsxs)(Zu,{children:[(0,Dr.jsx)(ed,{onClick:S,title:"Mute Selected Tracks",children:(0,Dr.jsx)(Pr,{size:16})}),(0,Dr.jsx)(ed,{onClick:_,title:"Solo Selected Tracks",children:(0,Dr.jsx)(Or,{size:16})}),(0,Dr.jsx)(ed,{onClick:E,title:"Lock Selected Tracks",children:(0,Dr.jsx)(Eo,{size:16})})]}),(0,Dr.jsxs)(Zu,{children:[(0,Dr.jsx)(ed,{disabled:!P,title:"Effects Panel",children:(0,Dr.jsx)(Cr,{size:16})}),(0,Dr.jsx)(ed,{disabled:!P,title:"Color Correction",children:(0,Dr.jsx)(Vu,{size:16})}),(0,Dr.jsx)(ed,{disabled:!P,title:"Audio Levels",children:(0,Dr.jsx)(ka,{size:16})})]}),(0,Dr.jsxs)(Zu,{children:[(0,Dr.jsx)(ed,{onClick:C,disabled:!D,title:"Undo (Ctrl+Z)",children:(0,Dr.jsx)(Bu,{size:16})}),(0,Dr.jsx)(ed,{onClick:T,disabled:!j,title:"Redo (Ctrl+Y)",children:(0,Dr.jsx)(Io,{size:16})})]}),(0,Dr.jsx)(Zu,{children:(0,Dr.jsxs)(td,{children:[(0,Dr.jsxs)(ed,{onClick:()=>R("settings"),title:"Advanced Settings",children:[(0,Dr.jsx)(qi,{size:16}),(0,Dr.jsx)(Fo,{size:12,style:{marginLeft:2}})]}),(0,Dr.jsxs)(nd,{$show:"settings"===l,children:[(0,Dr.jsxs)(rd,{children:[(0,Dr.jsx)(So,{size:16}),"Show Waveforms"]}),(0,Dr.jsxs)(rd,{children:[(0,Dr.jsx)(Nu,{size:16}),"Show Keyframes"]}),(0,Dr.jsxs)(rd,{children:[(0,Dr.jsx)(Po,{size:16}),"Snap to Grid"]}),(0,Dr.jsxs)(rd,{children:[(0,Dr.jsx)(Or,{size:16}),"Auto-Duck Audio"]})]})]})})]})},sd=xr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ad=xr("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),ld=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},cd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ld(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new ud;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ud extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dd=function(e){return function(e){const t=ld(e);return cd.encodeByteArray(t,!0)}(e).replace(/\./g,"")},hd=function(e){try{return cd.decodeString(e,!0)}catch(VA){console.error("base64Decode failed: ",VA)}return null};function fd(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const pd=()=>{try{return fd().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(VA){return}const t=e&&hd(e[1]);return t&&JSON.parse(t)})()}catch(VA){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(VA))}},gd=e=>{var t,n;return null===(n=null===(t=pd())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},md=e=>{const t=gd(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},yd=()=>{var e;return null===(e=pd())||void 0===e?void 0:e.config},vd=e=>{var t;return null===(t=pd())||void 0===t?void 0:t["_".concat(e)]};class bd{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function wd(e){return e.endsWith(".cloudworkstations.dev")}async function kd(e){return(await fetch(e,{credentials:"include"})).ok}function xd(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[dd(JSON.stringify({alg:"none",type:"JWT"})),dd(JSON.stringify(o)),""].join(".")}const Sd={};let _d=!1;function Ed(e,t){if("undefined"===typeof window||"undefined"===typeof document||!wd(window.location.host)||Sd[e]===t||Sd[e]||_d)return;function n(e){return"__firebase__banner__".concat(e)}Sd[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Sd))Sd[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{_d=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function s(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),s=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,s,l,n),document.body.appendChild(t)}i?(s.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function Cd(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Td(){var e;const t=null===(e=pd())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(VA){return!1}}function Id(){return!Td()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ad(){try{return"object"===typeof indexedDB}catch(VA){return!1}}class Rd extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Rd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pd.prototype.create)}}class Pd{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Od,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Rd(n,o,t)}}const Od=/\{\$([^}]+)}/g;function Nd(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(Dd(n)&&Dd(o)){if(!Nd(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Dd(e){return null!==e&&"object"===typeof e}function jd(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ld(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Md(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Ud{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Fd),void 0===r.error&&(r.error=Fd),void 0===r.complete&&(r.complete=Fd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(VA){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(VA){"undefined"!==typeof console&&console.error&&console.error(VA)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fd(){}function zd(e){return e&&e._delegate?e._delegate:e}class Vd{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Bd="[DEFAULT]";class Hd{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new bd;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(VA){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(VA){if(r)return null;throw VA}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Bd})}catch(VA){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(VA){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bd;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bd;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bd;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qd(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bd;return this.component?this.component.multipleInstances?e:Bd:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function qd(e){return e===Bd?void 0:e}class Wd{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Hd(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Kd=[];var Gd;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Gd||(Gd={}));const $d={debug:Gd.DEBUG,verbose:Gd.VERBOSE,info:Gd.INFO,warn:Gd.WARN,error:Gd.ERROR,silent:Gd.SILENT},Qd=Gd.INFO,Yd={[Gd.DEBUG]:"log",[Gd.VERBOSE]:"log",[Gd.INFO]:"info",[Gd.WARN]:"warn",[Gd.ERROR]:"error"},Jd=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Yd[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class Xd{constructor(e){this.name=e,this._logLevel=Qd,this._logHandler=Jd,this._userLogHandler=null,Kd.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gd))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?$d[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Gd.DEBUG,...t),this._logHandler(this,Gd.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Gd.VERBOSE,...t),this._logHandler(this,Gd.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Gd.INFO,...t),this._logHandler(this,Gd.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Gd.WARN,...t),this._logHandler(this,Gd.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Gd.ERROR,...t),this._logHandler(this,Gd.ERROR,...t)}}let Zd,eh;const th=new WeakMap,nh=new WeakMap,rh=new WeakMap,ih=new WeakMap,oh=new WeakMap;let sh={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return nh.get(e);if("objectStoreNames"===t)return e.objectStoreNames||rh.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ch(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ah(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(eh||(eh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(uh(this),n),ch(th.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ch(e.apply(uh(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(uh(this),t,...r);return rh.set(o,t.sort?t.sort():[t]),ch(o)}}function lh(e){return"function"===typeof e?ah(e):(e instanceof IDBTransaction&&function(e){if(nh.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});nh.set(e,t)}(e),t=e,(Zd||(Zd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,sh):e);var t}function ch(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(ch(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&th.set(t,e)}).catch(()=>{}),oh.set(t,e),t}(e);if(ih.has(e))return ih.get(e);const t=lh(e);return t!==e&&(ih.set(e,t),oh.set(t,e)),t}const uh=e=>oh.get(e);const dh=["get","getKey","getAll","getAllKeys","count"],hh=["put","add","delete","clear"],fh=new Map;function ph(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(fh.get(t))return fh.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=hh.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!dh.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return fh.set(t,o),o}sh=(e=>Te(Te({},e),{},{get:(t,n,r)=>ph(t,n)||e.get(t,n,r),has:(t,n)=>!!ph(t,n)||e.has(t,n)}))(sh);class gh{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const mh="@firebase/app",yh="0.13.1",vh=new Xd("@firebase/app"),bh="@firebase/app-compat",wh="@firebase/analytics-compat",kh="@firebase/analytics",xh="@firebase/app-check-compat",Sh="@firebase/app-check",_h="@firebase/auth",Eh="@firebase/auth-compat",Ch="@firebase/database",Th="@firebase/data-connect",Ih="@firebase/database-compat",Ah="@firebase/functions",Rh="@firebase/functions-compat",Ph="@firebase/installations",Oh="@firebase/installations-compat",Nh="@firebase/messaging",Dh="@firebase/messaging-compat",jh="@firebase/performance",Lh="@firebase/performance-compat",Mh="@firebase/remote-config",Uh="@firebase/remote-config-compat",Fh="@firebase/storage",zh="@firebase/storage-compat",Vh="@firebase/firestore",Bh="@firebase/ai",Hh="@firebase/firestore-compat",qh="firebase",Wh="[DEFAULT]",Kh={[mh]:"fire-core",[bh]:"fire-core-compat",[kh]:"fire-analytics",[wh]:"fire-analytics-compat",[Sh]:"fire-app-check",[xh]:"fire-app-check-compat",[_h]:"fire-auth",[Eh]:"fire-auth-compat",[Ch]:"fire-rtdb",[Th]:"fire-data-connect",[Ih]:"fire-rtdb-compat",[Ah]:"fire-fn",[Rh]:"fire-fn-compat",[Ph]:"fire-iid",[Oh]:"fire-iid-compat",[Nh]:"fire-fcm",[Dh]:"fire-fcm-compat",[jh]:"fire-perf",[Lh]:"fire-perf-compat",[Mh]:"fire-rc",[Uh]:"fire-rc-compat",[Fh]:"fire-gcs",[zh]:"fire-gcs-compat",[Vh]:"fire-fst",[Hh]:"fire-fst-compat",[Bh]:"fire-vertex","fire-js":"fire-js",[qh]:"fire-js-all"},Gh=new Map,$h=new Map,Qh=new Map;function Yh(e,t){try{e.container.addComponent(t)}catch(VA){vh.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),VA)}}function Jh(e){const t=e.name;if(Qh.has(t))return vh.debug("There were multiple attempts to register component ".concat(t,".")),!1;Qh.set(t,e);for(const n of Gh.values())Yh(n,e);for(const n of $h.values())Yh(n,e);return!0}function Xh(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Zh(e){return null!==e&&void 0!==e&&void 0!==e.settings}const ef=new Pd("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class tf{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Vd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ef.create("app-deleted",{appName:this._name})}}const nf="11.9.0";function rf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Wh,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw ef.create("bad-app-name",{appName:String(i)});if(n||(n=yd()),!n)throw ef.create("no-options");const o=Gh.get(i);if(o){if(Nd(n,o.options)&&Nd(r,o.config))return o;throw ef.create("duplicate-app",{appName:i})}const s=new Wd(i);for(const l of Qh.values())s.addComponent(l);const a=new tf(n,r,s);return Gh.set(i,a),a}function of(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wh;const t=Gh.get(e);if(!t&&e===Wh&&yd())return rf();if(!t)throw ef.create("no-app",{appName:e});return t}function sf(e,t,n){var r;let i=null!==(r=Kh[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void vh.warn(e.join(" "))}Jh(new Vd("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const af="firebase-heartbeat-store";let lf=null;function cf(){return lf||(lf=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=ch(s);return r&&s.addEventListener("upgradeneeded",e=>{r(ch(s.result),e.oldVersion,e.newVersion,ch(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(af)}catch(VA){console.warn(VA)}}}).catch(e=>{throw ef.create("idb-open",{originalErrorMessage:e.message})})),lf}async function uf(e,t){try{const n=(await cf()).transaction(af,"readwrite"),r=n.objectStore(af);await r.put(t,df(e)),await n.done}catch(VA){if(VA instanceof Rd)vh.warn(VA.message);else{const t=ef.create("idb-set",{originalErrorMessage:null===VA||void 0===VA?void 0:VA.message});vh.warn(t.message)}}}function df(e){return"".concat(e.name,"!").concat(e.options.appId)}class hf{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pf(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ff();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(VA){vh.warn(VA)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ff(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),gf(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gf(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=dd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(VA){return vh.warn(VA),""}}}function ff(){return(new Date).toISOString().substring(0,10)}class pf{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ad()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await cf()).transaction(af),n=await t.objectStore(af).get(df(e));return await t.done,n}catch(VA){if(VA instanceof Rd)vh.warn(VA.message);else{const t=ef.create("idb-get",{originalErrorMessage:null===VA||void 0===VA?void 0:VA.message});vh.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return uf(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return uf(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function gf(e){return dd(JSON.stringify({version:2,heartbeats:e})).length}var mf;mf="",Jh(new Vd("platform-logger",e=>new gh(e),"PRIVATE")),Jh(new Vd("heartbeat",e=>new hf(e),"PRIVATE")),sf(mh,yh,mf),sf(mh,yh,"esm2017"),sf("fire-js","");function yf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function vf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bf=vf,wf=new Pd("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),kf=new Xd("@firebase/auth");function xf(e){if(kf.logLevel<=Gd.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];kf.error("Auth (".concat(nf,"): ").concat(e),...n)}}function Sf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw If(e,...n)}function _f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return If(e,...n)}function Ef(e,t,n){const r=Object.assign(Object.assign({},bf()),{[t]:n});return new Pd("auth","Firebase",r).create(t,{appName:e.name})}function Cf(e){return Ef(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tf(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Sf(e,"argument-error"),Ef(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function If(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return wf.create(e,...n)}function Af(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw If(t,...r)}}function Rf(e){const t="INTERNAL ASSERTION FAILED: "+e;throw xf(t),new Error(t)}function Pf(e,t){e||Rf(t)}function Of(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Nf(){return"http:"===Df()||"https:"===Df()}function Df(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function jf(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Nf()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Lf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pf(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cd())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return jf()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mf(e,t){Pf(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Uf{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Rf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Rf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Rf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ff={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},zf=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Vf=new Lf(3e4,6e4);function Bf(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Hf(e,t,n,r){return qf(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=jd(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&wd(e.emulatorConfig.host)&&(l.credentials="include"),Uf.fetch()(await Kf(e,e.config.apiHost,n,s),l)})}async function qf(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ff),t);try{const t=new $f(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Qf(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Qf(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Qf(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Qf(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Ef(e,a,s);Sf(e,a)}}catch(VA){if(VA instanceof Rd)throw VA;Sf(e,"network-request-failed",{message:String(VA)})}}async function Wf(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Hf(e,t,n,r,i);return"mfaPendingCredential"in o&&Sf(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function Kf(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),o=e,s=o.config.emulator?Mf(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(zf.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(s).toString()}return s}function Gf(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $f{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(_f(this.auth,"network-request-failed")),Vf.get())})}}function Qf(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=_f(e,t,r);return i.customData._tokenResponse=n,i}function Yf(e){return void 0!==e&&void 0!==e.enterprise}class Jf{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Gf(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Xf(e,t){return Hf(e,"GET","/v2/recaptchaConfig",Bf(e,t))}async function Zf(e,t){return Hf(e,"POST","/v1/accounts:lookup",t)}function ep(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(VA){}}function tp(e){return 1e3*Number(e)}function np(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return xf("JWT malformed, contained fewer than 3 sections"),null;try{const e=hd(n);return e?JSON.parse(e):(xf("Failed to decode base64 JWT payload"),null)}catch(VA){return xf("Caught error parsing JWT payload as JSON",null===VA||void 0===VA?void 0:VA.toString()),null}}function rp(e){const t=np(e);return Af(t,"internal-error"),Af("undefined"!==typeof t.exp,"internal-error"),Af("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ip(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(VA){throw VA instanceof Rd&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(VA)&&e.auth.currentUser===e&&await e.auth.signOut(),VA}}class op{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(VA){return void((null===VA||void 0===VA?void 0:VA.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class sp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ep(this.lastLoginAt),this.creationTime=ep(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ap(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ip(e,Zf(n,{idToken:r}));Af(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?lp(o.providerUserInfo):[],a=(l=e.providerData,c=s,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new sp(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function lp(e){return e.map(e=>{var{providerId:t}=e,n=yf(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class cp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Af(e.idToken,"internal-error"),Af("undefined"!==typeof e.idToken,"internal-error"),Af("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):rp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Af(0!==e.length,"internal-error");const t=rp(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Af(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await qf(e,{},async()=>{const n=jd({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await Kf(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:s,body:n};return e.emulatorConfig&&wd(e.emulatorConfig.host)&&(a.credentials="include"),Uf.fetch()(o,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new cp;return n&&(Af("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Af("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Af("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cp,this.toJSON())}_performRefresh(){return Rf("not implemented")}}function up(e,t){Af("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class dp{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=yf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new op(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new sp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ip(this,this.stsTokenManager.getToken(this.auth,e));return Af(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=zd(e),r=await n.getIdToken(t),i=np(r);Af(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ep(tp(i.auth_time)),issuedAtTime:ep(tp(i.iat)),expirationTime:ep(tp(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=zd(e);await ap(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Af(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dp(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Af(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ap(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zh(this.auth.app))return Promise.reject(Cf(this.auth));const e=await this.getIdToken();return await ip(this,async function(e,t){return Hf(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:k,stsTokenManager:x}=t;Af(v&&x,e,"internal-error");const S=cp.fromJSON(this.name,x);Af("string"===typeof v,e,"internal-error"),up(u,e.name),up(d,e.name),Af("boolean"===typeof b,e,"internal-error"),Af("boolean"===typeof w,e,"internal-error"),up(h,e.name),up(f,e.name),up(p,e.name),up(g,e.name),up(m,e.name),up(y,e.name);const _=new dp({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:y});return k&&Array.isArray(k)&&(_.providerData=k.map(e=>Object.assign({},e))),g&&(_._redirectEventId=g),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new cp;r.updateFromServerResponse(t);const i=new dp({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ap(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Af(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?lp(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new cp;s.updateFromIdToken(n);const a=new dp({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new sp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const hp=new Map;function fp(e){Pf(e instanceof Function,"Expected a class definition");let t=hp.get(e);return t?(Pf(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,hp.set(e,t),t)}class pp{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pp.type="NONE";const gp=pp;function mp(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class yp{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=mp(this.userKey,r.apiKey,i),this.fullPersistenceKey=mp("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Zf(this.auth,{idToken:e}).catch(()=>{});return t?dp._fromGetAccountInfoResponse(this.auth,t,e):null}return dp._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new yp(fp(gp),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||fp(gp);const o=mp(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){let n;if("string"===typeof t){const r=await Zf(e,{idToken:t}).catch(()=>{});if(!r)break;n=await dp._fromGetAccountInfoResponse(e,r,t)}else n=dp._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(l){}})),new yp(i,e,n)):new yp(i,e,n)}}function vp(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(xp(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(bp(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_p(t))return"Blackberry";if(Ep(t))return"Webos";if(wp(t))return"Safari";if((t.includes("chrome/")||kp(t))&&!t.includes("edge/"))return"Chrome";if(Sp(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function bp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd();return/firefox\//i.test(e)}function wp(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd();return/crios\//i.test(e)}function xp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd();return/iemobile/i.test(e)}function Sp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd();return/android/i.test(e)}function _p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd();return/blackberry/i.test(e)}function Ep(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd();return/webos/i.test(e)}function Cp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Tp(){return function(){const e=Cd();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd();return Cp(e)||Sp(e)||Ep(e)||_p(e)||/windows phone/i.test(e)||xp(e)}function Ap(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=vp(Cd());break;case"Worker":t="".concat(vp(Cd()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(nf,"/").concat(r)}class Rp{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(VA){r(VA)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(VA){t.reverse();for(const n of t)try{n()}catch(Ft){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===VA||void 0===VA?void 0:VA.message})}}}class Pp{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Op{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dp(this),this.idTokenSubscription=new Dp(this),this.beforeStateQueue=new Rp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fp(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await yp.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(VA){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Zf(this,{idToken:e}),n=await dp._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Zh(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(VA){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(VA))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Af(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(VA){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ap(e)}catch(VA){if((null===VA||void 0===VA?void 0:VA.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zh(this.app))return Promise.reject(Cf(this));const t=e?zd(e):null;return t&&Af(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Af(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zh(this.app)?Promise.reject(Cf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zh(this.app)?Promise.reject(Cf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fp(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Hf(e,"GET","/v2/passwordPolicy",Bf(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Pp(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pd("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Hf(e,"POST","/v2/accounts:revokeToken",Bf(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fp(e)||this._popupRedirectResolver;Af(t,this,"argument-error"),this.redirectPersistenceManager=await yp.create(this,[fp(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Af(s,this,"internal-error"),s.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Af(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ap(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Zh(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(kf.logLevel<=Gd.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];kf.warn("Auth (".concat(nf,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Np(e){return zd(e)}class Dp{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Ud(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Af(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let jp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lp(e){return jp.loadJS(e)}function Mp(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Up{constructor(){this.enterprise=new Fp}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Fp{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const zp="NO_RECAPTCHA";class Vp{constructor(e){this.type="recaptcha-enterprise",this.auth=Np(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Yf(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(zp)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Up).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Xf(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Jf(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Yf(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=jp.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Lp(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Bp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new Vp(e);let s;if(i)s=zp;else try{s=await o.verify(n)}catch(l){s=await o.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Hp(e,t,n,r,i){var o,s;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Bp(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Bp(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("PHONE_PROVIDER")){const i=await Bp(e,t,n);return r(e,i).catch(async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Bp(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Bp(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function qp(e){const t=Np(e),n=await Xf(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Jf(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Vp(t).verify()}}function Wp(e,t,n){const r=Np(e);Af(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Kp(t),{host:s,port:a}=function(e){const t=Kp(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Gp(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Gp(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(o,"//").concat(s).concat(l,"/")},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Af(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Af(Nd(c,r.config.emulator)&&Nd(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,wd(s)?(kd("".concat(o,"//").concat(s).concat(l)),Ed("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Kp(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gp(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class $p{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rf("not implemented")}_getIdTokenResponse(e){return Rf("not implemented")}_linkToIdToken(e,t){return Rf("not implemented")}_getReauthenticationResolver(e){return Rf("not implemented")}}async function Qp(e,t){return Hf(e,"POST","/v1/accounts:signUp",t)}async function Yp(e,t){return Wf(e,"POST","/v1/accounts:signInWithPassword",Bf(e,t))}async function Jp(e,t){return Hf(e,"POST","/v1/accounts:sendOobCode",Bf(e,t))}async function Xp(e,t){return Jp(e,t)}class Zp extends $p{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Zp(e,t,"password")}static _fromEmailAndCode(e,t){return new Zp(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Hp(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Yp,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Wf(e,"POST","/v1/accounts:signInWithEmailLink",Bf(e,t))}(e,{email:this._email,oobCode:this._password});default:Sf(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Hp(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qp,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Wf(e,"POST","/v1/accounts:signInWithEmailLink",Bf(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Sf(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function eg(e,t){return Wf(e,"POST","/v1/accounts:signInWithIdp",Bf(e,t))}class tg extends $p{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new tg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sf("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=yf(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new tg(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return eg(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,eg(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,eg(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=jd(t)}return e}}async function ng(e,t){return Hf(e,"POST","/v1/accounts:sendVerificationCode",Bf(e,t))}const rg={USER_NOT_FOUND:"user-not-found"};class ig extends $p{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ig({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ig({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Wf(e,"POST","/v1/accounts:signInWithPhoneNumber",Bf(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Wf(e,"POST","/v1/accounts:signInWithPhoneNumber",Bf(e,t));if(n.temporaryProof)throw Qf(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Wf(e,"POST","/v1/accounts:signInWithPhoneNumber",Bf(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),rg)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ig({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class og{constructor(e){var t,n,r,i,o,s;const a=Ld(Md(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Af(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.lang)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=Ld(Md(e)).link,n=t?Ld(Md(t)).deep_link_id:null,r=Ld(Md(e)).deep_link_id;return(r?Ld(Md(r)).link:null)||r||n||t||e}(e);try{return new og(t)}catch(n){return null}}}class sg{constructor(){this.providerId=sg.PROVIDER_ID}static credential(e,t){return Zp._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=og.parseLink(t);return Af(n,"argument-error"),Zp._fromEmailAndCode(e,n.code,n.tenantId)}}sg.PROVIDER_ID="password",sg.EMAIL_PASSWORD_SIGN_IN_METHOD="password",sg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ag{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class lg extends ag{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cg extends lg{constructor(){super("facebook.com")}static credential(e){return tg._fromParams({providerId:cg.PROVIDER_ID,signInMethod:cg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cg.credentialFromTaggedObject(e)}static credentialFromError(e){return cg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return cg.credential(t.oauthAccessToken)}catch(n){return null}}}cg.FACEBOOK_SIGN_IN_METHOD="facebook.com",cg.PROVIDER_ID="facebook.com";class ug extends lg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return tg._fromParams({providerId:ug.PROVIDER_ID,signInMethod:ug.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ug.credentialFromTaggedObject(e)}static credentialFromError(e){return ug.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ug.credential(n,r)}catch(i){return null}}}ug.GOOGLE_SIGN_IN_METHOD="google.com",ug.PROVIDER_ID="google.com";class dg extends lg{constructor(){super("github.com")}static credential(e){return tg._fromParams({providerId:dg.PROVIDER_ID,signInMethod:dg.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dg.credentialFromTaggedObject(e)}static credentialFromError(e){return dg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return dg.credential(t.oauthAccessToken)}catch(n){return null}}}dg.GITHUB_SIGN_IN_METHOD="github.com",dg.PROVIDER_ID="github.com";class hg extends lg{constructor(){super("twitter.com")}static credential(e,t){return tg._fromParams({providerId:hg.PROVIDER_ID,signInMethod:hg.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hg.credentialFromTaggedObject(e)}static credentialFromError(e){return hg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return hg.credential(n,r)}catch(i){return null}}}async function fg(e,t){return Wf(e,"POST","/v1/accounts:signUp",Bf(e,t))}hg.TWITTER_SIGN_IN_METHOD="twitter.com",hg.PROVIDER_ID="twitter.com";class pg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await dp._fromIdTokenResponse(e,n,r),o=gg(n);return new pg({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=gg(n);return new pg({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function gg(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class mg extends Rd{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,mg.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new mg(e,t,n,r)}}function yg(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw mg._fromErrorAndOperation(e,n,t,r);throw n})}async function vg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ip(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return pg._forOperation(e,"link",r)}async function bg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Zh(r.app))return Promise.reject(Cf(r));const i="reauthenticate";try{const o=await ip(e,yg(r,i,t,e),n);Af(o.idToken,r,"internal-error");const s=np(o.idToken);Af(s,r,"internal-error");const{sub:a}=s;return Af(e.uid===a,r,"user-mismatch"),pg._forOperation(e,i,o)}catch(VA){throw(null===VA||void 0===VA?void 0:VA.code)==="auth/".concat("user-not-found")&&Sf(r,"user-mismatch"),VA}}async function wg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Zh(e.app))return Promise.reject(Cf(e));const r="signIn",i=await yg(e,r,t),o=await pg._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function kg(e,t){return wg(Np(e),t)}function xg(e,t,n){var r;Af((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Af("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Af("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Af(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Af(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Sg(e){const t=Np(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function _g(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=zd(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await ip(i,async function(e,t){return Hf(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}function Eg(e,t){return Hf(e,"POST","/v2/accounts/mfaEnrollment:start",Bf(e,t))}new WeakMap;const Cg="__sak";class Tg{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cg,"1"),this.storage.removeItem(Cg),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ig extends Tg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ip(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Tp()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ig.type="LOCAL";const Ag=Ig;function Rg(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Pg(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Og{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Pg(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Rg(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Pg(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Pg(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Rg(n);const i=setInterval(()=>{const e=Rg(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Og.type="COOKIE";class Ng extends Tg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ng.type="SESSION";const Dg=Ng;class jg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new jg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Lg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}jg.receivers=[];class Mg{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((s,a)=>{const l=Lg("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Ug(){return window}function Fg(){return"undefined"!==typeof Ug().WorkerGlobalScope&&"function"===typeof Ug().importScripts}const zg="firebaseLocalStorageDb",Vg="firebaseLocalStorage",Bg="fbase_key";class Hg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function qg(e,t){return e.transaction([Vg],t?"readwrite":"readonly").objectStore(Vg)}function Wg(){const e=indexedDB.open(zg,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Vg,{keyPath:Bg})}catch(VA){n(VA)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Vg)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(zg);return new Hg(e).toPromise()}(),t(await Wg()))})})}async function Kg(e,t,n){const r=qg(e,!0).put({[Bg]:t,value:n});return new Hg(r).toPromise()}function Gg(e,t){const n=qg(e,!0).delete(t);return new Hg(n).toPromise()}class $g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Wg()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(VA){if(t++>3)throw VA;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jg._getInstance(Fg()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Mg(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wg();return await Kg(e,Cg,"1"),await Gg(e,Cg),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kg(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=qg(e,!1).get(t),r=await new Hg(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Gg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=qg(e,!1).getAll();return new Hg(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}$g.type="LOCAL";const Qg=$g;function Yg(e,t){return Hf(e,"POST","/v2/accounts/mfaSignIn:start",Bf(e,t))}Mp("rcb"),new Lf(3e4,6e4);const Jg="recaptcha";async function Xg(e,t,n){var r;if(!e._getRecaptchaConfig())try{await qp(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Af("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=Hp(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===zp){Af((null===n||void 0===n?void 0:n.type)===Jg,e,"argument-error");return Eg(e,await Zg(e,t,n))}return Eg(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{Af("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Af(o,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Hp(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===zp){Af((null===n||void 0===n?void 0:n.type)===Jg,e,"argument-error");return Yg(e,await Zg(e,t,n))}return Yg(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Hp(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===zp){Af((null===n||void 0===n?void 0:n.type)===Jg,e,"argument-error");return ng(e,await Zg(e,t,n))}return ng(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Zg(e,t,n){Af(n.type===Jg,e,"argument-error");const r=await n.verify();Af("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class em{constructor(e){this.providerId=em.PROVIDER_ID,this.auth=Np(e)}verifyPhoneNumber(e,t){return Xg(this.auth,e,zd(t))}static credential(e,t){return ig._fromVerification(e,t)}static credentialFromResult(e){const t=e;return em.credentialFromTaggedObject(t)}static credentialFromError(e){return em.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?ig._fromTokenResponse(n,r):null}}function tm(e,t){return t?fp(t):(Af(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}em.PROVIDER_ID="phone",em.PHONE_SIGN_IN_METHOD="phone";class nm extends $p{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return eg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return eg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rm(e){return wg(e.auth,new nm(e),e.bypassAuthState)}function im(e){const{auth:t,user:n}=e;return Af(n,t,"internal-error"),bg(n,new nm(e),e.bypassAuthState)}async function om(e){const{auth:t,user:n}=e;return Af(n,t,"internal-error"),vg(n,new nm(e),e.bypassAuthState)}class sm{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(VA){this.reject(VA)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(VA){this.reject(VA)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rm;case"linkViaPopup":case"linkViaRedirect":return om;case"reauthViaPopup":case"reauthViaRedirect":return im;default:Sf(this.auth,"internal-error")}}resolve(e){Pf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const am=new Lf(2e3,1e4);async function lm(e,t,n){if(Zh(e.app))return Promise.reject(_f(e,"operation-not-supported-in-this-environment"));const r=Np(e);Tf(e,t,ag);const i=tm(r,n);return new cm(r,"signInViaPopup",t,i).executeNotNull()}class cm extends sm{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,cm.currentPopupAction&&cm.currentPopupAction.cancel(),cm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Af(e,this.auth,"internal-error"),e}async onExecution(){Pf(1===this.filter.length,"Popup operations only handle one event");const e=Lg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(_f(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(_f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_f(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,am.get())};e()}}cm.currentPopupAction=null;const um=new Map;class dm extends sm{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=um.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=pm(t),r=fm(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(VA){e=()=>Promise.reject(VA)}um.set(this.auth._key(),e)}return this.bypassAuthState||um.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function hm(e,t){um.set(e._key(),t)}function fm(e){return fp(e._redirectPersistence)}function pm(e){return mp("pendingRedirect",e.config.apiKey,e.name)}async function gm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Zh(e.app))return Promise.reject(Cf(e));const r=Np(e),i=tm(r,t),o=new dm(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class mm{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vm(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!vm(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(_f(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ym(e))}saveEventToCache(e){this.cachedEventUids.add(ym(e)),this.lastProcessedEventTime=Date.now()}}function ym(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function vm(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const bm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wm=/^https?/;async function km(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Hf(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(xm(r))return}catch(n){}Sf(e,"unauthorized-domain")}function xm(e){const t=Of(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!wm.test(n))return!1;if(bm.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Sm=new Lf(3e4,6e4);function _m(){const e=Ug().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Em(e){return new Promise((t,n)=>{var r,i,o;function s(){_m(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_m(),n(_f(e,"network-request-failed"))},timeout:Sm.get()})}if(null===(i=null===(r=Ug().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Ug().gapi)||void 0===o?void 0:o.load)){const t=Mp("iframefcb");return Ug()[t]=()=>{gapi.load?s():n(_f(e,"network-request-failed"))},Lp("".concat(jp.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw Cm=null,e})}let Cm=null;const Tm=new Lf(5e3,15e3),Im={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Am=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rm(e){const t=e.config;Af(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Mf(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:nf},i=Am.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(jd(r).slice(1))}async function Pm(e){const t=await function(e){return Cm=Cm||Em(e),Cm}(e),n=Ug().gapi;return Af(n,e,"internal-error"),t.open({where:document.body,url:Rm(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Im,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=_f(e,"network-request-failed"),o=Ug().setTimeout(()=>{r(i)},Tm.get());function s(){Ug().clearTimeout(o),n(t)}t.ping(s).then(s,()=>{r(i)})}))}const Om={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Nm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(VA){}}}function Dm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Om),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Cd().toLowerCase();n&&(a=kp(c)?"_blank":n),bp(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Cp(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Nm(null);const d=window.open(t||"",a,u);Af(d,e,"popup-blocked");try{d.focus()}catch(VA){}return new Nm(d)}const jm="__/auth/handler",Lm="emulator/auth/handler",Mm=encodeURIComponent("fac");async function Um(e,t,n,r,i,o){Af(e.config.authDomain,e,"auth-domain-config-required"),Af(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:nf,eventId:i};if(t instanceof ag){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof lg){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Mm,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(jm);return Mf(t,Lm)}(e),"?").concat(jd(a).slice(1)).concat(c)}const Fm="webStorageSupport";const zm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dg,this._completeRedirectFn=gm,this._overrideRedirectResult=hm}async _openPopup(e,t,n,r){var i;Pf(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Dm(e,await Um(e,t,n,Of(),r),Lg())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ug().location.href=e}(await Um(e,t,n,Of(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Pf(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Pm(e),n=new mm(e);return t.register("authEvent",t=>{Af(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fm,{type:Fm},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Fm];void 0!==i&&t(!!i),Sf(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=km(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ip()||wp()||Cp()}};var Vm="@firebase/auth",Bm="1.10.7";class Hm{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Af(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const qm=vd("authIdTokenMaxAge")||300;let Wm=null;var Km;jp={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=_f("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Km="Browser",Jh(new Vd("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Af(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:Km,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ap(Km)},c=new Op(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fp);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Jh(new Vd("auth-internal",e=>(e=>new Hm(e))(Np(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),sf(Vm,Bm,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Km)),sf(Vm,Bm,"esm2017");var Gm,$m,Qm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ym={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,s=0;s<t;){if(0==o)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[o++]=e.charCodeAt(s++),o==this.blockSize){n(this,i),o=0;break}}else for(;s<t;)if(i[o++]=e[s++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(s(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(d(e))return t=m(h(e),t),new g(h(t.g),h(t.h));if(d(t))return t=m(e,h(t)),new g(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),o=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=o.add(r);0>=c.l(e)&&(i=i.add(n),o=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(o=s(n)).j(t);d(c)||0<c.l(e);)c=(o=s(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=f(e,c)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],s=0;s<i;s++)o[s]=0<t?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=s(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,o=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var s=i+(65535&this.i(o))+(65535&e.i(o)),a=(s>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=a>>>16,s&=65535,a&=65535,n[o]=a<<16|s}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return s(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(o)>>>16,m=65535&e.i(o);n[2*i+2*o]+=f*m,p(n,2*i+2*o),n[2*i+2*o+1]+=l*m,p(n,2*i+2*o+1),n[2*i+2*o+1]+=f*g,p(n,2*i+2*o+1),n[2*i+2*o+2]+=l*g,p(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,$m=Ym.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=s(Math.pow(n,8)),i=a,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),n);8>l?(l=s(Math.pow(n,l)),i=i.j(l).add(s(c))):i=(i=i.j(r)).add(s(c))}return i},Gm=Ym.Integer=r}).apply("undefined"!==typeof Qm?Qm:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Jm,Xm,Zm,ey,ty,ny,ry,iy,oy="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},sy={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof oy&&oy];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in i))break e;i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function x(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout(()=>{throw e},0)}function _(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new C,e=>e.reset());class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,I=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},R=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(P)}};var P=()=>{for(var e;e=_();){try{e.h.call(e.g)}catch(n){S(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function O(){this.s=this.s,this.C=this.C}function N(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},N.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function j(e,t){if(N.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(Ot){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&j.aa.h.call(this)}}d(j,N);var L={2:"touch",3:"pen",4:"mouse"};j.prototype.h=function(){j.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function H(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=H(e,t,r,i);return-1<s?(t=e[s],n||(t.fa=!1)):((t=new F(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),W={};function K(e,t,n,r,i){if(r&&r.once)return $(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)K(e,t[o],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,s(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=s(i)?!!i.capture:!!i,l=Z(e);if(l||(e[q]=l=new V(e)),(n=l.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function $(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)$(e,t[o],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,s(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Q(e,t[o],n,r,i);else r=s(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=H(o=e.g[t],n,r,i))&&(z(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=H(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):z(e)}}}function J(e){return e in W?W[e]:W[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new j(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){O.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new N(t,e);else if(t instanceof N)t.target=t.target||e;else{var i=t;k(t=new N(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=ie(s,r,!0,t)&&i}if(i=ie(s=t.g=e,r,!0,t)&&i,i=ie(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ie(s=t.g=n[o],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.da&&s.capture==n){var a=s.listener,l=s.ha||s.src;s.fa&&B(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function oe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function se(e){e.g=oe(()=>{e.g=null,e.i&&(e.i=!1,se(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,O),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends O{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){O.call(this),this.h=e,this.g={}}d(le,O);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){N.call(this,"d")}function be(){N.call(this,"c")}d(ve,N),d(be,N);var we={},ke=null;function xe(){return ke=ke||new ne}function Se(e){N.call(this,we.La,e)}function _e(e){const t=xe();re(t,new Se(t))}function Ee(e,t){N.call(this,we.STAT_EVENT,e),this.stat=t}function Ce(e){const t=xe();re(t,new Ee(t,e))}function Te(e,t){N.call(this,we.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ae(){this.g=!0}function Re(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return de(n)}catch(Nt){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",d(Se,N),we.STAT_EVENT="statevent",d(Ee,N),we.Ma="timingevent",d(Te,N),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var Pe,Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function je(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Pe=new De;var Me={},Ue={};function Fe(e,t,n){e.L=1,e.v=dt(st(t)),e.m=n,e.P=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),He(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=mn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var o=0;o<i.length;o++){var s=K(n,i[o],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_e(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function He(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function We(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||dn(e.j,e)}function Ge(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function $e(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;un(n),Zt(n)}an(n),Ce(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else fn(n,11)}else if((e.K||n.g==e)&&un(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var s=e;if((r=n).qa=gn(r,r.J?r.ia:null,r.W),s.K){tt(r.h,s);var a=s,l=r.L;l&&(a.I=l),a.B&&(We(a),He(a)),r.g=s}else sn(r);0<n.i.length&&tn(n)}else"stop"!=c[0]&&"close"!=c[0]||fn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?fn(n,7):Xt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}_e()}catch(u){}}je.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==$t(e)?t.j():this.Y(e)},je.prototype.Y=function(e){try{if(e==this.g)e:{const h=$t(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Qt(this.g)))){this.J||4!=h||7==t||_e(),We(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Qt(this.g);e="";var o=r.length,s=4==$t(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(s&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ce(12),Ge(this),Ke(this);break e}Re(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$e(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Ue){4==h&&(this.s=4,Ce(14),n=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Ce(15),Re(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Re(this.i,this.l,e,null),$e(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),ln(d),d.M=!0,Ce(11))}}else Re(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Re(this.i,this.l,a,null),$e(this,a);4==h&&Ge(this),this.o&&!this.J&&(4==h?dn(this.j,this):(this.o=!1,He(this)))}else(function(e){const t={};e=(e.g&&2<=$t(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=x(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Ge(this),Ke(this)}}}catch(Ut){}},je.prototype.cancel=function(){this.J=!0,Ge(this)},je.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(_e(),Ce(17)),Ge(this),this.s=2,Ke(this)):qe(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new kt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new kt(null,this.h))}function st(e){return new ot(e)}function at(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof kt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Et(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new kt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var gt,mt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function kt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function St(e,t){xt(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _t(e,t){return xt(e),t=Ct(e,t),e.g.has(t)}function Et(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),h(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(Ot){}}function It(){this.g=new fe}function At(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;s(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(VA){throw t.push(r+"type="+encodeURIComponent("_badmap")),VA}}function Rt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function jt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Lt(e)}function Lt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ft(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function zt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=kt.prototype).add=function(e,t){xt(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"===typeof e)_t(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,_t(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.V(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")},d(Rt,pe),Rt.prototype.g=function(){return new Pt(this.l,this.j)},Rt.prototype.i=(gt={},function(){return gt}),d(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Lt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Lt(this)),this.g&&(this.readyState=3,Lt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?jt(this):Lt(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,jt(this))},e.Qa=function(e){this.g&&(this.response=e,jt(this))},e.ga=function(){this.g&&jt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(zt,ne);var Vt=/^https?$/i,Bt=["POST","PUT"];function Ht(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,qt(e),Kt(e)}function qt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Wt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=$t(e)||2!=e.Z()))if(e.u&&4==$t(e))oe(e.Ea,0,e);else if(re(e,"readystatechange"),4==$t(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var s=String(e.D).match(it)[1]||null;!s&&i.self&&i.self.location&&(s=i.self.location.protocol.slice(0,-1)),o=!Vt.test(s?s.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<$t(e)?e.g.statusText:""}catch(Nt){a=""}e.l=a+" ["+e.Z()+"]",qt(e)}}finally{Kt(e)}}}function Kt(e,t){if(e.g){Gt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(VA){}}}function Gt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function $t(e){return e.g?e.g.readyState:0}function Qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Yt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Jt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yt("baseRetryDelayMs",5e3,e),this.cb=Yt("retryDelaySeedMs",1e4,e),this.Wa=Yt("forwardChannelMaxRetries",2,e),this.wa=Yt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Xt(e){if(en(e),3==e.G){var t=e.U++,n=st(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),rn(e,n),(t=new je(e,e.j,t)).L=2,t.v=dt(st(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=mn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),He(t)}pn(e)}function Zt(e){e.g&&(ln(e),e.g.cancel(),e.g=null)}function en(e){Zt(e),e.u&&(i.clearTimeout(e.u),e.u=null),un(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function tn(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||R(),I||(T(),I=!0),A.add(t,e),e.B=0}}function nn(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),rn(e,r),e.m&&e.o&&Ft(r,e.m,e.o),n=new je(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=on(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function rn(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function on(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{At(a,e,"req"+n+"_")}catch(Ut){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function sn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||R(),I||(T(),I=!0),A.add(t,e),e.v=0}}function an(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),hn(e,e.v)),e.v++,!0)}function ln(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function cn(e){e.g=new je(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),rn(e,t),e.m&&e.o&&Ft(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(st(t)),n.m=null,n.P=!0,ze(n,e)}function un(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function dn(e,t){var n=null;if(e.g==t){un(e),ln(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=xe(),new Te(r,n)),tn(e)}else sn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),hn(e,e.B)),e.B++,!0))}(e,t)||2==r&&an(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:fn(e,5);break;case 4:fn(e,10);break;case 3:fn(e,6);break;default:fn(e,2)}}function hn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function fn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),dt(r),t?function(e,t){const n=new Ae;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Tt(0,0,!1,t)})}(r.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),pn(e),en(e)}function pn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function gn(e,t,n){var r=n instanceof ot?st(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var s=new ot(null);r&&at(s,r),t&&(s.g=t),o&&lt(s,o),n&&(s.l=n),r=s}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),rn(e,r),r}function mn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new zt(new Rt({eb:n})):new zt(e.pa)).Ha(e.J),t}function yn(){}function vn(){}function bn(e,t){ne.call(this),this.g=new Jt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new xn(this)}function wn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function kn(){be.call(this),this.status=1}function xn(e){this.g=e}(e=zt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?ge(this.o):ge(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Ot){return void Ht(this,Ot)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Bt,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,s]of n)this.g.setRequestHeader(i,s);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gt(this),this.u=!0,this.g.send(e),this.u=!1}catch(Ot){Ht(this,Ot)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Kt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kt(this,!0)),zt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Wt(this):this.bb())},e.bb=function(){Wt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<$t(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Jt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ce(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=gn(this,null,this.W),tn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new je(this,this.j,e);let o=this.o;if(this.S&&(o?(o=b(o),k(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=on(this,i,t),ut(n=st(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),rn(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Mt(o)))+"&"+t:this.m&&Ft(n,this.m,o)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Fe(i,n,null)):Fe(i,n,t),this.G=2}}else 3==this.G&&(e?nn(this,e):0==this.i.length||Je(this.h)||nn(this))},e.Fa=function(){if(this.u=null,cn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),Zt(this),cn(this))},e.Za=function(){null!=this.C&&(this.C=null,Zt(this),an(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=yn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},vn.prototype.g=function(e,t){return new bn(e,t)},d(bn,ne),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Xt(this.g)},bn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&tn(t)},bn.prototype.N=function(){this.g.l=null,delete this.j,Xt(this.g),delete this.g,bn.aa.N.call(this)},d(wn,ve),d(kn,be),d(xn,yn),xn.prototype.ua=function(){re(this.g,"a")},xn.prototype.ta=function(e){re(this.g,new wn(e))},xn.prototype.sa=function(e){re(this.g,new kn)},xn.prototype.ra=function(){re(this.g,"b")},vn.prototype.createWebChannel=vn.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,iy=sy.createWebChannelTransport=function(){return new vn},ry=sy.getStatEventTarget=function(){return xe()},ny=sy.Event=we,ty=sy.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,ey=sy.ErrorCode=Oe,Ne.COMPLETE="complete",Zm=sy.EventType=Ne,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Xm=sy.WebChannel=me,sy.FetchXmlHttpFactory=Rt,zt.prototype.listenOnce=zt.prototype.L,zt.prototype.getLastError=zt.prototype.Ka,zt.prototype.getLastErrorCode=zt.prototype.Ba,zt.prototype.getStatus=zt.prototype.Z,zt.prototype.getResponseJson=zt.prototype.Oa,zt.prototype.getResponseText=zt.prototype.oa,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Ha,Jm=sy.XhrIo=zt}).apply("undefined"!==typeof oy?oy:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ay="@firebase/firestore",ly="4.7.17";class cy{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cy.UNAUTHENTICATED=new cy(null),cy.GOOGLE_CREDENTIALS=new cy("google-credentials-uid"),cy.FIRST_PARTY=new cy("first-party-uid"),cy.MOCK_USER=new cy("mock-user");let uy="11.9.0";const dy=new Xd("@firebase/firestore");function hy(){return dy.logLevel}function fy(e){if(dy.logLevel<=Gd.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(my);dy.debug("Firestore (".concat(uy,"): ").concat(e),...i)}}function py(e){if(dy.logLevel<=Gd.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(my);dy.error("Firestore (".concat(uy,"): ").concat(e),...i)}}function gy(e){if(dy.logLevel<=Gd.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(my);dy.warn("Firestore (".concat(uy,"): ").concat(e),...i)}}function my(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function yy(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,vy(e,r,n)}function vy(e,t,n){let r="FIRESTORE (".concat(uy,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw py(r),new Error(r)}function by(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||vy(t,i,r)}function wy(e,t){return e}const ky={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xy extends Rd{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Sy{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _y{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ey{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cy.UNAUTHENTICATED))}shutdown(){}}class Cy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ty{constructor(e){this.t=e,this.currentUser=cy.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){by(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Sy;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Sy,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{fy("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(fy("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Sy)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(fy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(by("string"==typeof t.accessToken,31837,{l:t}),new _y(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return by(null===e||"string"==typeof e,2055,{h:e}),new cy(e)}}class Iy{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=cy.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ay{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Iy(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(cy.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ry{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Py{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zh(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){by(void 0===this.o,3512);const n=e=>{null!=e.error&&fy("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,fy("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{fy("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):fy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ry(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(by("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Ry(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Oy(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Ny(){return new TextEncoder}class Dy{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Oy(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function jy(e,t){return e<t?-1:e>t?1:0}function Ly(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return jy(r,i);{const o=Ny(),s=Uy(o.encode(My(e,n)),o.encode(My(t,n)));return 0!==s?s:jy(r,i)}}n+=r>65535?2:1}return jy(e.length,t.length)}function My(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Uy(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return jy(e[n],t[n]);return jy(e.length,t.length)}function Fy(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const zy=-62135596800,Vy=1e6;class By{static now(){return By.fromMillis(Date.now())}static fromDate(e){return By.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Vy);return new By(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xy(ky.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xy(ky.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zy)throw new xy(ky.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xy(ky.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vy}_compareTo(e){return this.seconds===e.seconds?jy(this.nanoseconds,e.nanoseconds):jy(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-zy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Hy{static fromTimestamp(e){return new Hy(e)}static min(){return new Hy(new By(0,0))}static max(){return new Hy(new By(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const qy="__name__";class Wy{constructor(e,t,n){void 0===t?t=0:t>e.length&&yy(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&yy(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Wy.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wy?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Wy.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return jy(e.length,t.length)}static compareSegments(e,t){const n=Wy.isNumericId(e),r=Wy.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Wy.extractNumericId(e).compare(Wy.extractNumericId(t)):Ly(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gm.fromString(e.substring(4,e.length-2))}}class Ky extends Wy{construct(e,t,n){return new Ky(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new xy(ky.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Ky(e)}static emptyPath(){return new Ky([])}}const Gy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $y extends Wy{construct(e,t,n){return new $y(e,t,n)}static isValidIdentifier(e){return Gy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$y.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===qy}static keyField(){return new $y([qy])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new xy(ky.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new xy(ky.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new xy(ky.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new xy(ky.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $y(t)}static emptyPath(){return new $y([])}}class Qy{constructor(e){this.path=e}static fromPath(e){return new Qy(Ky.fromString(e))}static fromName(e){return new Qy(Ky.fromString(e).popFirst(5))}static empty(){return new Qy(Ky.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ky.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ky.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qy(new Ky(e.slice()))}}const Yy=-1;class Jy{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Jy.UNKNOWN_ID=-1;function Xy(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Hy.fromTimestamp(1e9===r?new By(n+1,0):new By(n,r));return new ev(i,Qy.empty(),t)}function Zy(e){return new ev(e.readTime,e.key,Yy)}class ev{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ev(Hy.min(),Qy.empty(),Yy)}static max(){return new ev(Hy.max(),Qy.empty(),Yy)}}function tv(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Qy.comparator(e.documentKey,t.documentKey),0!==n?n:jy(e.largestBatchId,t.largestBatchId))}const nv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function iv(e){if(e.code!==ky.FAILED_PRECONDITION||e.message!==nv)throw e;fy("LocalStore","Unexpectedly lost primary lease")}class ov{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yy(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ov((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ov?t:ov.resolve(t)}catch(e){return ov.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ov.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ov.reject(t)}static resolve(e){return new ov((t,n)=>{t(e)})}static reject(e){return new ov((t,n)=>{n(e)})}static waitFor(e){return new ov((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=ov.resolve(!1);for(const n of e)t=t.next(e=>e?ov.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ov((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{o[l]=e,++s,s===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new ov((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function sv(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function av(e){return"IndexedDbTransactionError"===e.name}class lv{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}lv.le=-1;const cv=-1;function uv(e){return null==e}function dv(e){return 0===e&&1/e==-1/0}function hv(e){return"number"==typeof e&&Number.isInteger(e)&&!dv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const fv="\x01";function pv(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=mv(t)),t=gv(e.get(n),t);return mv(t)}function gv(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case fv:n+="\x01\x11";break;default:n+=t}}return n}function mv(e){return e+fv+"\x01"}const yv="remoteDocuments",vv="owner",bv="mutationQueues",wv="mutations";const kv="documentMutations",xv="remoteDocumentsV14",Sv="remoteDocumentGlobal",_v="targets",Ev="targetDocuments",Cv="targetGlobal",Tv="collectionParents",Iv="clientMetadata",Av="bundles",Rv="namedQueries",Pv="indexConfiguration",Ov="indexState",Nv="indexEntries",Dv="documentOverlays",jv="globals",Lv=[bv,wv,kv,yv,_v,vv,Cv,Ev,Iv,Sv,Tv,Av,Rv],Mv=[bv,wv,kv,xv,_v,vv,Cv,Ev,Iv,Sv,Tv,Av,Rv,Dv],Uv=Mv,Fv=[...Uv,Pv,Ov,Nv];function zv(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vv(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Bv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Hv{constructor(e,t){this.comparator=e,this.root=t||Wv.EMPTY}insert(e,t){return new Hv(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wv.BLACK,null,null))}remove(e){return new Hv(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wv.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qv(this.root,e,this.comparator,!1)}getReverseIterator(){return new qv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qv(this.root,e,this.comparator,!0)}}class qv{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wv{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Wv.RED,this.left=null!=r?r:Wv.EMPTY,this.right=null!=i?i:Wv.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Wv(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wv.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Wv.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wv.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wv.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yy(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yy(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw yy(27949);return e+(this.isRed()?0:1)}}Wv.EMPTY=null,Wv.RED=!0,Wv.BLACK=!1,Wv.EMPTY=new class{constructor(){this.size=0}get key(){throw yy(57766)}get value(){throw yy(16141)}get color(){throw yy(16727)}get left(){throw yy(29726)}get right(){throw yy(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Wv(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kv{constructor(e){this.comparator=e,this.data=new Hv(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gv(this.data.getIterator())}getIteratorFrom(e){return new Gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Kv))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kv(this.comparator);return t.data=e,t}}class Gv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class $v{constructor(e){this.fields=e,e.sort($y.comparator)}static empty(){return new $v([])}unionWith(e){let t=new Kv($y.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new $v(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fy(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Qv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Yv{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Qv("Invalid base64 string: "+e):e}}(e);return new Yv(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Yv(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jy(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yv.EMPTY_BYTE_STRING=new Yv("");const Jv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xv(e){if(by(!!e,39018),"string"==typeof e){let t=0;const n=Jv.exec(e);if(by(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Zv(e.seconds),nanos:Zv(e.nanos)}}function Zv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function eb(e){return"string"==typeof e?Yv.fromBase64String(e):Yv.fromUint8Array(e)}const tb="server_timestamp",nb="__type__",rb="__previous_value__",ib="__local_write_time__";function ob(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[nb])||void 0===n?void 0:n.stringValue)===tb}function sb(e){const t=e.mapValue.fields[rb];return ob(t)?sb(t):t}function ab(e){const t=Xv(e.mapValue.fields[ib].timestampValue);return new By(t.seconds,t.nanos)}class lb{constructor(e,t,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const cb="(default)";class ub{constructor(e,t){this.projectId=e,this.database=t||cb}static empty(){return new ub("","")}get isDefaultDatabase(){return this.database===cb}isEqual(e){return e instanceof ub&&e.projectId===this.projectId&&e.database===this.database}}const db="__type__",hb="__max__",fb={mapValue:{fields:{__type__:{stringValue:hb}}}},pb="__vector__",gb="value";function mb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ob(e)?4:Nb(e)?9007199254740991:Pb(e)?10:11:yy(28295,{value:e})}function yb(e,t){if(e===t)return!0;const n=mb(e);if(n!==mb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ab(e).isEqual(ab(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Xv(e.timestampValue),r=Xv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return eb(e.bytesValue).isEqual(eb(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Zv(e.geoPointValue.latitude)===Zv(t.geoPointValue.latitude)&&Zv(e.geoPointValue.longitude)===Zv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Zv(e.integerValue)===Zv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Zv(e.doubleValue),r=Zv(t.doubleValue);return n===r?dv(n)===dv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Fy(e.arrayValue.values||[],t.arrayValue.values||[],yb);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(zv(n)!==zv(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!yb(n[i],r[i])))return!1;return!0}(e,t);default:return yy(52216,{left:e})}}function vb(e,t){return void 0!==(e.values||[]).find(e=>yb(e,t))}function bb(e,t){if(e===t)return 0;const n=mb(e),r=mb(t);if(n!==r)return jy(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return jy(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Zv(e.integerValue||e.doubleValue),r=Zv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return wb(e.timestampValue,t.timestampValue);case 4:return wb(ab(e),ab(t));case 5:return Ly(e.stringValue,t.stringValue);case 6:return function(e,t){const n=eb(e),r=eb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=jy(n[i],r[i]);if(0!==e)return e}return jy(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=jy(Zv(e.latitude),Zv(t.latitude));return 0!==n?n:jy(Zv(e.longitude),Zv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return kb(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const s=e.fields||{},a=t.fields||{},l=null===(n=s[gb])||void 0===n?void 0:n.arrayValue,c=null===(r=a[gb])||void 0===r?void 0:r.arrayValue,u=jy((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(o=null==c?void 0:c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:kb(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===fb.mapValue&&t===fb.mapValue)return 0;if(e===fb.mapValue)return 1;if(t===fb.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=Ly(r[s],o[s]);if(0!==e)return e;const t=bb(n[r[s]],i[o[s]]);if(0!==t)return t}return jy(r.length,o.length)}(e.mapValue,t.mapValue);default:throw yy(23264,{Pe:n})}}function wb(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return jy(e,t);const n=Xv(e),r=Xv(t),i=jy(n.seconds,r.seconds);return 0!==i?i:jy(n.nanos,r.nanos)}function kb(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=bb(n[i],r[i]);if(e)return e}return jy(n.length,r.length)}function xb(e){return Sb(e)}function Sb(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Xv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return eb(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Qy.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Sb(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Sb(e.fields[i]));return n+"}"}(e.mapValue):yy(61005,{value:e})}function _b(e){switch(mb(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=sb(e);return t?16+_b(t):16;case 5:return 2*e.stringValue.length;case 6:return eb(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+_b(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Vv(e.fields,(e,n)=>{t+=e.length+_b(n)}),t}(e.mapValue);default:throw yy(13486,{value:e})}}function Eb(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Cb(e){return!!e&&"integerValue"in e}function Tb(e){return!!e&&"arrayValue"in e}function Ib(e){return!!e&&"nullValue"in e}function Ab(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Rb(e){return!!e&&"mapValue"in e}function Pb(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[db])||void 0===n?void 0:n.stringValue)===pb}function Ob(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Vv(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ob(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ob(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Nb(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===hb}class Db{constructor(e){this.value=e}static empty(){return new Db({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Rb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ob(t)}setAll(e){let t=$y.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ob(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Rb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yb(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Rb(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Vv(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Db(Ob(this.value))}}function jb(e){const t=[];return Vv(e.fields,(e,n)=>{const r=new $y([e]);if(Rb(n)){const e=jb(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new $v(t)}class Lb{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Lb(e,0,Hy.min(),Hy.min(),Hy.min(),Db.empty(),0)}static newFoundDocument(e,t,n,r){return new Lb(e,1,t,Hy.min(),n,r,0)}static newNoDocument(e,t){return new Lb(e,2,t,Hy.min(),Hy.min(),Db.empty(),0)}static newUnknownDocument(e,t){return new Lb(e,3,t,Hy.min(),Hy.min(),Db.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Hy.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Db.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Db.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Hy.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Lb&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lb(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Mb{constructor(e,t){this.position=e,this.inclusive=t}}function Ub(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Qy.comparator(Qy.fromName(s.referenceValue),n.key):bb(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Fb(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!yb(e.position[n],t.position[n]))return!1;return!0}class zb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Vb(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Bb{}class Hb extends Bb{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Jb(e,t,n):"array-contains"===t?new tw(e,n):"in"===t?new nw(e,n):"not-in"===t?new rw(e,n):"array-contains-any"===t?new iw(e,n):new Hb(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Xb(e,n):new Zb(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(bb(t,this.value)):null!==t&&mb(this.value)===mb(t)&&this.matchesComparison(bb(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yy(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qb extends Bb{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new qb(e,t)}matches(e){return Wb(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Wb(e){return"and"===e.op}function Kb(e){return Gb(e)&&Wb(e)}function Gb(e){for(const t of e.filters)if(t instanceof qb)return!1;return!0}function $b(e){if(e instanceof Hb)return e.field.canonicalString()+e.op.toString()+xb(e.value);if(Kb(e))return e.filters.map(e=>$b(e)).join(",");{const t=e.filters.map(e=>$b(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Qb(e,t){return e instanceof Hb?function(e,t){return t instanceof Hb&&e.op===t.op&&e.field.isEqual(t.field)&&yb(e.value,t.value)}(e,t):e instanceof qb?function(e,t){return t instanceof qb&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Qb(n,t.filters[r]),!0)}(e,t):void yy(19439)}function Yb(e){return e instanceof Hb?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(xb(e.value))}(e):e instanceof qb?function(e){return e.op.toString()+" {"+e.getFilters().map(Yb).join(" ,")+"}"}(e):"Filter"}class Jb extends Hb{constructor(e,t,n){super(e,t,n),this.key=Qy.fromName(n.referenceValue)}matches(e){const t=Qy.comparator(e.key,this.key);return this.matchesComparison(t)}}class Xb extends Hb{constructor(e,t){super(e,"in",t),this.keys=ew("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Zb extends Hb{constructor(e,t){super(e,"not-in",t),this.keys=ew("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ew(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Qy.fromName(e.referenceValue))}class tw extends Hb{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tb(t)&&vb(t.arrayValue,this.value)}}class nw extends Hb{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vb(this.value.arrayValue,t)}}class rw extends Hb{constructor(e,t){super(e,"not-in",t)}matches(e){if(vb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!vb(this.value.arrayValue,t)}}class iw extends Hb{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>vb(this.value.arrayValue,e))}}class ow{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Ie=null}}function sw(e){return new ow(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function aw(e){const t=wy(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>$b(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),uv(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>xb(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>xb(e)).join(",")),t.Ie=e}return t.Ie}function lw(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Vb(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Qb(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Fb(e.startAt,t.startAt)&&Fb(e.endAt,t.endAt)}function cw(e){return Qy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class uw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function dw(e,t,n,r,i,o,s,a){return new uw(e,t,n,r,i,o,s,a)}function hw(e){return new uw(e)}function fw(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function pw(e){return null!==e.collectionGroup}function gw(e){const t=wy(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Kv($y.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new zb(r,n))}),e.has($y.keyField().canonicalString())||t.Ee.push(new zb($y.keyField(),n))}return t.Ee}function mw(e){const t=wy(e);return t.de||(t.de=yw(t,gw(e))),t.de}function yw(e,t){if("F"===e.limitType)return sw(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new zb(e.field,t)});const n=e.endAt?new Mb(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Mb(e.startAt.position,e.startAt.inclusive):null;return sw(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function vw(e,t){const n=e.filters.concat([t]);return new uw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function bw(e,t,n){return new uw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ww(e,t){return lw(mw(e),mw(t))&&e.limitType===t.limitType}function kw(e){return"".concat(aw(mw(e)),"|lt:").concat(e.limitType)}function xw(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Yb(e)).join(", "),"]")),uv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>xb(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>xb(e)).join(",")),"Target(".concat(t,")")}(mw(e)),"; limitType=").concat(e.limitType,")")}function Sw(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Qy.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of gw(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ub(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,gw(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ub(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,gw(e),t))}(e,t)}function _w(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ew(e){return(t,n)=>{let r=!1;for(const i of gw(e)){const e=Cw(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Cw(e,t,n){const r=e.field.isKeyField()?Qy.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?bb(r,i):yy(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return yy(19790,{direction:e.dir})}}class Tw{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Vv(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Bv(this.inner)}size(){return this.innerSize}}const Iw=new Hv(Qy.comparator);function Aw(){return Iw}const Rw=new Hv(Qy.comparator);function Pw(){let e=Rw;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Ow(e){let t=Rw;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Nw(){return jw()}function Dw(){return jw()}function jw(){return new Tw(e=>e.toString(),(e,t)=>e.isEqual(t))}const Lw=new Hv(Qy.comparator),Mw=new Kv(Qy.comparator);function Uw(){let e=Mw;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Fw=new Kv(jy);function zw(){return Fw}function Vw(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dv(t)?"-0":t}}function Bw(e){return{integerValue:""+e}}function Hw(e,t){return hv(t)?Bw(t):Vw(e,t)}class qw{constructor(){this._=void 0}}function Ww(e,t,n){return e instanceof $w?function(e,t){const n={fields:{[nb]:{stringValue:tb},[ib]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ob(t)&&(t=sb(t)),t&&(n.fields[rb]=t),{mapValue:n}}(n,t):e instanceof Qw?Yw(e,t):e instanceof Jw?Xw(e,t):function(e,t){const n=Gw(e,t),r=ek(n)+ek(e.Re);return Cb(n)&&Cb(e.Re)?Bw(r):Vw(e.serializer,r)}(e,t)}function Kw(e,t,n){return e instanceof Qw?Yw(e,t):e instanceof Jw?Xw(e,t):n}function Gw(e,t){return e instanceof Zw?function(e){return Cb(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class $w extends qw{}class Qw extends qw{constructor(e){super(),this.elements=e}}function Yw(e,t){const n=tk(t);for(const r of e.elements)n.some(e=>yb(e,r))||n.push(r);return{arrayValue:{values:n}}}class Jw extends qw{constructor(e){super(),this.elements=e}}function Xw(e,t){let n=tk(t);for(const r of e.elements)n=n.filter(e=>!yb(e,r));return{arrayValue:{values:n}}}class Zw extends qw{constructor(e,t){super(),this.serializer=e,this.Re=t}}function ek(e){return Zv(e.integerValue||e.doubleValue)}function tk(e){return Tb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class nk{constructor(e,t){this.field=e,this.transform=t}}class rk{constructor(e,t){this.version=e,this.transformResults=t}}class ik{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ik}static exists(e){return new ik(void 0,e)}static updateTime(e){return new ik(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ok(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class sk{}function ak(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new yk(e.key,ik.none()):new hk(e.key,e.data,ik.none());{const n=e.data,r=Db.empty();let i=new Kv($y.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new fk(e.key,r,new $v(i.toArray()),ik.none())}}function lk(e,t,n){e instanceof hk?function(e,t,n){const r=e.value.clone(),i=gk(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof fk?function(e,t,n){if(!ok(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=gk(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(pk(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ck(e,t,n,r){return e instanceof hk?function(e,t,n,r){if(!ok(e.precondition,t))return n;const i=e.value.clone(),o=mk(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof fk?function(e,t,n,r){if(!ok(e.precondition,t))return n;const i=mk(e.fieldTransforms,r,t),o=t.data;return o.setAll(pk(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return ok(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function uk(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Gw(r.transform,e||null);null!=i&&(null===n&&(n=Db.empty()),n.set(r.field,i))}return n||null}function dk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Fy(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Qw&&t instanceof Qw||e instanceof Jw&&t instanceof Jw?Fy(e.elements,t.elements,yb):e instanceof Zw&&t instanceof Zw?yb(e.Re,t.Re):e instanceof $w&&t instanceof $w}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class hk extends sk{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class fk extends sk{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function pk(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function gk(e,t,n){const r=new Map;by(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Kw(s,a,n[i]))}return r}function mk(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Ww(e,o,t))}return r}class yk extends sk{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vk extends sk{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bk{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&lk(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ck(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ck(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Dw();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=ak(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(Hy.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Uw())}isEqual(e){return this.batchId===e.batchId&&Fy(this.mutations,e.mutations,(e,t)=>dk(e,t))&&Fy(this.baseMutations,e.baseMutations,(e,t)=>dk(e,t))}}class wk{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){by(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=Lw;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new wk(e,t,n,r)}}class kk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class xk{constructor(e,t){this.count=e,this.unchangedNames=t}}var Sk,_k;function Ek(e){switch(e){case ky.OK:return yy(64938);case ky.CANCELLED:case ky.UNKNOWN:case ky.DEADLINE_EXCEEDED:case ky.RESOURCE_EXHAUSTED:case ky.INTERNAL:case ky.UNAVAILABLE:case ky.UNAUTHENTICATED:return!1;case ky.INVALID_ARGUMENT:case ky.NOT_FOUND:case ky.ALREADY_EXISTS:case ky.PERMISSION_DENIED:case ky.FAILED_PRECONDITION:case ky.ABORTED:case ky.OUT_OF_RANGE:case ky.UNIMPLEMENTED:case ky.DATA_LOSS:return!0;default:return yy(15467,{code:e})}}function Ck(e){if(void 0===e)return py("GRPC error has no .code"),ky.UNKNOWN;switch(e){case Sk.OK:return ky.OK;case Sk.CANCELLED:return ky.CANCELLED;case Sk.UNKNOWN:return ky.UNKNOWN;case Sk.DEADLINE_EXCEEDED:return ky.DEADLINE_EXCEEDED;case Sk.RESOURCE_EXHAUSTED:return ky.RESOURCE_EXHAUSTED;case Sk.INTERNAL:return ky.INTERNAL;case Sk.UNAVAILABLE:return ky.UNAVAILABLE;case Sk.UNAUTHENTICATED:return ky.UNAUTHENTICATED;case Sk.INVALID_ARGUMENT:return ky.INVALID_ARGUMENT;case Sk.NOT_FOUND:return ky.NOT_FOUND;case Sk.ALREADY_EXISTS:return ky.ALREADY_EXISTS;case Sk.PERMISSION_DENIED:return ky.PERMISSION_DENIED;case Sk.FAILED_PRECONDITION:return ky.FAILED_PRECONDITION;case Sk.ABORTED:return ky.ABORTED;case Sk.OUT_OF_RANGE:return ky.OUT_OF_RANGE;case Sk.UNIMPLEMENTED:return ky.UNIMPLEMENTED;case Sk.DATA_LOSS:return ky.DATA_LOSS;default:return yy(39323,{code:e})}}(_k=Sk||(Sk={}))[_k.OK=0]="OK",_k[_k.CANCELLED=1]="CANCELLED",_k[_k.UNKNOWN=2]="UNKNOWN",_k[_k.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_k[_k.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_k[_k.NOT_FOUND=5]="NOT_FOUND",_k[_k.ALREADY_EXISTS=6]="ALREADY_EXISTS",_k[_k.PERMISSION_DENIED=7]="PERMISSION_DENIED",_k[_k.UNAUTHENTICATED=16]="UNAUTHENTICATED",_k[_k.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_k[_k.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_k[_k.ABORTED=10]="ABORTED",_k[_k.OUT_OF_RANGE=11]="OUT_OF_RANGE",_k[_k.UNIMPLEMENTED=12]="UNIMPLEMENTED",_k[_k.INTERNAL=13]="INTERNAL",_k[_k.UNAVAILABLE=14]="UNAVAILABLE",_k[_k.DATA_LOSS=15]="DATA_LOSS";let Tk=null;const Ik=new Gm([4294967295,4294967295],0);function Ak(e){const t=Ny().encode(e),n=new $m;return n.update(t),new Uint8Array(n.digest())}function Rk(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Gm([n,r],0),new Gm([i,o],0)]}class Pk{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ok("Invalid padding: ".concat(t));if(n<0)throw new Ok("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Ok("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Ok("Invalid padding when bitmap length is 0: ".concat(t));this.pe=8*e.length-t,this.ye=Gm.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(Gm.fromNumber(n)));return 1===r.compare(Ik)&&(r=new Gm([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=Ak(e),[n,r]=Rk(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Pk(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.pe)return;const t=Ak(e),[n,r]=Rk(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ok extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Nk{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Dk.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Nk(Hy.min(),r,new Hv(jy),Aw(),Uw())}}class Dk{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Dk(n,t,Uw(),Uw(),Uw())}}class jk{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class Lk{constructor(e,t){this.targetId=e,this.Ce=t}}class Mk{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yv.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Uk{constructor(){this.Fe=0,this.Me=Vk(),this.xe=Yv.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Uw(),t=Uw(),n=Uw();return this.Me.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:yy(38017,{changeType:i})}}),new Dk(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=Vk()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,by(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Fk{constructor(e){this.ze=e,this.je=new Map,this.He=Aw(),this.Je=zk(),this.Ye=zk(),this.Ze=new Hv(jy)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:yy(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((e,n)=>{this.it(n)&&t(n)})}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const i=r.target;if(cw(i))if(0===n){const e=new Qy(i.path);this.tt(t,e,Lb.newNoDocument(e,Hy.min()))}else by(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),i=n?this.lt(n,e,r):1;if(0!==i){this.st(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==Tk||Tk.ht(function(e,t,n,r,i){var o,s,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(o=null==h?void 0:h.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==h?void 0:h.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.Ce,this.ze.Pt(),n,i))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=eb(n).toUint8Array()}catch(e){if(e instanceof Qv)return gy("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new Pk(o,r,i)}catch(e){return gy(e instanceof Ok?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.pe?null:s}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.ze.Pt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.tt(t,n,null),r++)}),r}It(e){const t=new Map;this.je.forEach((n,r)=>{const i=this._t(r);if(i){if(n.current&&cw(i.target)){const t=new Qy(i.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,Lb.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}});let n=Uw();this.Ye.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.He.forEach((t,n)=>n.setReadTime(e));const r=new Nk(e,t,this.Ze,this.He,n);return this.He=Aw(),this.Je=zk(),this.Ye=zk(),this.Ze=new Hv(jy),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Uk,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Kv(jy),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Kv(jy),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||fy("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Uk),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function zk(){return new Hv(Qy.comparator)}function Vk(){return new Hv(Qy.comparator)}const Bk={asc:"ASCENDING",desc:"DESCENDING"},Hk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qk={and:"AND",or:"OR"};class Wk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kk(e,t){return e.useProto3Json||uv(t)?t:{value:t}}function Gk(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function $k(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Qk(e,t){return Gk(e,t.toTimestamp())}function Yk(e){return by(!!e,49232),Hy.fromTimestamp(function(e){const t=Xv(e);return new By(t.seconds,t.nanos)}(e))}function Jk(e,t){return Xk(e,t).canonicalString()}function Xk(e,t){const n=function(e){return new Ky(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Zk(e){const t=Ky.fromString(e);return by(bx(t),10190,{key:t.toString()}),t}function ex(e,t){return Jk(e.databaseId,t.path)}function tx(e,t){const n=Zk(t);if(n.get(1)!==e.databaseId.projectId)throw new xy(ky.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new xy(ky.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Qy(ox(n))}function nx(e,t){return Jk(e.databaseId,t)}function rx(e){const t=Zk(e);return 4===t.length?Ky.emptyPath():ox(t)}function ix(e){return new Ky(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ox(e){return by(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function sx(e,t,n){return{name:ex(e,t),fields:n.value.mapValue.fields}}function ax(e,t){let n;if(t instanceof hk)n={update:sx(e,t.key,t.value)};else if(t instanceof yk)n={delete:ex(e,t.key)};else if(t instanceof fk)n={update:sx(e,t.key,t.data),updateMask:vx(t.fieldMask)};else{if(!(t instanceof vk))return yy(16599,{ft:t.type});n={verify:ex(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof $w)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Qw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Jw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Zw)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw yy(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Qk(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:yy(27497)}(e,t.precondition)),n}function lx(e,t){return{documents:[nx(e,t.path)]}}function cx(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nx(e,i);const o=function(e){if(0!==e.length)return yx(qb.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:gx(e.field),direction:hx(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Kk(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:i}}function ux(e){let t=rx(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){by(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=dx(e);return t instanceof qb&&Kb(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map(e=>function(e){return new zb(mx(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,uv(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Mb(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Mb(n,t)}(n.endAt)),dw(t,i,s,o,a,"F",l,c)}function dx(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=mx(e.unaryFilter.field);return Hb.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=mx(e.unaryFilter.field);return Hb.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=mx(e.unaryFilter.field);return Hb.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=mx(e.unaryFilter.field);return Hb.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yy(61313);default:return yy(60726)}}(e):void 0!==e.fieldFilter?function(e){return Hb.create(mx(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yy(58110);default:return yy(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return qb.create(e.compositeFilter.filters.map(e=>dx(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return yy(1026)}}(e.compositeFilter.op))}(e):yy(30097,{filter:e})}function hx(e){return Bk[e]}function fx(e){return Hk[e]}function px(e){return qk[e]}function gx(e){return{fieldPath:e.canonicalString()}}function mx(e){return $y.fromServerFormat(e.fieldPath)}function yx(e){return e instanceof Hb?function(e){if("=="===e.op){if(Ab(e.value))return{unaryFilter:{field:gx(e.field),op:"IS_NAN"}};if(Ib(e.value))return{unaryFilter:{field:gx(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ab(e.value))return{unaryFilter:{field:gx(e.field),op:"IS_NOT_NAN"}};if(Ib(e.value))return{unaryFilter:{field:gx(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gx(e.field),op:fx(e.op),value:e.value}}}(e):e instanceof qb?function(e){const t=e.getFilters().map(e=>yx(e));return 1===t.length?t[0]:{compositeFilter:{op:px(e.op),filters:t}}}(e):yy(54877,{filter:e})}function vx(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function bx(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class wx{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hy.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Hy.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yv.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new wx(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wx(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wx(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wx(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class kx{constructor(e){this.wt=e}}function xx(e){const t=ux({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?bw(t,t.limit,"L"):t}class Sx{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Zv(e.integerValue));else if("doubleValue"in e){const n=Zv(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),dv(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=Xv(n)),t.Ot("".concat(n.seconds||"")),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(eb(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?Nb(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Pb(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):yy(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const i=e.fields||{};this.Mt(t,53);const o=gb,s=(null===(r=null===(n=i[o].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(Zv(s)),this.Nt(o,t),this.Ct(i[o],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),Qy.fromName(e).path.forEach(e=>{this.Mt(t,60),this.Kt(e,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}Sx.Wt=new Sx;class _x{constructor(){this.Cn=new Ex}addToCollectionParentIndex(e,t){return this.Cn.add(t),ov.resolve()}getCollectionParents(e,t){return ov.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ov.resolve()}deleteFieldIndex(e,t){return ov.resolve()}deleteAllFieldIndexes(e){return ov.resolve()}createTargetIndexes(e,t){return ov.resolve()}getDocumentsMatchingTarget(e,t){return ov.resolve(null)}getIndexType(e,t){return ov.resolve(0)}getFieldIndexes(e,t){return ov.resolve([])}getNextCollectionGroupToUpdate(e){return ov.resolve(null)}getMinOffset(e,t){return ov.resolve(ev.min())}getMinOffsetFromCollectionGroup(e,t){return ov.resolve(ev.min())}updateCollectionGroup(e,t,n){return ov.resolve()}updateIndexEntries(e,t){return ov.resolve()}}class Ex{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Kv(Ky.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Kv(Ky.comparator)).toArray()}}new Uint8Array(0);const Cx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tx=41943040;class Ix{static withCacheSize(e){return new Ix(e,Ix.DEFAULT_COLLECTION_PERCENTILE,Ix.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Ix.DEFAULT_COLLECTION_PERCENTILE=10,Ix.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ix.DEFAULT=new Ix(Tx,Ix.DEFAULT_COLLECTION_PERCENTILE,Ix.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ix.DISABLED=new Ix(-1,0,0);class Ax{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ax(0)}static lr(){return new Ax(-1)}}const Rx="LruGarbageCollector",Px=1048576;function Ox(e,t){let[n,r]=e,[i,o]=t;const s=jy(n,i);return 0===s?jy(r,o):s}class Nx{constructor(e){this.Er=e,this.buffer=new Kv(Ox),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Ox(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Dx{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Vr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return null!==this.Vr}mr(e){fy(Rx,"Garbage collection scheduled in ".concat(e,"ms")),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){av(e)?fy(Rx,"Ignoring IndexedDB error during garbage collection: ",e):await iv(e)}await this.mr(3e5)})}}class jx{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ov.resolve(lv.le);const n=new Nx(t);return this.gr.forEachTarget(e,e=>n.Rr(e.sequenceNumber)).next(()=>this.gr.yr(e,e=>n.Rr(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.gr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(fy("LruGarbageCollector","Garbage collection skipped; disabled"),ov.resolve(Cx)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(fy("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Cx):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let n,r,i,o,s,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(fy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,s=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),hy()<=Gd.DEBUG&&fy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),ov.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Lx(e,t){return new jx(e,t)}class Mx{constructor(){this.changes=new Tw(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Lb.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ov.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ux{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Fx{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&ck(n.mutation,e,$v.empty(),By.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Uw()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uw();const r=Nw();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Pw();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Nw();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Uw()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Aw();const o=jw(),s=jw();return t.forEach((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof fk)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),ck(s.mutation,t,s.mutation.getFieldMask(),By.now())):o.set(t.key,$v.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new Ux(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=jw();let r=new Hv((e,t)=>e-t),i=Uw();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||$v.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Uw()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=Dw();l.forEach(e=>{if(!i.has(e)){const r=ak(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return ov.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Qy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ov.resolve(Nw());let s=Yy,a=i;return o.next(t=>ov.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?ov.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Uw())).next(e=>({batchId:s,changes:Ow(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qy(t)).next(e=>{let t=Pw();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Pw();return this.indexManager.getCollectionParents(e,i).next(s=>ov.forEach(s,s=>{const a=function(e,t){return new uw(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Lb.newInvalidDocument(r)))});let n=Pw();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&ck(o.mutation,r,$v.empty(),By.now()),Sw(t,r)&&(n=n.insert(e,r))}),n})}}class zx{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return ov.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Yk(e.createTime)}}(t)),ov.resolve()}getNamedQuery(e,t){return ov.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(e){return{name:e.name,query:xx(e.bundledQuery),readTime:Yk(e.readTime)}}(t)),ov.resolve()}}class Vx{constructor(){this.overlays=new Hv(Qy.comparator),this.Qr=new Map}getOverlay(e,t){return ov.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Nw();return ov.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),ov.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Qr.delete(n)),ov.resolve()}getOverlaysForCollection(e,t,n){const r=Nw(),i=t.length+1,o=new Qy(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ov.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Hv((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Nw(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=Nw(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return ov.resolve(s)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new kk(t,n));let i=this.Qr.get(t);void 0===i&&(i=Uw(),this.Qr.set(t,i)),this.Qr.set(t,i.add(n.key))}}class Bx{constructor(){this.sessionToken=Yv.EMPTY_BYTE_STRING}getSessionToken(e){return ov.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ov.resolve()}}class Hx{constructor(){this.$r=new Kv(qx.Ur),this.Kr=new Kv(qx.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const n=new qx(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.zr(new qx(e,t))}jr(e,t){e.forEach(e=>this.removeReference(e,t))}Hr(e){const t=new Qy(new Ky([])),n=new qx(t,e),r=new qx(t,e+1),i=[];return this.Kr.forEachInRange([n,r],e=>{this.zr(e),i.push(e.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Qy(new Ky([])),n=new qx(t,e),r=new qx(t,e+1);let i=Uw();return this.Kr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new qx(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class qx{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Qy.comparator(e.key,t.key)||jy(e.Zr,t.Zr)}static Wr(e,t){return jy(e.Zr,t.Zr)||Qy.comparator(e.key,t.key)}}class Wx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Kv(qx.Ur)}checkEmpty(e){return ov.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bk(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.Xr=this.Xr.add(new qx(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return ov.resolve(o)}lookupMutationBatch(e,t){return ov.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ti(n),i=r<0?0:r;return ov.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ov.resolve(0===this.mutationQueue.length?cv:this.nr-1)}getAllMutationBatches(e){return ov.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new qx(t,0),r=new qx(t,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([n,r],e=>{const t=this.ei(e.Zr);i.push(t)}),ov.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Kv(jy);return t.forEach(e=>{const t=new qx(e,0),r=new qx(e,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([t,r],e=>{n=n.add(e.Zr)})}),ov.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Qy.isDocumentKey(i)||(i=i.child(""));const o=new qx(new Qy(i),0);let s=new Kv(jy);return this.Xr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.Zr)),!0)},o),ov.resolve(this.ni(s))}ni(e){const t=[];return e.forEach(e=>{const n=this.ei(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){by(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Xr;return ov.forEach(t.mutations,r=>{const i=new qx(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=n})}sr(e){}containsKey(e,t){const n=new qx(t,0),r=this.Xr.firstAfterOrEqual(n);return ov.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ov.resolve()}ri(e,t){return this.ti(e)}ti(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Kx{constructor(e){this.ii=e,this.docs=new Hv(Qy.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ov.resolve(n?n.document.mutableCopy():Lb.newInvalidDocument(t))}getEntries(e,t){let n=Aw();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Lb.newInvalidDocument(e))}),ov.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Aw();const o=t.path,s=new Qy(o.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||tv(Zy(s),n)<=0||(r.has(s.key)||Sw(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return ov.resolve(i)}getAllFromCollectionGroup(e,t,n,r){yy(9500)}si(e,t){return ov.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Gx(this)}getSize(e){return ov.resolve(this.size)}}class Gx extends Mx{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(n)}),ov.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}class $x{constructor(e){this.persistence=e,this.oi=new Tw(e=>aw(e),lw),this.lastRemoteSnapshotVersion=Hy.min(),this.highestTargetId=0,this._i=0,this.ai=new Hx,this.targetCount=0,this.ui=Ax.cr()}forEachTarget(e,t){return this.oi.forEach((e,n)=>t(n)),ov.resolve()}getLastRemoteSnapshotVersion(e){return ov.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ov.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ov.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),ov.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Ax(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,ov.resolve()}updateTargetData(e,t){return this.Tr(t),ov.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,ov.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.oi.forEach((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),ov.waitFor(i).next(()=>r)}getTargetCount(e){return ov.resolve(this.targetCount)}getTargetData(e,t){const n=this.oi.get(t)||null;return ov.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),ov.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),ov.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),ov.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ai.Yr(t);return ov.resolve(n)}containsKey(e,t){return ov.resolve(this.ai.containsKey(t))}}class Qx{constructor(e,t){this.ci={},this.overlays={},this.li=new lv(0),this.hi=!1,this.hi=!0,this.Pi=new Bx,this.referenceDelegate=e(this),this.Ti=new $x(this),this.indexManager=new _x,this.remoteDocumentCache=function(e){return new Kx(e)}(e=>this.referenceDelegate.Ii(e)),this.serializer=new kx(t),this.Ei=new zx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new Wx(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){fy("MemoryPersistence","Starting transaction:",e);const r=new Yx(this.li.next());return this.referenceDelegate.di(),n(r).next(e=>this.referenceDelegate.Ai(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ri(e,t){return ov.or(Object.values(this.ci).map(n=>()=>n.containsKey(e,t)))}}class Yx extends rv{constructor(e){super(),this.currentSequenceNumber=e}}class Jx{constructor(e){this.persistence=e,this.Vi=new Hx,this.mi=null}static fi(e){return new Jx(e)}get gi(){if(this.mi)return this.mi;throw yy(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),ov.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),ov.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),ov.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(e=>this.gi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.gi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ov.forEach(this.gi,n=>{const r=Qy.fromPath(n);return this.pi(e,r).next(e=>{e||t.removeEntry(r,Hy.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(e=>{e?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return ov.or([()=>ov.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Xx{constructor(e,t){this.persistence=e,this.yi=new Tw(e=>pv(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Lx(this,t)}static fi(e,t){return new Xx(e,t)}di(){}Ai(e){return ov.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}br(e){let t=0;return this.yr(e,e=>{t++}).next(()=>t)}yr(e,t){return ov.forEach(this.yi,(n,r)=>this.Dr(e,n,r).next(e=>e?ov.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,r=>this.Dr(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Hy.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),ov.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),ov.resolve()}removeReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),ov.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),ov.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_b(e.data.value)),t}Dr(e,t,n){return ov.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.yi.get(t);return ov.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Zx{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ds=n,this.As=r}static Rs(e,t){let n=Uw(),r=Uw();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Zx(e,t.fromCache,n,r)}}class eS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tS{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=Id()?8:sv(Cd())>0?6:4}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ws(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.bs(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new eS;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.fs)return this.Ds(e,t,n,r.size)})}).next(()=>i.result)}Ds(e,t,n,r){return n.documentReadCount<this.gs?(hy()<=Gd.DEBUG&&fy("QueryEngine","SDK will not create cache indexes for query:",xw(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ov.resolve()):(hy()<=Gd.DEBUG&&fy("QueryEngine","Query:",xw(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(hy()<=Gd.DEBUG&&fy("QueryEngine","The SDK decides to create cache indexes for query:",xw(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mw(t))):ov.resolve())}ws(e,t){if(fw(t))return ov.resolve(null);let n=mw(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=bw(t,null,"F"),n=mw(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Uw(...r);return this.ys.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.vs(t,r);return this.Cs(t,o,i,n.readTime)?this.ws(e,bw(t,null,"F")):this.Fs(e,o,t,n)}))})))}bs(e,t,n,r){return fw(t)||r.isEqual(Hy.min())?ov.resolve(null):this.ys.getDocuments(e,n).next(i=>{const o=this.vs(t,i);return this.Cs(t,o,n,r)?ov.resolve(null):(hy()<=Gd.DEBUG&&fy("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xw(t)),this.Fs(e,o,t,Xy(r,Yy)).next(e=>e))})}vs(e,t){let n=new Kv(Ew(e));return t.forEach((t,r)=>{Sw(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return hy()<=Gd.DEBUG&&fy("QueryEngine","Using full collection scan to execute query:",xw(t)),this.ys.getDocumentsMatchingQuery(e,t,ev.min(),n)}Fs(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const nS="LocalStore";class rS{constructor(e,t,n,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new Hv(jy),this.Os=new Tw(e=>aw(e),lw),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fx(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function iS(e,t,n,r){return new rS(e,t,n,r)}async function oS(e,t){const n=wy(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let s=Uw();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({ks:e,removedBatchIds:i,addedBatchIds:o}))})})}function sS(e){const t=wy(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ti.getLastRemoteSnapshotVersion(e))}function aS(e,t,n){let r=Uw(),i=Uw();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Aw();return n.forEach((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Hy.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):fy(nS,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),{qs:r,Qs:i}})}function lS(e,t){const n=wy(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=cv),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function cS(e,t){const n=wy(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ti.getTargetData(e,t).next(i=>i?(r=i,ov.resolve(r)):n.Ti.allocateTargetId(e).next(i=>(r=new wx(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ti.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.xs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(e.targetId,e),n.Os.set(t,e.targetId)),e})}async function uS(e,t,n){const r=wy(e),i=r.xs.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!av(e))throw e;fy(nS,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.xs=r.xs.remove(t),r.Os.delete(i.target)}function dS(e,t,n){const r=wy(e);let i=Hy.min(),o=Uw();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=wy(e),i=r.Os.get(n);return void 0!==i?ov.resolve(r.xs.get(i)):r.Ti.getTargetData(t,n)}(r,e,mw(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Ms.getDocumentsMatchingQuery(e,t,n?i:Hy.min(),n?o:Uw())).next(e=>(hS(r,_w(t),e),{documents:e,$s:o})))}function hS(e,t,n){let r=e.Ns.get(t)||Hy.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Ns.set(t,r)}class fS{constructor(){this.activeTargetIds=zw()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pS{constructor(){this.xo=new fS,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new fS,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gS{No(e){}shutdown(){}}const mS="ConnectivityMonitor";class yS{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){fy(mS,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){fy(mS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vS=null;function bS(){return null===vS?vS=268435456+Math.round(2147483648*Math.random()):vS++,"0x"+vS.toString(16)}const wS="RestConnection",kS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xS{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo="projects/".concat(n,"/databases/").concat(r),this.Go=this.databaseId.database===cb?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}zo(e,t,n,r,i){const o=bS(),s=this.jo(e,t.toUriEncodedString());fy(wS,"Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(a,r,i);const{host:l}=new URL(s),c=wd(l);return this.Jo(e,s,a,n,c).then(t=>(fy(wS,"Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw gy(wS,"RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t})}Yo(e,t,n,r,i,o){return this.zo(e,t,n,r,i)}Ho(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+uy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}jo(e,t){const n=kS[e];return"".concat(this.Ko,"/v1/").concat(t,":").concat(n)}terminate(){}}class SS{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}const _S="WebChannelConnection";class ES extends xS{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const o=bS();return new Promise((i,s)=>{const a=new Jm;a.setWithCredentials(!0),a.listenOnce(Zm.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case ey.NO_ERROR:const t=a.getResponseJson();fy(_S,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(t)),i(t);break;case ey.TIMEOUT:fy(_S,"RPC '".concat(e,"' ").concat(o," timed out")),s(new xy(ky.DEADLINE_EXCEEDED,"Request time out"));break;case ey.HTTP_ERROR:const n=a.getStatus();if(fy(_S,"RPC '".concat(e,"' ").concat(o," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ky).indexOf(t)>=0?t:ky.UNKNOWN}(t.status);s(new xy(e,t.message))}else s(new xy(ky.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new xy(ky.UNAVAILABLE,"Connection failed."));break;default:yy(9055,{h_:e,streamId:o,P_:a.getLastErrorCode(),T_:a.getLastError()})}}finally{fy(_S,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(r);fy(_S,"RPC '".concat(e,"' ").concat(o," sending request:"),r),a.send(t,"POST",l,n,15)})}I_(e,t,n){const r=bS(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iy(),s=ry(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Ho(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");fy(_S,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);this.E_(u);let d=!1,h=!1;const f=new SS({Zo:t=>{h?fy(_S,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(fy(_S,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),fy(_S,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Xo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Xm.EventType.OPEN,()=>{h||(fy(_S,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.__())}),p(u,Xm.EventType.CLOSE,()=>{h||(h=!0,fy(_S,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.u_(),this.d_(u))}),p(u,Xm.EventType.ERROR,t=>{h||(h=!0,gy(_S,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.u_(new xy(ky.UNAVAILABLE,"The operation could not be completed")))}),p(u,Xm.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];by(!!i,16349);const o=i,s=(null==o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){fy(_S,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Sk[e];if(void 0!==t)return Ck(t)}(t),i=s.message;void 0===n&&(n=ky.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,f.u_(new xy(n,i)),u.close()}else fy(_S,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.c_(i)}}),p(s,ny.STAT_EVENT,t=>{t.stat===ty.PROXY?fy(_S,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ty.NOPROXY&&fy(_S,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.a_()},0),f}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function CS(){return"undefined"!=typeof document?document:null}function TS(e){return new Wk(e,!0)}class IS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.xi=e,this.timerId=t,this.A_=n,this.R_=r,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),n=Math.max(0,Date.now()-this.g_),r=Math.max(0,t-n);r>0&&fy("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.m_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){null!==this.f_&&(this.f_.skipDelay(),this.f_=null)}cancel(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}const AS="PersistentStream";class RS{constructor(e,t,n,r,i,o,s,a){this.xi=e,this.S_=n,this.D_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new IS(e,t)}O_(){return 1===this.state||5===this.state||this.N_()}N_(){return 2===this.state||3===this.state}start(){this.M_=0,4!==this.state?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&null===this.C_&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,4!==e?this.x_.reset():t&&t.code===ky.RESOURCE_EXHAUSTED?(py(t.toString()),py("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===ky.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.v_===t&&this.z_(n,r)},t=>{e(()=>{const e=new xy(ky.UNKNOWN,"Fetching auth token failed: "+t.message);return this.j_(e)})})}z_(e,t){const n=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{n(()=>this.listener.e_())}),this.stream.n_(()=>{n(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(e=>{n(()=>this.j_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.M_?this.J_(e):this.onNext(e))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return fy(AS,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(fy(AS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PS extends RS{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:yy(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(by(void 0===t||"string"==typeof t,58123),Yv.fromBase64String(t||"")):(by(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Yv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?ky.UNKNOWN:Ck(e.code);return new xy(t,e.message||"")}(s);n=new Mk(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=tx(e,r.document.name),o=Yk(r.document.updateTime),s=r.document.createTime?Yk(r.document.createTime):Hy.min(),a=new Db({mapValue:{fields:r.document.fields}}),l=Lb.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new jk(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=tx(e,r.document),o=r.readTime?Yk(r.readTime):Hy.min(),s=Lb.newNoDocument(i,o),a=r.removedTargetIds||[];n=new jk([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=tx(e,r.document),o=r.removedTargetIds||[];n=new jk([],o,i,null)}else{if(!("filter"in t))return yy(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new xk(r,i),s=e.targetId;n=new Lk(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Hy.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Hy.min():t.readTime?Yk(t.readTime):Hy.min()}(e);return this.listener.Y_(t,n)}Z_(e){const t={};t.database=ix(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=cw(r)?{documents:lx(e,r)}:{query:cx(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=$k(e,t.resumeToken);const r=Kk(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Hy.min())>0){n.readTime=Gk(e,t.snapshotVersion.toTimestamp());const r=Kk(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yy(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Q_(t)}X_(e){const t={};t.database=ix(this.serializer),t.removeTarget=e,this.Q_(t)}}class OS extends RS{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return by(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,by(!e.writeResults||0===e.writeResults.length,55816),this.listener.na()}onNext(e){by(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=function(e,t){return e&&e.length>0?(by(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Yk(e.updateTime):Yk(t);return n.isEqual(Hy.min())&&(n=Yk(t)),new rk(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Yk(e.commitTime);return this.listener.ra(n,t)}ia(){const e={};e.database=ix(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>ax(this.serializer,e))};this.Q_(t)}}class NS{}class DS extends NS{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new xy(ky.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,s]=i;return this.connection.zo(e,Xk(t,n),r,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ky.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new xy(ky.UNKNOWN,e.toString())})}Yo(e,t,n,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[s,a]=o;return this.connection.Yo(e,Xk(t,n),r,s,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ky.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new xy(ky.UNKNOWN,e.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class jS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){0===this._a&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){"Online"===this.state?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.la("Offline")))}set(e){this.Ta(),this._a=0,"Online"===e&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ua?(py(t),this.ua=!1):fy("OnlineStateTracker",t)}Ta(){null!==this.aa&&(this.aa.cancel(),this.aa=null)}}const LS="RemoteStore";class MS{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(e=>{n.enqueueAndForget(async()=>{KS(this)&&(fy(LS,"Restarting streams for network reachability change."),await async function(e){const t=wy(e);t.da.add(4),await FS(t),t.Va.set("Unknown"),t.da.delete(4),await US(t)}(this))})}),this.Va=new jS(n,r)}}async function US(e){if(KS(e))for(const t of e.Aa)await t(!0)}async function FS(e){for(const t of e.Aa)await t(!1)}function zS(e,t){const n=wy(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),WS(n)?qS(n):d_(n).N_()&&BS(n,t))}function VS(e,t){const n=wy(e),r=d_(n);n.Ea.delete(t),r.N_()&&HS(n,t),0===n.Ea.size&&(r.N_()?r.k_():KS(n)&&n.Va.set("Unknown"))}function BS(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Hy.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}d_(e).Z_(t)}function HS(e,t){e.ma.Ke(t),d_(e).X_(t)}function qS(e){e.ma=new Fk({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),d_(e).start(),e.Va.ca()}function WS(e){return KS(e)&&!d_(e).O_()&&e.Ea.size>0}function KS(e){return 0===wy(e).da.size}function GS(e){e.ma=void 0}async function $S(e){e.Va.set("Online")}async function QS(e){e.Ea.forEach((t,n)=>{BS(e,t)})}async function YS(e,t){GS(e),WS(e)?(e.Va.Pa(t),qS(e)):e.Va.set("Unknown")}async function JS(e,t,n){if(e.Va.set("Online"),t instanceof Mk&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ea.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ea.delete(r),e.ma.removeTarget(r))}(e,t)}catch(n){fy(LS,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await XS(e,n)}else if(t instanceof jk?e.ma.Xe(t):t instanceof Lk?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Hy.min()))try{const t=await sS(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ma.It(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ea.get(r);i&&e.Ea.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ea.get(t);if(!r)return;e.Ea.set(t,r.withResumeToken(Yv.EMPTY_BYTE_STRING,r.snapshotVersion)),HS(e,t);const i=new wx(r.target,t,n,r.sequenceNumber);BS(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){fy(LS,"Failed to raise snapshot:",t),await XS(e,t)}}async function XS(e,t,n){if(!av(t))throw t;e.da.add(1),await FS(e),e.Va.set("Offline"),n||(n=()=>sS(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{fy(LS,"Retrying IndexedDB access"),await n(),e.da.delete(1),await US(e)})}function ZS(e,t){return t().catch(n=>XS(e,n,t))}async function e_(e){const t=wy(e),n=h_(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:cv;for(;t_(t);)try{const e=await lS(t.localStore,r);if(null===e){0===t.Ia.length&&n.k_();break}r=e.batchId,n_(t,e)}catch(e){await XS(t,e)}r_(t)&&i_(t)}function t_(e){return KS(e)&&e.Ia.length<10}function n_(e,t){e.Ia.push(t);const n=h_(e);n.N_()&&n.ea&&n.ta(t.mutations)}function r_(e){return KS(e)&&!h_(e).O_()&&e.Ia.length>0}function i_(e){h_(e).start()}async function o_(e){h_(e).ia()}async function s_(e){const t=h_(e);for(const n of e.Ia)t.ta(n.mutations)}async function a_(e,t,n){const r=e.Ia.shift(),i=wk.from(r,t,n);await ZS(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await e_(e)}async function l_(e,t){t&&h_(e).ea&&await async function(e,t){if(function(e){return Ek(e)&&e!==ky.ABORTED}(t.code)){const n=e.Ia.shift();h_(e).L_(),await ZS(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await e_(e)}}(e,t),r_(e)&&i_(e)}async function c_(e,t){const n=wy(e);n.asyncQueue.verifyOperationInProgress(),fy(LS,"RemoteStore received new credentials");const r=KS(n);n.da.add(3),await FS(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await US(n)}async function u_(e,t){const n=wy(e);t?(n.da.delete(2),await US(n)):t||(n.da.add(2),await FS(n),n.Va.set("Unknown"))}function d_(e){return e.fa||(e.fa=function(e,t,n){const r=wy(e);return r.oa(),new PS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:$S.bind(null,e),n_:QS.bind(null,e),i_:YS.bind(null,e),Y_:JS.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),WS(e)?qS(e):e.Va.set("Unknown")):(await e.fa.stop(),GS(e))})),e.fa}function h_(e){return e.ga||(e.ga=function(e,t,n){const r=wy(e);return r.oa(),new OS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:o_.bind(null,e),i_:l_.bind(null,e),na:s_.bind(null,e),ra:a_.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await e_(e)):(await e.ga.stop(),e.Ia.length>0&&(fy(LS,"Stopping write stream with ".concat(e.Ia.length," pending writes")),e.Ia=[]))})),e.ga}class f_{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Sy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new f_(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xy(ky.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function p_(e,t){if(py("AsyncQueue","".concat(t,": ").concat(e)),av(e))return new xy(ky.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class g_{static emptySet(e){return new g_(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Qy.comparator(t.key,n.key):(e,t)=>Qy.comparator(e.key,t.key),this.keyedMap=Pw(),this.sortedSet=new Hv(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof g_))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new g_;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class m_{constructor(){this.pa=new Hv(Qy.comparator)}track(e){const t=e.doc.key,n=this.pa.get(t);n?0!==e.type&&3===n.type?this.pa=this.pa.insert(t,e):3===e.type&&1!==n.type?this.pa=this.pa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pa=this.pa.remove(t):1===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):yy(63341,{Vt:e,ya:n}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,n)=>{e.push(n)}),e}}class y_{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new y_(e,t,g_.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ww(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class v_{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class b_{constructor(){this.queries=w_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=wy(e),r=n.queries;n.queries=w_(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new xy(ky.ABORTED,"Firestore shutting down"))}}function w_(){return new Tw(e=>kw(e),ww)}async function k_(e,t){const n=wy(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.Da()&&t.va()&&(r=2):(o=new v_,r=t.va()?0:1);try{switch(r){case 0:o.ba=await n.onListen(i,!0);break;case 1:o.ba=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=p_(e,"Initialization of query '".concat(xw(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.Sa.push(t),t.Fa(n.onlineState),o.ba&&t.Ma(o.ba)&&E_(n)}async function x_(e,t){const n=wy(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Sa.indexOf(t);e>=0&&(o.Sa.splice(e,1),0===o.Sa.length?i=t.va()?0:1:!o.Da()&&t.va()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function S_(e,t){const n=wy(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Ma(i)&&(r=!0);t.ba=i}}r&&E_(n)}function __(e,t,n){const r=wy(e),i=r.queries.get(t);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(t)}function E_(e){e.Ca.forEach(e=>{e.next()})}var C_,T_;(T_=C_||(C_={})).xa="default",T_.Cache="cache";class I_{constructor(e,t,n){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=n||{}}Ma(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new y_(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache)return!0;if(!this.va())return!0;const n="Offline"!==t;return(!this.options.Qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}qa(e){e=y_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==C_.Cache}}class A_{constructor(e){this.key=e}}class R_{constructor(e){this.key=e}}class P_{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Uw(),this.mutatedKeys=Uw(),this.Za=Ew(e),this.Xa=new g_(this.Za)}get eu(){return this.Ha}tu(e,t){const n=t?t.nu:new m_,r=t?t.Xa:this.Xa;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Sw(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ru(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Za(u,a)>0||l&&this.Za(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Xa:o,nu:n,Cs:s,mutatedKeys:i}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yy(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Za(e.doc,t.doc)),this.iu(n),r=null!=r&&r;const s=t&&!r?this.su():[],a=0===this.Ya.size&&this.current&&!r?1:0,l=a!==this.Ja;return this.Ja=a,0!==o.length||l?{snapshot:new y_(this.query,e.Xa,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ou:s}:{ou:s}}Fa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new m_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Uw(),this.Xa.forEach(e=>{this._u(e.key)&&(this.Ya=this.Ya.add(e.key))});const t=[];return e.forEach(e=>{this.Ya.has(e)||t.push(new R_(e))}),this.Ya.forEach(n=>{e.has(n)||t.push(new A_(n))}),t}au(e){this.Ha=e.$s,this.Ya=Uw();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return y_.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,0===this.Ja,this.hasCachedResults)}}const O_="SyncEngine";class N_{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class D_{constructor(e){this.key=e,this.cu=!1}}class j_{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Tw(e=>kw(e),ww),this.Pu=new Map,this.Tu=new Set,this.Iu=new Hv(Qy.comparator),this.Eu=new Map,this.du=new Hx,this.Au={},this.Ru=new Map,this.Vu=Ax.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return!0===this.mu}}async function L_(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=rE(e);let i;const o=r.hu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=await U_(r,t,n,!0),i}async function M_(e,t){const n=rE(e);await U_(n,t,!0,!1)}async function U_(e,t,n,r){const i=await cS(e.localStore,mw(t)),o=i.targetId,s=e.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await F_(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&zS(e.remoteStore,i),a}async function F_(e,t,n,r,i){e.fu=(t,n,r)=>async function(e,t,n,r){let i=t.view.tu(n);i.Cs&&(i=await dS(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.tu(n,i)}));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return J_(e,t.targetId,a.ou),a.snapshot}(e,t,n,r);const o=await dS(e.localStore,t,!0),s=new P_(t,o.$s),a=s.tu(o.documents),l=Dk.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);J_(e,n,c.ou);const u=new N_(t,n,s);return e.hu.set(t,u),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),c.snapshot}async function z_(e,t,n){const r=wy(e),i=r.hu.get(t),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(e=>!ww(e,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await uS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&VS(r.remoteStore,i.targetId),Q_(r,i.targetId)}).catch(iv)):(Q_(r,i.targetId),await uS(r.localStore,i.targetId,!0))}async function V_(e,t){const n=wy(e),r=n.hu.get(t),i=n.Pu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),VS(n.remoteStore,r.targetId))}async function B_(e,t){const n=wy(e);try{const e=await function(e,t){const n=wy(e),r=t.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const s=[];t.targetChanges.forEach((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Ti.removeMatchingKeys(e,o.removedDocuments,a).next(()=>n.Ti.addMatchingKeys(e,o.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Yv.EMPTY_BYTE_STRING,Hy.min()).withLastLimboFreeSnapshotVersion(Hy.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,o)&&s.push(n.Ti.updateTargetData(e,c))});let a=Aw(),l=Uw();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(aS(e,o,t.documentUpdates).next(e=>{a=e.qs,l=e.Qs})),!r.isEqual(Hy.min())){const t=n.Ti.getLastRemoteSnapshotVersion(e).next(t=>n.Ti.setTargetsMetadata(e,e.currentSequenceNumber,r));s.push(t)}return ov.waitFor(s).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.xs=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&(by(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.cu=!0:e.modifiedDocuments.size>0?by(r.cu,14607):e.removedDocuments.size>0&&(by(r.cu,42227),r.cu=!1))}),await eE(n,e,t)}catch(e){await iv(e)}}function H_(e,t,n){const r=wy(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.hu.forEach((n,r)=>{const i=r.view.Fa(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=wy(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.Fa(t)&&(r=!0)}),r&&E_(n)}(r.eventManager,t),e.length&&r.lu.Y_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function q_(e,t,n){const r=wy(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Eu.get(t),o=i&&i.key;if(o){let e=new Hv(Qy.comparator);e=e.insert(o,Lb.newNoDocument(o,Hy.min()));const n=Uw().add(o),i=new Nk(Hy.min(),new Map,new Hv(jy),e,n);await B_(r,i),r.Iu=r.Iu.remove(o),r.Eu.delete(t),Z_(r)}else await uS(r.localStore,t,!1).then(()=>Q_(r,t,n)).catch(iv)}async function W_(e,t){const n=wy(e),r=t.batch.batchId;try{const e=await function(e,t){const n=wy(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=ov.resolve();return o.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);by(null!==o,48541),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Uw();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);$_(n,r,null),G_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await eE(n,e)}catch(e){await iv(e)}}async function K_(e,t,n){const r=wy(e);try{const e=await function(e,t){const n=wy(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(by(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);$_(r,t,n),G_(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await eE(r,e)}catch(n){await iv(n)}}function G_(e,t){(e.Ru.get(t)||[]).forEach(e=>{e.resolve()}),e.Ru.delete(t)}function $_(e,t,n){const r=wy(e);let i=r.Au[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Au[r.currentUser.toKey()]=i}}function Q_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(t=>{e.du.containsKey(t)||Y_(e,t)})}function Y_(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);null!==n&&(VS(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),Z_(e))}function J_(e,t,n){for(const r of n)r instanceof A_?(e.du.addReference(r.key,t),X_(e,r)):r instanceof R_?(fy(O_,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||Y_(e,r.key)):yy(19791,{pu:r})}function X_(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(fy(O_,"New document in limbo: "+n),e.Tu.add(r),Z_(e))}function Z_(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new Qy(Ky.fromString(t)),r=e.Vu.next();e.Eu.set(r,new D_(n)),e.Iu=e.Iu.insert(n,r),zS(e.remoteStore,new wx(mw(hw(n.path)),r,"TargetPurposeLimboResolution",lv.le))}}async function eE(e,t,n){const r=wy(e),i=[],o=[],s=[];r.hu.isEmpty()||(r.hu.forEach((e,a)=>{s.push(r.fu(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Zx.Rs(a.targetId,e);o.push(t)}}))}),await Promise.all(s),r.lu.Y_(i),await async function(e,t){const n=wy(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ov.forEach(t,t=>ov.forEach(t.ds,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ov.forEach(t.As,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!av(e))throw e;fy(nS,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.xs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.xs=n.xs.insert(e,i)}}}(r.localStore,o))}async function tE(e,t){const n=wy(e);if(!n.currentUser.isEqual(t)){fy(O_,"User change. New user:",t.toKey());const e=await oS(n.localStore,t);n.currentUser=t,function(e,t){e.Ru.forEach(e=>{e.forEach(e=>{e.reject(new xy(ky.CANCELLED,t))})}),e.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await eE(n,e.ks)}}function nE(e,t){const n=wy(e),r=n.Eu.get(t);if(r&&r.cu)return Uw().add(r.key);{let e=Uw();const r=n.Pu.get(t);if(!r)return e;for(const t of r){const r=n.hu.get(t);e=e.unionWith(r.view.eu)}return e}}function rE(e){const t=wy(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=B_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=q_.bind(null,t),t.lu.Y_=S_.bind(null,t.eventManager),t.lu.gu=__.bind(null,t.eventManager),t}function iE(e){const t=wy(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=W_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=K_.bind(null,t),t}class oE{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=TS(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return iS(this.persistence,new tS,e.initialUser,this.serializer)}Su(e){return new Qx(Jx.fi,this.serializer)}bu(e){return new pS}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oE.provider={build:()=>new oE};class sE extends oE{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){by(this.persistence.referenceDelegate instanceof Xx,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Dx(n,e.asyncQueue,t)}Su(e){const t=void 0!==this.cacheSizeBytes?Ix.withCacheSize(this.cacheSizeBytes):Ix.DEFAULT;return new Qx(e=>Xx.fi(e,t),this.serializer)}}class aE{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>H_(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=tE.bind(null,this.syncEngine),await u_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new b_}createDatastore(e){const t=TS(e.databaseInfo.databaseId),n=function(e){return new ES(e)}(e.databaseInfo);return function(e,t,n,r){return new DS(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new MS(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>H_(this.syncEngine,e,0),yS.C()?new yS:new gS)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new j_(e,t,n,r,i,o);return s&&(a.mu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=wy(e);fy(LS,"RemoteStore shutting down."),t.da.add(5),await FS(t),t.Ra.shutdown(),t.Va.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}aE.provider={build:()=>new aE};class lE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):py("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const cE="FirestoreClient";class uE{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=cy.UNAUTHENTICATED,this.clientId=Dy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{fy(cE,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(fy(cE,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=p_(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function dE(e,t){e.asyncQueue.verifyOperationInProgress(),fy(cE,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await oS(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function hE(e,t){e.asyncQueue.verifyOperationInProgress();const n=await fE(e);fy(cE,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>c_(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>c_(t.remoteStore,n)),e._onlineComponents=t}async function fE(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){fy(cE,"Using user provided OfflineComponentProvider");try{await dE(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===ky.FAILED_PRECONDITION||e.code===ky.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;gy("Error using user provided cache. Falling back to memory cache: "+n),await dE(e,new oE)}}else fy(cE,"Using default OfflineComponentProvider"),await dE(e,new sE(void 0));return e._offlineComponents}async function pE(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(fy(cE,"Using user provided OnlineComponentProvider"),await hE(e,e._uninitializedComponentsProvider._online)):(fy(cE,"Using default OnlineComponentProvider"),await hE(e,new aE))),e._onlineComponents}function gE(e){return pE(e).then(e=>e.syncEngine)}async function mE(e){const t=await pE(e),n=t.eventManager;return n.onListen=L_.bind(null,t.syncEngine),n.onUnlisten=z_.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=M_.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=V_.bind(null,t.syncEngine),n}function yE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Sy;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new lE({next:a=>{o.xu(),t.enqueueAndForget(()=>x_(e,s));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new xy(ky.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new xy(ky.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),s=new I_(hw(n.path),o,{includeMetadataChanges:!0,Qa:!0});return k_(e,s)}(await mE(e),e.asyncQueue,t,n,r)),r.promise}function vE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Sy;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new lE({next:n=>{o.xu(),t.enqueueAndForget(()=>x_(e,s)),n.fromCache&&"server"===r.source?i.reject(new xy(ky.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new I_(n,o,{includeMetadataChanges:!0,Qa:!0});return k_(e,s)}(await mE(e),e.asyncQueue,t,n,r)),r.promise}function bE(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const wE=new Map;function kE(e,t,n){if(!n)throw new xy(ky.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function xE(e){if(!Qy.isDocumentKey(e))throw new xy(ky.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function SE(e){if(Qy.isDocumentKey(e))throw new xy(ky.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function _E(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":yy(12329,{type:typeof e})}function EE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new xy(ky.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_E(e);throw new xy(ky.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function CE(e,t){if(t<=0)throw new xy(ky.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}const TE="firestore.googleapis.com",IE=!0;class AE{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new xy(ky.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TE,this.ssl=IE}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:IE;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Tx;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Px)throw new xy(ky.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new xy(ky.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bE(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new xy(ky.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new xy(ky.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new xy(ky.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class RE{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xy(ky.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xy(ky.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AE(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ey;switch(e.type){case"firstParty":return new Ay(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new xy(ky.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=wE.get(e);t&&(fy("ComponentProvider","Removing Datastore"),wE.delete(e),t.terminate())}(this),Promise.resolve()}}class PE{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new PE(this.firestore,e,this._query)}}class OE{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new NE(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new OE(this.firestore,e,this._key)}}class NE extends PE{constructor(e,t,n){super(e,t,hw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new OE(this.firestore,null,new Qy(e))}withConverter(e){return new NE(this.firestore,e,this._path)}}function DE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=zd(e),kE("collection","path",t),e instanceof RE){const n=Ky.fromString(t,...r);return SE(n),new NE(e,null,n)}{if(!(e instanceof OE||e instanceof NE))throw new xy(ky.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ky.fromString(t,...r));return SE(n),new NE(e.firestore,null,n)}}function jE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=zd(e),1===arguments.length&&(t=Dy.newId()),kE("doc","path",t),e instanceof RE){const n=Ky.fromString(t,...r);return xE(n),new OE(e,null,new Qy(n))}{if(!(e instanceof OE||e instanceof NE))throw new xy(ky.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ky.fromString(t,...r));return xE(n),new OE(e.firestore,e instanceof NE?e.converter:null,new Qy(n))}}const LE="AsyncQueue";class ME{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new IS(this,"async_queue_retry"),this.rc=()=>{const e=CS();e&&fy(LE,"Visibility state changed to "+e.visibilityState),this.x_.b_()},this.sc=e;const t=CS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=CS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Sy;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(0!==this.Ju.length){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(VA){if(!av(VA))throw VA;fy(LE,"Operation failed with retryable error: "+VA)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(e=>{throw this.Xu=e,this.ec=!1,py("INTERNAL UNHANDLED ERROR: ",UE(e)),e}).then(e=>(this.ec=!1,e))));return this.sc=t,t}enqueueAfterDelay(e,t,n){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const r=f_.createAndSchedule(this,e,t,n,e=>this.uc(e));return this.Zu.push(r),r}oc(){this.Xu&&yy(47125,{cc:UE(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do{e=this.sc,await e}while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function UE(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function FE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class zE extends RE{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ME,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ME(e),this._firestoreClient=void 0,await e}}}function VE(e){if(e._terminated)throw new xy(ky.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||BE(e),e._firestoreClient}function BE(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new lb(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,bE(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new uE(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class HE{constructor(e){this._byteString=e}static fromBase64String(e){try{return new HE(Yv.fromBase64String(e))}catch(e){throw new xy(ky.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new HE(Yv.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qE{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new xy(ky.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $y(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class WE{constructor(e){this._methodName=e}}class KE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xy(ky.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xy(ky.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jy(this._lat,e._lat)||jy(this._long,e._long)}}class GE{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const $E=/^__.*__$/;class QE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new fk(e,this.data,this.fieldMask,t,this.fieldTransforms):new hk(e,this.data,t,this.fieldTransforms)}}class YE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new fk(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function JE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yy(40011,{Ic:e})}}class XE{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new XE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Vc(e),r}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return yC(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(0===e.length)throw this.gc("Document fields must not be empty");if(JE(this.Ic)&&$E.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class ZE{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||TS(e)}bc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new XE({Ic:e,methodName:t,wc:n,path:$y.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eC(e){const t=e._freezeSettings(),n=TS(e._databaseId);return new ZE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function tC(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.bc(o.merge||o.mergeFields?2:0,t,n,i);fC("Data must be an object, but it was:",s,r);const a=dC(r,s);let l,c;if(o.merge)l=new $v(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=pC(t,r,n);if(!s.contains(i))throw new xy(ky.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));vC(e,i)||e.push(i)}l=new $v(e),c=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=s.fieldTransforms;return new QE(new Db(a),l,c)}class nC extends WE{_toFieldTransform(e){if(2!==e.Ic)throw 1===e.Ic?e.gc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.gc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nC}}function rC(e,t,n){return new XE({Ic:3,wc:t.settings.wc,methodName:e._methodName,Rc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class iC extends WE{_toFieldTransform(e){return new nk(e.path,new $w)}isEqual(e){return e instanceof iC}}class oC extends WE{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){const t=rC(this,e,!0),n=this.Sc.map(e=>uC(e,t)),r=new Qw(n);return new nk(e.path,r)}isEqual(e){return e instanceof oC&&Nd(this.Sc,e.Sc)}}class sC extends WE{constructor(e,t){super(e),this.Dc=t}_toFieldTransform(e){const t=new Zw(e.serializer,Hw(e.serializer,this.Dc));return new nk(e.path,t)}isEqual(e){return e instanceof sC&&this.Dc===e.Dc}}function aC(e,t,n,r){const i=e.bc(1,t,n);fC("Data must be an object, but it was:",i,r);const o=[],s=Db.empty();Vv(r,(e,r)=>{const a=mC(t,e,n);r=zd(r);const l=i.mc(a);if(r instanceof nC)o.push(a);else{const e=uC(r,l);null!=e&&(o.push(a),s.set(a,e))}});const a=new $v(o);return new YE(s,a,i.fieldTransforms)}function lC(e,t,n,r,i,o){const s=e.bc(1,t,n),a=[pC(t,r,n)],l=[i];if(o.length%2!=0)throw new xy(ky.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)a.push(pC(t,o[h])),l.push(o[h+1]);const c=[],u=Db.empty();for(let h=a.length-1;h>=0;--h)if(!vC(c,a[h])){const e=a[h];let t=l[h];t=zd(t);const n=s.mc(e);if(t instanceof nC)c.push(e);else{const r=uC(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new $v(c);return new YE(u,d,s.fieldTransforms)}function cC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return uC(n,e.bc(r?4:3,t))}function uC(e,t){if(hC(e=zd(e)))return fC("Unsupported field value:",t,e),dC(e,t);if(e instanceof WE)return function(e,t){if(!JE(t.Ic))throw t.gc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.gc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&4!==t.Ic)throw t.gc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=uC(i,t.fc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=zd(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Hw(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=By.fromDate(e);return{timestampValue:Gk(t.serializer,n)}}if(e instanceof By){const n=new By(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Gk(t.serializer,n)}}if(e instanceof KE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof HE)return{bytesValue:$k(t.serializer,e._byteString)};if(e instanceof OE){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.gc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Jk(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof GE)return function(e,t){return{mapValue:{fields:{[db]:{stringValue:pb},[gb]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.gc("VectorValues must only contain numeric values.");return Vw(t.serializer,e)})}}}}}}(e,t);throw t.gc("Unsupported field value: ".concat(_E(e)))}(e,t)}function dC(e,t){const n={};return Bv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vv(e,(e,r)=>{const i=uC(r,t.Ac(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function hC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof By||e instanceof KE||e instanceof HE||e instanceof OE||e instanceof WE||e instanceof GE)}function fC(e,t,n){if(!hC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=_E(n);throw"an object"===r?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function pC(e,t,n){if((t=zd(t))instanceof qE)return t._internalPath;if("string"==typeof t)return mC(e,t);throw yC("Field path arguments must be of type string or ",e,!1,void 0,n)}const gC=new RegExp("[~\\*/\\[\\]]");function mC(e,t,n){if(t.search(gC)>=0)throw yC("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new qE(...t.split("."))._internalPath}catch(r){throw yC("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function yC(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new xy(ky.INVALID_ARGUMENT,a+e+l)}function vC(e,t){return e.some(e=>e.isEqual(t))}class bC{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new OE(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wC extends bC{data(){return super.data()}}function kC(e,t){return"string"==typeof t?mC(e,t):t instanceof qE?t._internalPath:t._delegate._internalPath}function xC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new xy(ky.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class SC{}class _C extends SC{}function EC(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof SC&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof IC).length,n=e.filter(e=>e instanceof CC).length;if(t>1||t>0&&n>0)throw new xy(ky.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class CC extends _C{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new CC(e,t,n)}_apply(e){const t=this._parse(e);return jC(e._query,t),new PE(e.firestore,e.converter,vw(e._query,t))}_parse(e){const t=eC(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new xy(ky.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){DC(s,o);const t=[];for(const n of s)t.push(NC(r,e,n));a={arrayValue:{values:t}}}else a=NC(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||DC(s,o),a=cC(n,t,s,"in"===o||"not-in"===o);return Hb.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function TC(e,t,n){const r=t,i=kC("where",e);return CC._create(i,r,n)}class IC extends SC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new IC(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:qb.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)jC(n,i),n=vw(n,i)}(e._query,t),new PE(e.firestore,e.converter,vw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class AC extends _C{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new AC(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new xy(ky.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new xy(ky.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zb(t,n)}(e._query,this._field,this._direction);return new PE(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new uw(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function RC(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=kC("orderBy",e);return AC._create(n,t)}class PC extends _C{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new PC(e,t,n)}_apply(e){return new PE(e.firestore,e.converter,bw(e._query,this._limit,this._limitType))}}function OC(e){return CE("limit",e),PC._create("limit",e,"F")}function NC(e,t,n){if("string"==typeof(n=zd(n))){if(""===n)throw new xy(ky.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pw(t)&&-1!==n.indexOf("/"))throw new xy(ky.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ky.fromString(n));if(!Qy.isDocumentKey(r))throw new xy(ky.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Eb(e,new Qy(r))}if(n instanceof OE)return Eb(e,n._key);throw new xy(ky.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(_E(n),"."))}function DC(e,t){if(!Array.isArray(e)||0===e.length)throw new xy(ky.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function jC(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new xy(ky.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new xy(ky.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class LC{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(mb(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(eb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw yy(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Vv(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[gb].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Zv(e.doubleValue));return new GE(i)}convertGeoPoint(e){return new KE(Zv(e.latitude),Zv(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=sb(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ab(e));default:return null}}convertTimestamp(e){const t=Xv(e);return new By(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ky.fromString(e);by(bx(n),9688,{name:e});const r=new ub(n.get(1),n.get(3)),i=new Qy(n.popFirst(5));return r.isEqual(t)||py("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function MC(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class UC{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class FC extends bC{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new zC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(kC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class zC extends FC{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class VC{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new UC(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new zC(this._firestore,this._userDataWriter,n.key,n,new UC(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xy(ky.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new zC(e._firestore,e._userDataWriter,n.doc.key,n.doc,new UC(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new zC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new UC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:BC(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function BC(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yy(61501,{type:e})}}function HC(e){e=EE(e,OE);const t=EE(e.firestore,zE);return yE(VE(t),e._key).then(n=>JC(t,e,n))}class qC extends LC{constructor(e){super(),this.firestore=e}convertBytes(e){return new HE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new OE(this.firestore,null,t)}}function WC(e){e=EE(e,PE);const t=EE(e.firestore,zE),n=VE(t),r=new qC(t);return xC(e._query),vE(n,e._query).then(n=>new VC(t,r,e,n))}function KC(e,t,n){e=EE(e,OE);const r=EE(e.firestore,zE),i=eC(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=zd(t))||t instanceof qE?lC(i,"updateDoc",e._key,t,n,a):aC(i,"updateDoc",e._key,t),YC(r,[o.toMutation(e._key,ik.exists(!0))])}function GC(e){return YC(EE(e.firestore,zE),[new yk(e._key,ik.none())])}function $C(e,t){const n=EE(e.firestore,zE),r=jE(e),i=MC(e.converter,t);return YC(n,[tC(eC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ik.exists(!1))]).then(()=>r)}function QC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=zd(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||FE(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(FE(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,d,h;if(e instanceof OE)d=EE(e.firestore,zE),h=hw(e._key.path),u={next:t=>{n[l]&&n[l](JC(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=EE(e,PE);d=EE(t.firestore,zE),h=t._query;const r=new qC(d);u={next:e=>{n[l]&&n[l](new VC(d,r,t,e))},error:n[l+1],complete:n[l+2]},xC(e._query)}return function(e,t,n,r){const i=new lE(r),o=new I_(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>k_(await mE(e),o)),()=>{i.xu(),e.asyncQueue.enqueueAndForget(async()=>x_(await mE(e),o))}}(VE(d),h,c,u)}function YC(e,t){return function(e,t){const n=new Sy;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=iE(e);try{const e=await function(e,t){const n=wy(e),r=By.now(),i=t.reduce((e,t)=>e.add(t.key),Uw());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Aw(),l=Uw();return n.Bs.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{o=i;const s=[];for(const e of t){const t=uk(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new fk(e.key,t,jb(t.value.mapValue),ik.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:Ow(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Au[e.currentUser.toKey()];r||(r=new Hv(jy)),r=r.insert(t,n),e.Au[e.currentUser.toKey()]=r}(r,e.batchId,n),await eE(r,e.changes),await e_(r.remoteStore)}catch(e){const t=p_(e,"Failed to persist write");n.reject(t)}}(await gE(e),t,n)),n.promise}(VE(e),t)}function JC(e,t,n){const r=n.docs.get(t._key),i=new qC(e);return new FC(e,i,t._key,r,new UC(n.hasPendingWrites,n.fromCache),t.converter)}function XC(){return new iC("serverTimestamp")}function ZC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new oC("arrayUnion",t)}function eT(e){return new sC("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){uy=e}(nf),Jh(new Vd("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new zE(new Ty(e.getProvider("auth-internal")),new Py(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new xy(ky.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ub(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),sf(ay,ly,e),sf(ay,ly,"esm2017")}();sf("firebase","11.9.1","app");const tT="firebasestorage.googleapis.com",nT="storageBucket";class rT extends Rd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(sT(e),"Firebase Storage: ".concat(t," (").concat(sT(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rT.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var iT,oT;function sT(e){return"storage/"+e}function aT(){return new rT(iT.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function lT(){return new rT(iT.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cT(){return new rT(iT.CANCELED,"User canceled the upload/download.")}function uT(){return new rT(iT.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dT(e){return new rT(iT.INVALID_ARGUMENT,e)}function hT(){return new rT(iT.APP_DELETED,"The Firebase app was deleted.")}function fT(e,t){return new rT(iT.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function pT(e){throw new rT(iT.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(iT||(iT={}));class gT{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=gT.makeFromUrl(e,t)}catch(VA){return new gT(e,"")}if(""===n.path)return n;throw r=e,new rT(iT.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===tT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new gT(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new rT(iT.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class mT{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function yT(e){return"string"===typeof e||e instanceof String}function vT(e){return bT()&&e instanceof Blob}function bT(){return"undefined"!==typeof Blob}function wT(e,t,n,r){if(r<t)throw dT("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw dT("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function kT(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function xT(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function ST(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(oT||(oT={}));class _T{constructor(e,t,n,r,i,o,s,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new ET(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===oT.NO_ERROR,i=n.getStatus();if(!t||ST(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===oT.ABORT;return void e(!1,new ET(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new ET(o,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(VA){r(VA)}else if(null!==i){const e=aT();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?hT():cT())}else{r(lT())}};this.canceled_?t(0,new ET(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){o&&clearTimeout(o)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||s)return h(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),d(o)}let p=!1;function g(e){p||(p=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,g(!0)},n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ET{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function CT(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function TT(){const e=CT();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(bT())return new Blob(n);throw new rT(iT.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function IT(e){if("undefined"===typeof atob)throw t="base-64",new rT(iT.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const AT="raw",RT="base64",PT="base64url",OT="data_url";class NT{constructor(e,t){this.data=e,this.contentType=t||null}}function DT(e,t){switch(e){case AT:return new NT(jT(t));case RT:case PT:return new NT(LT(e,t));case OT:return new NT(function(e){const t=new MT(e);return t.base64?LT(RT,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(VA){throw fT(OT,"Malformed data URL.")}return jT(t)}(t.rest)}(t),new MT(t).contentType)}throw aT()}function jT(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function LT(e,t){switch(e){case RT:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw fT(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case PT:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw fT(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=IT(t)}catch(VA){if(VA.message.includes("polyfill"))throw VA;throw fT(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class MT{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw fT(OT,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class UT{constructor(e,t){let n=0,r="";vT(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(vT(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new UT(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new UT(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(bT()){const e=t.map(e=>e instanceof UT?e.data_:e);return new UT(TT.apply(null,e))}{const e=t.map(e=>yT(e)?DT(AT,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new UT(r,!0)}}uploadData(){return this.data_}}function FT(e){let t;try{t=JSON.parse(e)}catch(VA){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function zT(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function VT(e,t){return t}class BT{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||VT}}let HT=null;function qT(){if(HT)return HT;const e=[];e.push(new BT("bucket")),e.push(new BT("generation")),e.push(new BT("metageneration")),e.push(new BT("name","fullPath",!0));const t=new BT("name");t.xform=function(e,t){return function(e){return!yT(e)||e.length<2?e:zT(e)}(t)},e.push(t);const n=new BT("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new BT("timeCreated")),e.push(new BT("updated")),e.push(new BT("md5Hash",null,!0)),e.push(new BT("cacheControl",null,!0)),e.push(new BT("contentDisposition",null,!0)),e.push(new BT("contentEncoding",null,!0)),e.push(new BT("contentLanguage",null,!0)),e.push(new BT("contentType",null,!0)),e.push(new BT("metadata","customMetadata",!0)),HT=e,HT}function WT(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new gT(n,r);return t._makeStorageReference(i)}})}(r,e),r}function KT(e,t,n){const r=FT(t);if(null===r)return null;return WT(e,r,n)}function GT(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class $T{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function QT(e){if(!e)throw aT()}function YT(e,t){return function(n,r){const i=KT(e,r,t);return QT(null!==i),i}}function JT(e,t){return function(n,r){const i=KT(e,r,t);return QT(null!==i),function(e,t,n,r){const i=FT(t);if(null===i)return null;if(!yT(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent,a=o.split(",").map(t=>{const i=e.bucket,o=e.fullPath;return kT("/b/"+s(i)+"/o/"+s(o),n,r)+xT({alt:"media",token:t})});return a[0]}(i,r,e.host,e._protocol)}}function XT(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new rT(iT.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new rT(iT.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new rT(iT.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new rT(iT.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function ZT(e){const t=XT(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new rT(iT.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function eI(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function tI(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const l=eI(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+GT(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=UT.getBlob(c,r,u);if(null===d)throw uT();const h={name:l.fullPath},f=kT(o,e.host,e._protocol),p=e.maxUploadRetryTime,g=new $T(f,"POST",YT(e,n),p);return g.urlParams=h,g.headers=s,g.body=d.uploadData(),g.errorHandler=XT(t),g}class nI{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oT.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oT.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oT.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw pT("cannot .send() more than once");if(wd(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pT("cannot .getStatus() before sending");try{return this.xhr_.status}catch(VA){return-1}}getResponse(){if(!this.sent_)throw pT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class rI extends nI{initXhr(){this.xhr_.responseType="text"}}function iI(){return new rI}class oI{constructor(e,t){this._service=e,this._location=t instanceof gT?t:gT.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new oI(e,t)}get root(){const e=new gT(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zT(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new gT(this._location.bucket,e);return new oI(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new rT(iT.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function sI(e,t,n){e._throwIfRoot("uploadBytes");const r=tI(e.storage,e._location,qT(),new UT(t,!0),n);return e.storage.makeRequestWithTokens(r,iI).then(t=>({metadata:t,ref:e}))}function aI(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=kT(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new $T(r,"GET",JT(e,n),i);return o.errorHandler=ZT(t),o}(e.storage,e._location,qT());return e.storage.makeRequestWithTokens(t,iI).then(e=>{if(null===e)throw new rT(iT.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function lI(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=kT(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new $T(n,"DELETE",function(e,t){},r);return i.successCodes=[200,204],i.errorHandler=ZT(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,iI)}function cI(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new gT(e._location.bucket,n);return new oI(e.storage,r)}function uI(e,t){if(e instanceof fI){const n=e;if(null==n._bucket)throw new rT(iT.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nT+"' property when initializing the app?");const r=new oI(n,n._bucket);return null!=t?uI(r,t):r}return void 0!==t?cI(e,t):e}function dI(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof fI)return new oI(e,t);throw dT("To use ref(service, url), the first argument must be a Storage instance.")}return uI(e,t)}function hI(e,t){const n=null===t||void 0===t?void 0:t[nT];return null==n?null:gT.makeFromBucketSpec(n,e)}class fI{constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=tT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?gT.makeFromBucketSpec(r,this._host):hI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=gT.makeFromBucketSpec(this._url,e):this._bucket=hI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Zh(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oI(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new mT(hT());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=xT(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new _T(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s,a)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const pI="@firebase/storage",gI="0.13.13",mI="storage";function yI(e,t){return dI(e=zd(e),t)}function vI(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new fI(r,i,o,n,nf)}Jh(new Vd(mI,vI,"PUBLIC").setMultipleInstances(!0)),sf(pI,gI,""),sf(pI,gI,"esm2017");const bI={apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_API_KEY||"demo-api-key",authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_AUTH_DOMAIN||"json2video-demo.firebaseapp.com",projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_PROJECT_ID||"json2video-demo",storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_STORAGE_BUCKET||"json2video-demo.appspot.com",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_APP_ID||"1:123456789:web:abcdef"};let wI,kI,xI,SI;try{wI=rf(bI),kI=function(e,t){const n="object"==typeof e?e:of(),r="string"==typeof e?e:t||cb,i=Xh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=md("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;e=EE(e,RE);const o=wd(t),s=e._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);o&&(kd("https://".concat(l)),Ed("Firestore",!0)),s.host!==TE&&s.host!==l&&gy("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:l,ssl:o,emulatorOptions:r});if(!Nd(c,a)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=cy.MOCK_USER;else{t=xd(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new xy(ky.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new cy(o)}e._authCredentials=new Cy(new _y(t,n))}}(i,...e)}return i}(wI),xI=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:of(),t=arguments.length>1?arguments[1]:void 0;e=zd(e);const n=Xh(e,mI).getImmediate({identifier:t}),r=md("storage");return r&&function(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=wd(t);i&&(kd("https://".concat(e.host,"/b")),Ed("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"===typeof o?o:xd(o,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}(n,...r),n}(wI),SI=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:of();const t=Xh(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Xh(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Nd(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Sf(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:zm,persistence:[Qg,Ag,Dg]}),r=vd("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>qm)return;const r=null===t||void 0===t?void 0:t.token;Wm!==r&&(Wm=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){zd(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){zd(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const o=gd("auth");return o&&Wp(n,"http://".concat(o)),n}(wI),console.log("\ud83d\udd25 Firebase initialized successfully")}catch(BA){console.warn("\u26a0\ufe0f Firebase initialization failed, using mock services:",BA.message),kI={collection:()=>({add:()=>Promise.resolve({id:"mock-id"}),get:()=>Promise.resolve({docs:[]}),doc:()=>({get:()=>Promise.resolve({data:()=>null}),update:()=>Promise.resolve(),delete:()=>Promise.resolve()})})},xI={ref:()=>({put:()=>({on:(e,t,n,r)=>{setTimeout(()=>t({bytesTransferred:50,totalBytes:100}),100),setTimeout(()=>r(),500)}}),getDownloadURL:()=>Promise.resolve("https://via.placeholder.com/200")})},SI={currentUser:null,signInAnonymously:()=>Promise.resolve({user:{uid:"anonymous"}})}}const _I=new class{constructor(){this.currentUser=null,this.authStateListeners=[],this.initialized=!1,this.initializeAuthListener()}initializeAuthListener(){!function(e,t,n,r){zd(e).onAuthStateChanged(t,n,r)}(SI,async e=>{e?(this.currentUser={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified,createdAt:e.metadata.creationTime,lastLoginAt:e.metadata.lastSignInTime},await this.updateUserProfile(this.currentUser),console.log("\u2705 User authenticated:",this.currentUser.email)):(this.currentUser=null,console.log("\ud83d\udc4b User signed out")),this.authStateListeners.forEach(e=>e(this.currentUser)),this.initialized=!0})}async signInWithEmail(e,t){try{const n=await function(e,t,n){return Zh(e.app)?Promise.reject(Cf(e)):kg(zd(e),sg.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Sg(e),t})}(SI,e,t),r=n.user;return console.log("\u2705 Email sign-in successful:",r.email),{success:!0,user:this.currentUser,message:"Successfully signed in"}}catch(BA){return console.error("\u274c Email sign-in failed:",BA.message),{success:!1,error:BA.code,message:this.getErrorMessage(BA.code)}}}async signUpWithEmail(e,t,n){try{const r=await async function(e,t,n){if(Zh(e.app))return Promise.reject(Cf(e));const r=Np(e),i=Hp(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fg,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Sg(e),t}),s=await pg._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(SI,e,t),i=r.user;return n&&await _g(i,{displayName:n}),console.log("\u2705 Email sign-up successful:",i.email),{success:!0,user:this.currentUser,message:"Account created successfully"}}catch(BA){return console.error("\u274c Email sign-up failed:",BA.message),{success:!1,error:BA.code,message:this.getErrorMessage(BA.code)}}}async signInWithGoogle(){try{const e=new ug;e.addScope("profile"),e.addScope("email");const t=(await lm(SI,e)).user;return console.log("\u2705 Google sign-in successful:",t.email),{success:!0,user:this.currentUser,message:"Successfully signed in with Google"}}catch(BA){return console.error("\u274c Google sign-in failed:",BA.message),{success:!1,error:BA.code,message:this.getErrorMessage(BA.code)}}}async signInWithGithub(){try{const e=new dg;e.addScope("user:email");const t=(await lm(SI,e)).user;return console.log("\u2705 GitHub sign-in successful:",t.email),{success:!0,user:this.currentUser,message:"Successfully signed in with GitHub"}}catch(BA){return console.error("\u274c GitHub sign-in failed:",BA.message),{success:!1,error:BA.code,message:this.getErrorMessage(BA.code)}}}async signOutUser(){try{return await function(e){return zd(e).signOut()}(SI),console.log("\u2705 User signed out successfully"),{success:!0,message:"Successfully signed out"}}catch(BA){return console.error("\u274c Sign out failed:",BA.message),{success:!1,error:BA.code,message:"Failed to sign out"}}}async resetPassword(e){try{return await async function(e,t,n){const r=Np(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&xg(r,i,n),await Hp(r,i,"getOobCode",Xp,"EMAIL_PASSWORD_PROVIDER")}(SI,e),console.log("\u2705 Password reset email sent:",e),{success:!0,message:"Password reset email sent successfully"}}catch(BA){return console.error("\u274c Password reset failed:",BA.message),{success:!1,error:BA.code,message:this.getErrorMessage(BA.code)}}}async updateUserProfile(e){if(null!==e&&void 0!==e&&e.uid)try{const t=jE(kI,"users",e.uid),n=await HC(t),r={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified,lastLoginAt:new Date,updatedAt:new Date};n.exists()?await KC(t,Te(Te({},r),{},{loginCount:(n.data().loginCount||0)+1})):await function(e,t,n){e=EE(e,OE);const r=EE(e.firestore,zE),i=MC(e.converter,t,n);return YC(r,[tC(eC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ik.none())])}(t,Te(Te({},r),{},{createdAt:new Date,loginCount:1,preferences:{theme:"dark",autoSave:!0,notifications:!0},subscription:{plan:"free",startDate:new Date,features:["basic-editor","sample-assets"]}})),console.log("\u2705 User profile updated in Firestore")}catch(BA){console.error("\u274c Failed to update user profile:",BA)}}async getUserProfile(){var e;const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||(null===(e=this.currentUser)||void 0===e?void 0:e.uid);if(!t)return null;try{const e=jE(kI,"users",t),n=await HC(e);return n.exists()?n.data():null}catch(BA){return console.error("\u274c Failed to get user profile:",BA),null}}onAuthStateChange(e){return this.authStateListeners.push(e),this.initialized&&e(this.currentUser),()=>{this.authStateListeners=this.authStateListeners.filter(t=>t!==e)}}isAuthenticated(){return!!this.currentUser}getCurrentUser(){return this.currentUser}hasPermission(e){if(!this.currentUser)return!1;return{"upload-assets":!0,"create-projects":!0,"share-projects":this.currentUser.emailVerified,"export-video":!0,"admin-access":!1}[e]||!1}getErrorMessage(e){return{"auth/user-not-found":"No account found with this email address.","auth/wrong-password":"Incorrect password. Please try again.","auth/email-already-in-use":"An account already exists with this email address.","auth/weak-password":"Password should be at least 6 characters long.","auth/invalid-email":"Please enter a valid email address.","auth/user-disabled":"This account has been disabled.","auth/too-many-requests":"Too many failed attempts. Please try again later.","auth/popup-closed-by-user":"Sign-in popup was closed before completion.","auth/cancelled-popup-request":"Sign-in was cancelled.","auth/popup-blocked":"Sign-in popup was blocked by your browser.","auth/operation-not-allowed":"This sign-in method is not enabled.","auth/invalid-credential":"The provided credentials are invalid.","auth/network-request-failed":"Network error. Please check your connection."}[e]||"An unexpected error occurred. Please try again."}async waitForAuth(){return this.initialized?this.currentUser:new Promise(e=>{const t=this.onAuthStateChange(n=>{t(),e(n)})})}},EI=_I;var CI,TI,II,AI,RI,PI,OI,NI,DI,jI,LI,MI,UI;const FI=yr.div(CI||(CI=Ie(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  backdrop-filter: blur(4px);\n"]))),zI=yr.div(TI||(TI=Ie(["\n  background: linear-gradient(145deg, #1a1a1a 0%, #2a2a2a 100%);\n  border-radius: 16px;\n  padding: 2rem;\n  width: 90%;\n  max-width: 400px;\n  border: 1px solid #333;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);\n  position: relative;\n"]))),VI=yr.button(II||(II=Ie(["\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  background: none;\n  border: none;\n  color: #666;\n  cursor: pointer;\n  padding: 0.5rem;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    color: white;\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),BI=yr.h2(AI||(AI=Ie(["\n  margin: 0 0 1.5rem 0;\n  color: white;\n  text-align: center;\n  font-size: 1.5rem;\n  font-weight: 600;\n"]))),HI=yr.form(RI||(RI=Ie(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"]))),qI=yr.div(PI||(PI=Ie(["\n  position: relative;\n"]))),WI=yr.div(OI||(OI=Ie(["\n  position: absolute;\n  left: 1rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #666;\n  z-index: 1;\n"]))),KI=yr.input(NI||(NI=Ie(["\n  width: 100%;\n  padding: 1rem 1rem 1rem 3rem;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid #333;\n  border-radius: 8px;\n  color: white;\n  font-size: 0.9rem;\n  transition: all 0.2s ease;\n  box-sizing: border-box;\n  \n  &:focus {\n    outline: none;\n    border-color: #00d4ff;\n    box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.2);\n  }\n  \n  &::placeholder {\n    color: #666;\n  }\n"]))),GI=yr.button(DI||(DI=Ie(["\n  padding: 1rem;\n  background: ",";\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  \n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),e=>"google"===e.$variant?"#db4437":"github"===e.$variant?"#333":"linear-gradient(45deg, #00d4ff, #0099cc)"),$I=yr.div(jI||(jI=Ie(["\n  display: flex;\n  align-items: center;\n  margin: 1rem 0;\n  \n  &::before,\n  &::after {\n    content: '';\n    flex: 1;\n    height: 1px;\n    background: #333;\n  }\n  \n  span {\n    padding: 0 1rem;\n    color: #666;\n    font-size: 0.8rem;\n  }\n"]))),QI=yr.button(LI||(LI=Ie(["\n  background: none;\n  border: none;\n  color: #00d4ff;\n  cursor: pointer;\n  font-size: 0.9rem;\n  text-decoration: underline;\n  margin: 0.5rem 0;\n  \n  &:hover {\n    color: #33e0ff;\n  }\n"]))),YI=yr.div(MI||(MI=Ie(["\n  background: rgba(255, 107, 107, 0.1);\n  border: 1px solid #ff6b6b;\n  border-radius: 6px;\n  padding: 0.75rem;\n  color: #ff6b6b;\n  font-size: 0.8rem;\n  margin-bottom: 1rem;\n"]))),JI=yr.div(UI||(UI=Ie(["\n  background: rgba(0, 255, 136, 0.1);\n  border: 1px solid #00ff88;\n  border-radius: 6px;\n  padding: 0.75rem;\n  color: #00ff88;\n  font-size: 0.8rem;\n  margin-bottom: 1rem;\n"]))),XI=e=>{let{isOpen:n,onClose:r,onSuccess:i}=e;const[o,s]=(0,t.useState)("login"),[a,l]=(0,t.useState)({email:"",password:"",displayName:"",confirmPassword:""}),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)("");if(!n)return null;const g=e=>{l(Te(Te({},a),{},{[e.target.name]:e.target.value})),h(""),p("")};return(0,Dr.jsx)(FI,{onClick:r,children:(0,Dr.jsxs)(zI,{onClick:e=>e.stopPropagation(),children:[(0,Dr.jsx)(VI,{onClick:r,children:(0,Dr.jsx)(Ko,{size:20})}),(0,Dr.jsx)(BI,{children:(()=>{switch(o){case"signup":return"Create Account";case"reset":return"Reset Password";default:return"Sign In"}})()}),d&&(0,Dr.jsx)(YI,{children:d}),f&&(0,Dr.jsx)(JI,{children:f}),(0,Dr.jsxs)(HI,{onSubmit:async e=>{e.preventDefault(),u(!0),h(""),p("");try{let e;if("login"===o)e=await EI.signInWithEmail(a.email,a.password);else if("signup"===o){if(a.password!==a.confirmPassword)return h("Passwords do not match"),void u(!1);e=await EI.signUpWithEmail(a.email,a.password,a.displayName)}else"reset"===o&&(e=await EI.resetPassword(a.email));e.success?(p(e.message),"login"===o||"signup"===o?setTimeout(()=>{i&&i(e.user),r()},1e3):setTimeout(()=>s("login"),2e3)):h(e.message)}catch(t){h("An unexpected error occurred. Please try again.")}finally{u(!1)}},children:["signup"===o&&(0,Dr.jsxs)(qI,{children:[(0,Dr.jsx)(WI,{children:(0,Dr.jsx)(Oo,{size:16})}),(0,Dr.jsx)(KI,{type:"text",name:"displayName",placeholder:"Full Name",value:a.displayName,onChange:g,required:!0})]}),(0,Dr.jsxs)(qI,{children:[(0,Dr.jsx)(WI,{children:(0,Dr.jsx)(sd,{size:16})}),(0,Dr.jsx)(KI,{type:"email",name:"email",placeholder:"Email Address",value:a.email,onChange:g,required:!0})]}),"reset"!==o&&(0,Dr.jsxs)(qI,{children:[(0,Dr.jsx)(WI,{children:(0,Dr.jsx)(Eo,{size:16})}),(0,Dr.jsx)(KI,{type:"password",name:"password",placeholder:"Password",value:a.password,onChange:g,required:!0,minLength:6})]}),"signup"===o&&(0,Dr.jsxs)(qI,{children:[(0,Dr.jsx)(WI,{children:(0,Dr.jsx)(Eo,{size:16})}),(0,Dr.jsx)(KI,{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:a.confirmPassword,onChange:g,required:!0,minLength:6})]}),(0,Dr.jsx)(GI,{type:"submit",disabled:c,children:(()=>{if(c)return"Please wait...";switch(o){case"signup":return"Create Account";case"reset":return"Send Reset Email";default:return"Sign In"}})()})]}),"reset"!==o&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)($I,{children:(0,Dr.jsx)("span",{children:"or continue with"})}),(0,Dr.jsxs)(GI,{$variant:"google",onClick:async()=>{u(!0),h("");try{const e=await EI.signInWithGoogle();e.success?(p(e.message),setTimeout(()=>{i&&i(e.user),r()},1e3)):h(e.message)}catch(e){h("Google sign-in failed. Please try again.")}finally{u(!1)}},disabled:c,children:[(0,Dr.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,Dr.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Dr.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Dr.jsx)("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Dr.jsx)("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,Dr.jsxs)(GI,{$variant:"github",onClick:async()=>{u(!0),h("");try{const e=await EI.signInWithGithub();e.success?(p(e.message),setTimeout(()=>{i&&i(e.user),r()},1e3)):h(e.message)}catch(e){h("GitHub sign-in failed. Please try again.")}finally{u(!1)}},disabled:c,children:[(0,Dr.jsx)(ad,{size:16}),"Continue with GitHub"]})]}),(0,Dr.jsxs)("div",{style:{textAlign:"center",marginTop:"1rem"},children:["login"===o&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(QI,{onClick:()=>s("signup"),children:"Don't have an account? Sign up"}),(0,Dr.jsx)("br",{}),(0,Dr.jsx)(QI,{onClick:()=>s("reset"),children:"Forgot your password?"})]}),"signup"===o&&(0,Dr.jsx)(QI,{onClick:()=>s("login"),children:"Already have an account? Sign in"}),"reset"===o&&(0,Dr.jsx)(QI,{onClick:()=>s("login"),children:"Back to sign in"})]})]})})};const ZI=new class{constructor(){this.baseURL={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000",this.apiKey={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_KEY||"dev-key-12345",this.defaultHeaders={"Content-Type":"application/json","x-api-key":this.apiKey}}async renderAdvanced(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={timeline:e,transitions:t.transitions||[],animations:t.animations||[],settings:Te({quality:t.quality||"high",format:t.format||"mp4",resolution:t.resolution||{width:1920,height:1080},fps:t.fps||30},t.settings)};try{const e=await fetch("".concat(this.baseURL,"/api/shotstack/render-advanced"),{method:"POST",headers:this.defaultHeaders,body:JSON.stringify(n)});if(!e.ok)throw new Error("Render failed: ".concat(e.status," ").concat(e.statusText));const t=await e.json();if(!t.success)throw new Error(t.error||"Render failed");return{success:!0,renderJob:{id:t.data.result.filename,url:t.data.result.url,status:"completed",progress:100,metadata:t.data.metadata,effects:t.data.effects}}}catch(BA){throw console.error("Advanced render failed:",BA),new Error("Render service error: ".concat(BA.message))}}async renderPreview(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={timeline:e,segment:t.segment||null,transitions:(t.transitions||[]).slice(0,3),animations:(t.animations||[]).slice(0,3)};try{const e=await fetch("".concat(this.baseURL,"/api/shotstack/preview"),{method:"POST",headers:this.defaultHeaders,body:JSON.stringify(n)});if(!e.ok)throw new Error("Preview failed: ".concat(e.status," ").concat(e.statusText));const t=await e.json();if(!t.success)throw new Error(t.error||"Preview failed");return{success:!0,preview:{url:t.data.result.url,filename:t.data.result.filename,size:t.data.result.size,isPreview:!0}}}catch(BA){throw console.error("Preview render failed:",BA),new Error("Preview service error: ".concat(BA.message))}}async convertTimeline(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"shotstack";try{const n=await fetch("".concat(this.baseURL,"/api/shotstack/convert"),{method:"POST",headers:this.defaultHeaders,body:JSON.stringify({timeline:e,targetFormat:t})});if(!n.ok)throw new Error("Conversion failed: ".concat(n.status," ").concat(n.statusText));const r=await n.json();if(!r.success)throw new Error(r.error||"Timeline conversion failed");return{success:!0,convertedTimeline:r.data.timeline,metadata:r.data.conversion}}catch(BA){throw console.error("Timeline conversion failed:",BA),new Error("Conversion service error: ".concat(BA.message))}}async getRenderStatus(e){try{const t=await fetch("".concat(this.baseURL,"/api/render/status/").concat(e),{method:"GET",headers:this.defaultHeaders});if(!t.ok)throw new Error("Status check failed: ".concat(t.status," ").concat(t.statusText));const n=await t.json();return{success:!0,job:{id:e,status:n.status,progress:n.progress||0,url:n.url||null,error:n.error||null,estimatedTime:n.estimatedTime||null}}}catch(BA){throw console.error("Status check failed:",BA),new Error("Status service error: ".concat(BA.message))}}async cancelRender(e){try{const t=await fetch("".concat(this.baseURL,"/api/render/cancel/").concat(e),{method:"POST",headers:this.defaultHeaders});if(!t.ok)throw new Error("Cancel failed: ".concat(t.status," ").concat(t.statusText));const n=await t.json();return{success:n.success,message:n.message}}catch(BA){throw console.error("Cancel render failed:",BA),new Error("Cancel service error: ".concat(BA.message))}}async batchRender(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={timelines:e,settings:t.settings||{},priority:t.priority||"normal"};try{const e=await fetch("".concat(this.baseURL,"/api/render/batch"),{method:"POST",headers:this.defaultHeaders,body:JSON.stringify(n)});if(!e.ok)throw new Error("Batch render failed: ".concat(e.status," ").concat(e.statusText));const t=await e.json();return{success:!0,batchId:t.batchId,jobs:t.jobs||[]}}catch(BA){throw console.error("Batch render failed:",BA),new Error("Batch service error: ".concat(BA.message))}}async getTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=e?"".concat(this.baseURL,"/api/templates?category=").concat(e):"".concat(this.baseURL,"/api/templates"),n=await fetch(t,{method:"GET",headers:this.defaultHeaders});if(!n.ok)throw new Error("Templates fetch failed: ".concat(n.status," ").concat(n.statusText));return{success:!0,templates:(await n.json()).data||[]}}catch(BA){throw console.error("Templates fetch failed:",BA),new Error("Templates service error: ".concat(BA.message))}}async renderFromTemplate(e,t){const n={templateId:e,data:t,settings:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).settings||{}};try{const e=await fetch("".concat(this.baseURL,"/api/templates/render"),{method:"POST",headers:this.defaultHeaders,body:JSON.stringify(n)});if(!e.ok)throw new Error("Template render failed: ".concat(e.status," ").concat(e.statusText));const t=await e.json();if(!t.success)throw new Error(t.error||"Template render failed");return{success:!0,renderJob:t.data}}catch(BA){throw console.error("Template render failed:",BA),new Error("Template service error: ".concat(BA.message))}}async exportTimeline(e,t){const n={timeline:e,format:t,options:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}};try{const e=await fetch("".concat(this.baseURL,"/api/export"),{method:"POST",headers:this.defaultHeaders,body:JSON.stringify(n)});if(!e.ok)throw new Error("Export failed: ".concat(e.status," ").concat(e.statusText));const t=await e.json();return{success:!0,exportUrl:t.url,filename:t.filename,format:t.format}}catch(BA){throw console.error("Export failed:",BA),new Error("Export service error: ".concat(BA.message))}}async getRenderCost(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={timeline:e,settings:t.settings||{},region:t.region||"us-east-1"};try{const e=await fetch("".concat(this.baseURL,"/api/render/cost"),{method:"POST",headers:this.defaultHeaders,body:JSON.stringify(n)});if(!e.ok)throw new Error("Cost estimate failed: ".concat(e.status," ").concat(e.statusText));const t=await e.json();return{success:!0,cost:t.cost,currency:t.currency,breakdown:t.breakdown,estimatedTime:t.estimatedTime}}catch(BA){throw console.error("Cost estimate failed:",BA),new Error("Cost service error: ".concat(BA.message))}}async processAsset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new FormData;n.append("file",e),n.append("options",JSON.stringify(t));try{const e=await fetch("".concat(this.baseURL,"/api/assets/process"),{method:"POST",headers:{"x-api-key":this.apiKey},body:n});if(!e.ok)throw new Error("Asset processing failed: ".concat(e.status," ").concat(e.statusText));return{success:!0,asset:(await e.json()).data}}catch(BA){throw console.error("Asset processing failed:",BA),new Error("Asset service error: ".concat(BA.message))}}subscribeToRenderProgress(e,t,n,r){const i="".concat(this.baseURL.replace("http","ws"),"/ws/render/").concat(e),o=new WebSocket(i);return o.onmessage=e=>{try{const i=JSON.parse(e.data);switch(i.type){case"progress":t(i.progress,i.stage);break;case"complete":n(i.result),o.close();break;case"error":r(new Error(i.error)),o.close()}}catch(BA){r(new Error("WebSocket message parse error"))}},o.onerror=e=>{r(new Error("WebSocket connection error"))},{close:()=>o.close(),readyState:o.readyState}}async healthCheck(){try{const e=await fetch("".concat(this.baseURL,"/api/render/health"),{method:"GET",headers:this.defaultHeaders});if(!e.ok)throw new Error("Health check failed: ".concat(e.status));const t=await e.json();return{success:!0,status:t.status,services:t.services,performance:t.performance}}catch(BA){return{success:!1,error:BA.message}}}};const eA=new class{constructor(){this.baseURL={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000",this.userId=this.getUserId(),this.collaborationSocket=null}async saveProject(e,t){try{const n=await fetch("".concat(this.baseURL,"/api/projects/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getAuthToken())},body:JSON.stringify(Te(Te({},t),{},{userId:this.userId,lastModified:(new Date).toISOString()}))});if(!n.ok)throw new Error("Failed to save project: ".concat(n.statusText));const r=await n.json();return this.syncProjectUpdate(e,t),r}catch(BA){console.warn("\u26a0\ufe0f Cloud save failed, using local storage fallback:",BA);try{const n=Te(Te({},t),{},{userId:this.userId,lastModified:(new Date).toISOString(),savedLocally:!0});return localStorage.setItem("project_".concat(e),JSON.stringify(n)),console.log("\u2705 Project saved to local storage as fallback"),{success:!0,savedLocally:!0}}catch(n){throw console.error("\u274c Both cloud and local save failed:",n),new Error("Failed to save project to cloud or local storage")}}}async loadProject(e){try{const t=await fetch("".concat(this.baseURL,"/api/projects/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!t.ok)throw new Error("Failed to load project: ".concat(t.statusText));const n=await t.json();return this.initCollaboration(e),n}catch(BA){throw console.error("Load project failed:",BA),BA}}async createProject(e){try{const t=await fetch("".concat(this.baseURL,"/api/projects"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getAuthToken())},body:JSON.stringify(Te(Te({},e),{},{userId:this.userId,createdAt:(new Date).toISOString(),collaborators:[this.userId]}))});if(!t.ok)throw new Error("Failed to create project: ".concat(t.statusText));return await t.json()}catch(BA){throw console.error("Create project failed:",BA),BA}}async deleteProject(e){try{const t=await fetch("".concat(this.baseURL,"/api/projects/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!t.ok)throw new Error("Failed to delete project: ".concat(t.statusText));return!0}catch(BA){throw console.error("Delete project failed:",BA),BA}}async listProjects(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams(Te({userId:this.userId},e)),n=await fetch("".concat(this.baseURL,"/api/projects?").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!n.ok)throw new Error("Failed to list projects: ".concat(n.statusText));return await n.json()}catch(BA){throw console.error("List projects failed:",BA),BA}}async uploadAsset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n=new FormData;n.append("file",e),n.append("metadata",JSON.stringify(Te(Te({},t),{},{userId:this.userId,uploadedAt:(new Date).toISOString()})));const r=await fetch("".concat(this.baseURL,"/api/assets/upload"),{method:"POST",headers:{Authorization:"Bearer ".concat(this.getAuthToken())},body:n});if(!r.ok)throw new Error("Failed to upload asset: ".concat(r.statusText));const i=await r.json();return await this.processAssetMetadata(i.assetId),i}catch(BA){throw console.error("Upload asset failed:",BA),BA}}async listAssets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const n=new URLSearchParams(Te(Te({userId:this.userId},e&&{category:e}),t&&{search:t})),r=await fetch("".concat(this.baseURL,"/api/assets?").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!r.ok)throw new Error("Failed to list assets: ".concat(r.statusText));return await r.json()}catch(BA){throw console.error("List assets failed:",BA),BA}}async deleteAsset(e){try{const t=await fetch("".concat(this.baseURL,"/api/assets/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!t.ok)throw new Error("Failed to delete asset: ".concat(t.statusText));return!0}catch(BA){throw console.error("Delete asset failed:",BA),BA}}async processAssetMetadata(e){try{const t=await fetch("".concat(this.baseURL,"/api/assets/").concat(e,"/process"),{method:"POST",headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!t.ok)throw new Error("Failed to process asset: ".concat(t.statusText));return await t.json()}catch(BA){throw console.error("Process asset failed:",BA),BA}}initCollaboration(e){this.collaborationSocket&&this.collaborationSocket.close();const t="".concat(this.baseURL.replace("http","ws"),"/ws/collaboration/").concat(e);return this.collaborationSocket=new WebSocket(t),this.collaborationSocket.onopen=()=>{console.log("\ud83e\udd1d Collaboration session started"),this.sendCollaborationMessage({type:"join",userId:this.userId,timestamp:Date.now()})},this.collaborationSocket.onmessage=e=>{const t=JSON.parse(e.data);this.handleCollaborationMessage(t)},this.collaborationSocket.onerror=e=>{console.error("Collaboration error:",e)},this.collaborationSocket}sendCollaborationMessage(e){var t;(null===(t=this.collaborationSocket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&this.collaborationSocket.send(JSON.stringify(Te(Te({},e),{},{userId:this.userId,timestamp:Date.now()})))}handleCollaborationMessage(e){const t=new CustomEvent("collaboration",{detail:e});window.dispatchEvent(t)}syncProjectUpdate(e,t){this.sendCollaborationMessage({type:"project_update",projectId:e,changes:t,version:Date.now()})}syncCursorPosition(e){this.sendCollaborationMessage({type:"cursor_position",position:e,throttle:!0})}syncSelection(e){this.sendCollaborationMessage({type:"selection_change",selection:e})}async saveTemplate(e){try{const t=await fetch("".concat(this.baseURL,"/api/templates"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getAuthToken())},body:JSON.stringify(Te(Te({},e),{},{userId:this.userId,createdAt:(new Date).toISOString()}))});if(!t.ok)throw new Error("Failed to save template: ".concat(t.statusText));return await t.json()}catch(BA){throw console.error("Save template failed:",BA),BA}}async listTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=new URLSearchParams(Te({},e&&{category:e})),n=await fetch("".concat(this.baseURL,"/api/templates?").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!n.ok)throw new Error("Failed to list templates: ".concat(n.statusText));return await n.json()}catch(BA){throw console.error("List templates failed:",BA),BA}}async saveVersion(e,t){try{const n=await fetch("".concat(this.baseURL,"/api/projects/").concat(e,"/versions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getAuthToken())},body:JSON.stringify(Te(Te({},t),{},{userId:this.userId,timestamp:(new Date).toISOString()}))});if(!n.ok)throw new Error("Failed to save version: ".concat(n.statusText));return await n.json()}catch(BA){throw console.error("Save version failed:",BA),BA}}async listVersions(e){try{const t=await fetch("".concat(this.baseURL,"/api/projects/").concat(e,"/versions"),{method:"GET",headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!t.ok)throw new Error("Failed to list versions: ".concat(t.statusText));return await t.json()}catch(BA){throw console.error("List versions failed:",BA),BA}}async restoreVersion(e,t){try{const n=await fetch("".concat(this.baseURL,"/api/projects/").concat(e,"/versions/").concat(t,"/restore"),{method:"POST",headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!n.ok)throw new Error("Failed to restore version: ".concat(n.statusText));return await n.json()}catch(BA){throw console.error("Restore version failed:",BA),BA}}async shareProject(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"view";try{const r=await fetch("".concat(this.baseURL,"/api/projects/").concat(e,"/share"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getAuthToken())},body:JSON.stringify({collaborators:t,permissions:n,sharedBy:this.userId,sharedAt:(new Date).toISOString()})});if(!r.ok)throw new Error("Failed to share project: ".concat(r.statusText));return await r.json()}catch(BA){throw console.error("Share project failed:",BA),BA}}async generateShareLink(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n=await fetch("".concat(this.baseURL,"/api/projects/").concat(e,"/share-link"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getAuthToken())},body:JSON.stringify(Te(Te({},t),{},{createdBy:this.userId,createdAt:(new Date).toISOString()}))});if(!n.ok)throw new Error("Failed to generate share link: ".concat(n.statusText));return await n.json()}catch(BA){throw console.error("Generate share link failed:",BA),BA}}getUserId(){return localStorage.getItem("userId")||"anonymous-user"}getAuthToken(){return localStorage.getItem("authToken")||"dev-token"}async syncOfflineChanges(){const e=this.getOfflineChanges();for(const t of e)try{await this.applyOfflineChange(t),this.removeOfflineChange(t.id)}catch(BA){console.error("Failed to sync offline change:",BA)}}saveOfflineChange(e){const t=this.getOfflineChanges();t.push(Te(Te({},e),{},{id:Date.now().toString(),timestamp:(new Date).toISOString()})),localStorage.setItem("offlineChanges",JSON.stringify(t))}getOfflineChanges(){try{return JSON.parse(localStorage.getItem("offlineChanges")||"[]")}catch(e){return[]}}removeOfflineChange(e){const t=this.getOfflineChanges().filter(t=>t.id!==e);localStorage.setItem("offlineChanges",JSON.stringify(t))}async applyOfflineChange(e){switch(e.type){case"project_save":return this.saveProject(e.projectId,e.data);case"asset_upload":return this.uploadAsset(e.file,e.metadata);default:console.warn("Unknown offline change type:",e.type)}}cleanup(){this.collaborationSocket&&(this.collaborationSocket.close(),this.collaborationSocket=null)}},tA=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return Te({id:e,name:t,type:n,url:r,thumbnail:i.thumbnail||r,duration:i.duration||("image"===n?5:"audio"===n?30:10),size:i.size||1e6,category:i.category||n,resolution:i.resolution||("image"===n||"video"===n?{width:1920,height:1080}:void 0),tags:i.tags||[],lazy:!0},i)},nA={videos:[tA("vid-1","Ocean Waves","video","https://player.vimeo.com/external/370467553.sd.mp4?s=e90dcaba73c19e0e36f03406b47bbd6d9946b5c2&profile_id=164&oauth2_token_id=57447761",{thumbnail:"https://images.unsplash.com/photo-1505142468610-359e7d316be0?w=300&h=200&fit=crop",duration:15,category:"nature",tags:["ocean","waves","nature","blue"]}),tA("vid-2","City Traffic","video","https://player.vimeo.com/external/395433493.sd.mp4?s=b76c7c5f9b1c7e8d2f4a5c6d7e8f9g0h&profile_id=164",{thumbnail:"https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=300&h=200&fit=crop",duration:12,category:"urban",tags:["city","traffic","urban","motion"]})],images:[tA("img-1","Mountain Landscape","image","https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop",{thumbnail:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300&h=200&fit=crop",category:"nature",tags:["mountain","landscape","nature","scenic"]}),tA("img-2","Urban Architecture","image","https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=1920&h=1080&fit=crop",{thumbnail:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=300&h=200&fit=crop",category:"architecture",tags:["building","architecture","urban","modern"]})],audio:[tA("aud-1","Ambient Background","audio","https://www.soundjay.com/misc/sounds/magic-chime-02.wav",{thumbnail:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300&h=200&fit=crop",duration:30,category:"ambient",tags:["ambient","background","calm","peaceful"]})]},rA={videos:[tA("vid-3","Forest Walk","video","https://player.vimeo.com/external/370467553.sd.mp4",{thumbnail:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=300&h=200&fit=crop",duration:20,category:"nature",tags:["forest","walk","nature","trees"]}),tA("vid-4","Technology Abstract","video","https://player.vimeo.com/external/395433493.sd.mp4",{thumbnail:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=300&h=200&fit=crop",duration:18,category:"technology",tags:["tech","abstract","digital","modern"]}),tA("vid-5","Cooking Process","video","https://player.vimeo.com/external/370467553.sd.mp4",{thumbnail:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=300&h=200&fit=crop",duration:25,category:"lifestyle",tags:["cooking","food","kitchen","lifestyle"]})],images:[tA("img-3","Sunset Beach","image","https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1920&h=1080&fit=crop",{thumbnail:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=300&h=200&fit=crop",category:"nature",tags:["sunset","beach","ocean","golden"]}),tA("img-4","Coffee Shop","image","https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=1920&h=1080&fit=crop",{thumbnail:"https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=300&h=200&fit=crop",category:"lifestyle",tags:["coffee","shop","interior","cozy"]}),tA("img-5","Abstract Geometric","image","https://images.unsplash.com/photo-1557683316-973673baf926?w=1920&h=1080&fit=crop",{thumbnail:"https://images.unsplash.com/photo-1557683316-973673baf926?w=300&h=200&fit=crop",category:"abstract",tags:["abstract","geometric","colorful","modern"]})],audio:[tA("aud-2","Upbeat Electronic","audio","https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",{thumbnail:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300&h=200&fit=crop",duration:45,category:"electronic",tags:["upbeat","electronic","energetic","modern"]}),tA("aud-3","Nature Sounds","audio","https://www.soundjay.com/misc/sounds/magic-chime-02.wav",{thumbnail:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=300&h=200&fit=crop",duration:60,category:"nature",tags:["nature","birds","forest","peaceful"]})]},iA=[{id:"txt-1",name:"Title Text",type:"text",content:"Your Title Here",fontSize:48,fontWeight:"bold",color:"#ffffff",category:"title",tags:["title","header","large"]},{id:"txt-2",name:"Subtitle",type:"text",content:"Your subtitle text",fontSize:24,fontWeight:"normal",color:"#cccccc",category:"subtitle",tags:["subtitle","secondary","medium"]},{id:"txt-3",name:"Body Text",type:"text",content:"Body text content",fontSize:16,fontWeight:"normal",color:"#ffffff",category:"body",tags:["body","paragraph","content"]},{id:"txt-4",name:"Call to Action",type:"text",content:"Click Here!",fontSize:32,fontWeight:"bold",color:"#00d4ff",category:"cta",tags:["cta","button","action"]},{id:"txt-5",name:"Caption",type:"text",content:"Image caption text",fontSize:14,fontWeight:"normal",color:"#999999",category:"caption",tags:["caption","small","description"]}],oA=[{id:"font-1",name:"Arial",type:"font",fontFamily:"Arial, sans-serif",category:"sans-serif",tags:["clean","modern","readable"]},{id:"font-2",name:"Georgia",type:"font",fontFamily:"Georgia, serif",category:"serif",tags:["elegant","traditional","readable"]},{id:"font-3",name:"Helvetica",type:"font",fontFamily:"Helvetica, Arial, sans-serif",category:"sans-serif",tags:["clean","swiss","minimal"]},{id:"font-4",name:"Times New Roman",type:"font",fontFamily:"Times New Roman, serif",category:"serif",tags:["classic","formal","traditional"]},{id:"font-5",name:"Courier New",type:"font",fontFamily:"Courier New, monospace",category:"monospace",tags:["code","typewriter","technical"]}];let sA=!1,aA=null;const lA=async()=>sA||aA?aA||Promise.resolve():(aA=new Promise(e=>{setTimeout(()=>{sA=!0,e()},100)}),aA),cA=async function(){const e={videos:nA.videos,images:nA.images,audio:nA.audio,text:iA,fonts:oA};return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(await lA(),{videos:[...nA.videos,...rA.videos],images:[...nA.images,...rA.images],audio:[...nA.audio,...rA.audio],text:iA,fonts:oA}):e};const uA=new class{constructor(){this.cache=new Map,this.loadingStates=new Map,this.thumbnailCache=new Map,this.initialized=!1,this.firestoreCollection="assets",this.storageFolder="user-assets",this.sampleAssetsInitialized=!1}async initialize(){if(!this.initialized)try{console.log("\ud83d\ude80 AssetManager: Initializing with Firestore integration...");const e=performance.now();await this.ensureSampleAssetsInFirestore();const t=await this.getAssetsFromFirestore();this.cache.set("firestore",t),this.initialized=!0;const n=performance.now()-e;return console.log("\u2705 AssetManager: Initialized with ".concat(t.length," assets in ").concat(n.toFixed(2),"ms")),t}catch(BA){console.error("\u274c AssetManager: Failed to initialize with Firestore:",BA),console.log("\ud83d\udd04 AssetManager: Falling back to local sample assets...");const t=await cA(!0),n=Object.values(t).flat();return this.cache.set("fallback",n),this.initialized=!0,n}}async ensureSampleAssetsInFirestore(){if(!this.sampleAssetsInitialized)try{const e=DE(kI,this.firestoreCollection),t=EC(e,TC("source","==","sample")),n=await WC(t);if(n.size>0)return console.log("\u2705 Found ".concat(n.size," sample assets already in Firestore")),void(this.sampleAssetsInitialized=!0);console.log("\ud83d\udce6 Importing sample assets to Firestore...");const r=await cA(!0),i=Object.values(r).flat(),o=[];for(const s of i){const t=Te(Te({},s),{},{source:"sample",createdAt:new Date,updatedAt:new Date,downloadURL:s.url,thumbnailURL:s.thumbnail,isPublic:!0,verified:!0});o.push($C(e,t))}await Promise.all(o),console.log("\u2705 Successfully imported ".concat(i.length," sample assets to Firestore")),this.sampleAssetsInitialized=!0}catch(BA){console.warn("\u26a0\ufe0f Failed to ensure sample assets in Firestore:",BA)}}async getAssetsFromFirestore(){try{const e=EC(DE(kI,this.firestoreCollection),RC("createdAt","desc")),t=await WC(e),n=[];return t.forEach(e=>{n.push(Te({id:e.id,firestoreId:e.id},e.data()))}),console.log("\ud83d\udce6 Loaded ".concat(n.length," assets from Firestore")),n}catch(BA){throw console.error("\u274c Failed to load assets from Firestore:",BA),BA}}async getAllAssets(){const e="all";if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.cache.has(e))return this.cache.get(e);try{console.log("\ud83d\udce6 AssetManager: Loading all assets from Firestore..."),this.initialized||await this.initialize();const t=(await this.getAssetsFromFirestore()).map(e=>this.processAsset(e));return this.cache.set(e,t),t}catch(BA){console.error("\u274c AssetManager: Failed to load assets from Firestore:",BA),console.log("\ud83d\udd04 AssetManager: Using local sample assets as fallback");const t=await cA(!0),n=Object.values(t).flat().map(e=>this.processAsset(e));return this.cache.set("fallback",n),n}}async getAssetsByCategory(e){try{const t=await this.getAllAssets();return"all"===e?t:t.filter(t=>{var n;return t.category===e||(null===(n=t.tags)||void 0===n?void 0:n.includes(e))})}catch(BA){return console.error("\u274c AssetManager: Failed to load category ".concat(e,":"),BA),[]}}async searchAssets(e){if(!e||""===e.trim())return this.getAllAssets();try{const t=await this.getAllAssets(),n=e.toLowerCase();return t.filter(e=>{var t,r,i;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(r=e.category)||void 0===r?void 0:r.toLowerCase().includes(n))||(null===(i=e.tags)||void 0===i?void 0:i.some(e=>e.toLowerCase().includes(n)))})}catch(BA){return console.error("\u274c AssetManager: Search failed:",BA),[]}}async uploadAsset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{console.log("\ud83d\udce4 Uploading asset:",e.name);const i=Date.now(),o="".concat(i,"-").concat(e.name),s=yI(xI,"".concat(this.storageFolder,"/").concat(o));let a;t.onProgress&&t.onProgress(50);try{const n=function(e,t,n){return sI(e=zd(e),t,n)}(s,e),r=await n;a=await function(e){return aI(e=zd(e))}(r.ref),t.onProgress&&t.onProgress(100),console.log("\u2705 Firebase upload successful:",a)}catch(n){console.warn("\u26a0\ufe0f Firebase upload failed (likely CORS or permissions):",n.message),a=URL.createObjectURL(e),console.log("\ud83d\udd04 Using local blob URL as fallback:",a),t.onProgress&&t.onProgress(100)}const l={name:e.name,type:this.getAssetTypeFromFile(e),category:this.getCategoryFromFile(e),size:e.size,mimeType:e.type,downloadURL:a,thumbnailURL:a,source:a.startsWith("blob:")?"local-fallback":"firebase-upload",filename:o,storagePath:a.startsWith("blob:")?null:"".concat(this.storageFolder,"/").concat(o),createdAt:new Date,updatedAt:new Date,tags:this.generateTagsFromFile(e),isPublic:!1,verified:!1,localFile:a.startsWith("blob:")?e:null};let c;try{const e=DE(kI,this.firestoreCollection),t=await $C(e,Te(Te({},l),{},{localFile:null}));c=Te({id:t.id,firestoreId:t.id},l),console.log("\u2705 Asset metadata saved to Firestore")}catch(r){console.warn("\u26a0\ufe0f Firestore save failed, using local-only asset:",r.message),c=Te(Te({id:"local-".concat(i,"-").concat(Math.random().toString(36).substr(2,9)),firestoreId:null},l),{},{source:"local-only"})}return console.log("\u2705 Asset processed successfully:",c.name),this.cache.clear(),c}catch(BA){console.error("\u274c Asset upload failed completely:",BA);const n={id:"fallback-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:e.name,type:this.getAssetTypeFromFile(e),category:this.getCategoryFromFile(e),size:e.size,mimeType:e.type,downloadURL:URL.createObjectURL(e),thumbnailURL:URL.createObjectURL(e),source:"fallback-local",createdAt:new Date,tags:this.generateTagsFromFile(e),localFile:e,uploadError:BA.message};return console.log("\ud83c\udd98 Created fallback local asset:",n.name),n}}async deleteAsset(e){try{const t=await this.getAssetById(e);if(!t)throw new Error("Asset not found");if("user-upload"===t.source&&t.storagePath){const e=yI(xI,t.storagePath);await function(e){return lI(e=zd(e))}(e)}const n=jE(kI,this.firestoreCollection,t.firestoreId);await GC(n),console.log("\u2705 Asset deleted successfully:",t.name),this.cache.clear()}catch(BA){throw console.error("\u274c Asset deletion failed:",BA),BA}}async getAssetById(e){try{return(await this.getAllAssets()).find(t=>t.id===e||t.firestoreId===e)}catch(BA){return console.error("\u274c Failed to get asset by ID:",BA),null}}processAsset(e){return Te(Te({},e),{},{id:e.id||e.firestoreId||"asset-".concat(Date.now()),name:e.name||"Unnamed Asset",type:e.type||"unknown",url:e.downloadURL||e.url||"",thumbnail:e.thumbnailURL||e.thumbnail||e.downloadURL||e.url||"",duration:e.duration||("image"===e.type?5:10),size:e.size||0,category:e.category||e.type||"other",tags:e.tags||[],loadTime:Date.now(),processed:!0})}getAssetTypeFromFile(e){return e.type.startsWith("video/")?"video":e.type.startsWith("audio/")?"audio":e.type.startsWith("image/")?"image":"other"}getCategoryFromFile(e){return this.getAssetTypeFromFile(e)}generateTagsFromFile(e){const t=[this.getAssetTypeFromFile(e)],n=e.name.toLowerCase();return n.includes("background")&&t.push("background"),n.includes("music")&&t.push("music"),n.includes("nature")&&t.push("nature"),n.includes("urban")&&t.push("urban"),t}subscribeToAssets(e){try{const t=DE(kI,this.firestoreCollection);return QC(EC(t,RC("createdAt","desc")),t=>{const n=[];t.forEach(e=>{n.push(Te({id:e.id,firestoreId:e.id},e.data()))}),console.log("\ud83d\udd04 Real-time update: ".concat(n.length," assets")),this.cache.set("firestore",n);const r=n.map(e=>this.processAsset(e));e(r)})}catch(BA){return console.error("\u274c Failed to subscribe to assets:",BA),()=>{}}}clearCache(){this.cache.clear(),this.thumbnailCache.clear(),console.log("\ud83e\uddf9 AssetManager: Cache cleared")}getCacheStats(){return{cacheSize:this.cache.size,thumbnailCacheSize:this.thumbnailCache.size,cacheKeys:Array.from(this.cache.keys()),initialized:this.initialized,sampleAssetsInitialized:this.sampleAssetsInitialized}}},dA=uA;new class{constructor(){this.cache=new Map,this.listeners=new Map,this.projectsCollection="projects",this.versionsCollection="project_versions",this.collaborationCollection="project_collaboration",this.initialized=!1}async initialize(){if(!this.initialized)try{console.log("\ud83d\ude80 ProjectManager: Initializing..."),this.initialized=!0,console.log("\u2705 ProjectManager: Initialized successfully")}catch(BA){throw console.error("\u274c ProjectManager: Failed to initialize:",BA),BA}}async createProject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new Date,n="project_".concat(t.getTime(),"_").concat(Math.random().toString(36).substr(2,9)),r={name:"Untitled Project",description:"",settings:{resolution:{width:1920,height:1080},fps:30,duration:30,quality:"high",format:"mp4"},timeline:{duration:30,position:0,zoomLevel:1,tracks:[]},assets:[],metadata:{version:"1.0.0",createdAt:XC(),updatedAt:XC(),createdBy:"user",lastModifiedBy:"user",status:"draft",tags:[],category:"video",isPublic:!1,collaborators:[],exportHistory:[],totalEdits:0},cache:{lastSaved:XC(),autoSaveInterval:3e4,compressionEnabled:!0,thumbnailGenerated:!1}},i=Te(Te(Te({},r),e),{},{id:n,metadata:Te(Te({},r.metadata),e.metadata),settings:Te(Te({},r.settings),e.settings)}),o=DE(kI,this.projectsCollection),s=await $C(o,i),a=Te(Te({},i),{},{firestoreId:s.id,id:s.id});return await this.createVersion(a.id,a,"Initial project creation"),this.cache.set(a.id,a),console.log("\u2705 Project created successfully:",a.name),a}catch(BA){throw console.error("\u274c Failed to create project:",BA),BA}}async getProject(e){try{var t,n,r,i;if(this.cache.has(e)){const t=this.cache.get(e);if(Date.now()-t._cacheTime<3e5)return t}const o=jE(kI,this.projectsCollection,e),s=await HC(o);if(!s.exists())throw new Error("Project ".concat(e," not found"));const a=Te(Te({id:s.id,firestoreId:s.id},s.data()),{},{_cacheTime:Date.now()});return null!==(t=a.metadata)&&void 0!==t&&null!==(n=t.createdAt)&&void 0!==n&&n.toDate&&(a.metadata.createdAt=a.metadata.createdAt.toDate()),null!==(r=a.metadata)&&void 0!==r&&null!==(i=r.updatedAt)&&void 0!==i&&i.toDate&&(a.metadata.updatedAt=a.metadata.updatedAt.toDate()),this.cache.set(e,a),console.log("\ud83d\udce6 Project loaded:",a.name),a}catch(BA){throw console.error("\u274c Failed to get project:",BA),BA}}async updateProject(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const{createVersion:r=!1,versionMessage:i="Project updated",optimisticUpdate:o=!0}=n,s=await this.getProject(e),a=Te(Te({},t),{},{metadata:Te(Te(Te({},s.metadata),t.metadata),{},{updatedAt:XC(),lastModifiedBy:"user",totalEdits:eT(1)})});if(o){const t=Te(Te(Te({},s),a),{},{metadata:Te(Te(Te({},s.metadata),a.metadata),{},{updatedAt:new Date})});this.cache.set(e,t)}const l=jE(kI,this.projectsCollection,e);if(await KC(l,a),r){const t=Te(Te({},s),a);await this.createVersion(e,t,i)}const c=await this.getProject(e);return console.log("\u2705 Project updated successfully:",c.name),c}catch(BA){throw console.error("\u274c Failed to update project:",BA),this.cache.delete(e),BA}}async deleteProject(e){try{await this.deleteAllVersions(e),await this.deleteCollaborationData(e);const t=jE(kI,this.projectsCollection,e);await GC(t),this.cache.delete(e),this.listeners.has(e)&&(this.listeners.get(e)(),this.listeners.delete(e)),console.log("\u2705 Project deleted successfully:",e)}catch(BA){throw console.error("\u274c Failed to delete project:",BA),BA}}async getProjects(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const{limit:t=20,orderBy:n="metadata.updatedAt",orderDirection:r="desc",status:i=null,createdBy:o=null}=e;let s=DE(kI,this.projectsCollection);i&&(s=EC(s,TC("metadata.status","==",i))),o&&(s=EC(s,TC("metadata.createdBy","==",o))),s=EC(s,RC(n,r),OC(t));const a=await WC(s),l=[];return a.forEach(e=>{var t,n,r,i;const o=Te({id:e.id,firestoreId:e.id},e.data());null!==(t=o.metadata)&&void 0!==t&&null!==(n=t.createdAt)&&void 0!==n&&n.toDate&&(o.metadata.createdAt=o.metadata.createdAt.toDate()),null!==(r=o.metadata)&&void 0!==r&&null!==(i=r.updatedAt)&&void 0!==i&&i.toDate&&(o.metadata.updatedAt=o.metadata.updatedAt.toDate()),l.push(o)}),console.log("\ud83d\udce6 Loaded ".concat(l.length," projects")),l}catch(BA){throw console.error("\u274c Failed to get projects:",BA),BA}}async createVersion(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Version created";try{var r;const i={projectId:e,data:t,message:n,createdAt:XC(),createdBy:"user",version:(null===(r=t.metadata)||void 0===r?void 0:r.version)||"1.0.0"},o=DE(kI,this.versionsCollection);await $C(o,i),console.log("\ud83d\udcdd Version created for project:",e)}catch(BA){console.error("\u274c Failed to create version:",BA)}}async getVersions(e){try{const t=EC(DE(kI,this.versionsCollection),TC("projectId","==",e),RC("createdAt","desc"),OC(10)),n=await WC(t),r=[];return n.forEach(e=>{var t;const n=Te({id:e.id},e.data());null!==(t=n.createdAt)&&void 0!==t&&t.toDate&&(n.createdAt=n.createdAt.toDate()),r.push(n)}),r}catch(BA){return console.error("\u274c Failed to get versions:",BA),[]}}setupAutoSave(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4;return this.autoSaveTimer&&clearInterval(this.autoSaveTimer),this.autoSaveTimer=setInterval(async()=>{try{const n=t();n&&this.hasChanges(e,n)&&(await this.updateProject(e,n,{optimisticUpdate:!1}),console.log("\ud83d\udcbe Auto-saved project:",e))}catch(BA){console.error("\u274c Auto-save failed:",BA)}},n),()=>{this.autoSaveTimer&&(clearInterval(this.autoSaveTimer),this.autoSaveTimer=null)}}subscribeToProject(e,t){try{const n=QC(jE(kI,this.projectsCollection,e),n=>{if(n.exists()){var r,i,o,s;const a=Te({id:n.id,firestoreId:n.id},n.data());null!==(r=a.metadata)&&void 0!==r&&null!==(i=r.createdAt)&&void 0!==i&&i.toDate&&(a.metadata.createdAt=a.metadata.createdAt.toDate()),null!==(o=a.metadata)&&void 0!==o&&null!==(s=o.updatedAt)&&void 0!==s&&s.toDate&&(a.metadata.updatedAt=a.metadata.updatedAt.toDate()),this.cache.set(e,a),t(a),console.log("\ud83d\udd04 Real-time project update:",a.name)}});return this.listeners.set(e,n),n}catch(BA){return console.error("\u274c Failed to subscribe to project:",BA),()=>{}}}async exportProject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json";try{const n=Te(Te({},await this.getProject(e)),{},{exportedAt:(new Date).toISOString(),exportFormat:t,exportVersion:"1.0.0"});return await this.updateProject(e,{"metadata.exportHistory":ZC({timestamp:XC(),format:t,size:JSON.stringify(n).length})}),n}catch(BA){throw console.error("\u274c Failed to export project:",BA),BA}}async importProject(e){try{if(!e||"object"!==typeof e)throw new Error("Invalid project data");const t=Te({},e);delete t.exportedAt,delete t.exportFormat,delete t.exportVersion,delete t.id,delete t.firestoreId;const n=await this.createProject(Te(Te({},t),{},{name:"".concat(t.name||"Imported Project"," (Copy)"),metadata:Te(Te({},t.metadata),{},{importedAt:new Date,originalId:e.id})}));return console.log("\u2705 Project imported successfully:",n.name),n}catch(BA){throw console.error("\u274c Failed to import project:",BA),BA}}hasChanges(e,t){const n=this.cache.get(e);return!n||(JSON.stringify(n.timeline)!==JSON.stringify(t.timeline)||JSON.stringify(n.settings)!==JSON.stringify(t.settings))}async deleteAllVersions(e){try{const t=EC(DE(kI,this.versionsCollection),TC("projectId","==",e)),n=await WC(t),r=n.docs.map(e=>GC(e.ref));await Promise.all(r),console.log("\ud83d\uddd1\ufe0f Deleted ".concat(n.size," versions for project:"),e)}catch(BA){console.error("\u274c Failed to delete versions:",BA)}}async deleteCollaborationData(e){try{const t=EC(DE(kI,this.collaborationCollection),TC("projectId","==",e)),n=(await WC(t)).docs.map(e=>GC(e.ref));await Promise.all(n),console.log("\ud83d\uddd1\ufe0f Deleted collaboration data for project:",e)}catch(BA){console.error("\u274c Failed to delete collaboration data:",BA)}}cleanup(){this.autoSaveTimer&&(clearInterval(this.autoSaveTimer),this.autoSaveTimer=null),this.listeners.forEach(e=>{e()}),this.listeners.clear(),this.cache.clear(),console.log("\ud83e\uddf9 ProjectManager: Cleaned up resources")}};var hA,fA,pA,gA,mA,yA,vA,bA,wA,kA,xA,SA,_A,EA,CA;const TA=yr.div(hA||(hA=Ie(["\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  background: #0a0a0a;\n  color: white;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n"]))),IA=yr.div(fA||(fA=Ie(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.75rem 1rem;\n  background: linear-gradient(90deg, #1a1a1a 0%, #2a2a2a 100%);\n  border-bottom: 1px solid #333;\n  min-height: 60px;\n"]))),AA=yr.h1(pA||(pA=Ie(["\n  margin: 0;\n  font-size: 1.2rem;\n  font-weight: 600;\n  background: linear-gradient(45deg, #00d4ff, #0099cc);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n"]))),RA=yr.div(gA||(gA=Ie(["\n  display: flex;\n  flex: 1;\n  overflow: hidden;\n"]))),PA=yr.div(mA||(mA=Ie(["\n  width: 300px;\n  background: #1a1a1a;\n  border-right: 1px solid #333;\n  display: flex;\n  flex-direction: column;\n"]))),OA=yr.div(yA||(yA=Ie(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  background: #111;\n"]))),NA=yr.div(vA||(vA=Ie(["\n  width: 320px;\n  background: #1a1a1a;\n  border-left: 1px solid #333;\n  display: flex;\n  flex-direction: column;\n"]))),DA=yr.div(bA||(bA=Ie(["\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #000;\n  position: relative;\n  min-height: 400px;\n"]))),jA=yr.div(wA||(wA=Ie(["\n  height: 300px;\n  background: #1a1a1a;\n  border-top: 1px solid #333;\n  display: flex;\n  flex-direction: column;\n"]))),LA=yr.div(kA||(kA=Ie(["\n  height: 32px;\n  background: #2a2a2a;\n  border-top: 1px solid #333;\n  display: flex;\n  align-items: center;\n  justify-content: between;\n  padding: 0 1rem;\n  font-size: 0.8rem;\n  color: #666;\n"]))),MA=yr.button(xA||(xA=Ie(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background: ",";\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.85rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),e=>e.$primary?"linear-gradient(45deg, #00d4ff, #0099cc)":e.$success?"linear-gradient(45deg, #00ff88, #00cc66)":e.$danger?"linear-gradient(45deg, #ff6b6b, #ff5252)":"rgba(255, 255, 255, 0.1)"),UA=yr.div(SA||(SA=Ie(["\n  height: ",";\n  min-height: ",";\n  max-height: ",";\n  background: #1a1a1a;\n  border-top: 1px solid #333;\n  transition: height 0.3s ease;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n"])),e=>e.$collapsed?"40px":"300px",e=>e.$collapsed?"40px":"200px",e=>e.$collapsed?"40px":"400px"),FA=(yr.div(_A||(_A=Ie(["\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 1rem;\n  background: #222;\n  border-bottom: 1px solid #333;\n  cursor: pointer;\n  \n  &:hover {\n    background: #2a2a2a;\n  }\n"]))),yr.h3(EA||(EA=Ie(["\n  margin: 0;\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #fff;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),yr.div(CA||(CA=Ie(["\n  flex: 1;\n  overflow: hidden;\n"]))),()=>{var e;const{timeline:n,setPlayheadPosition:r,setTimelineDuration:i,setZoomLevel:o,setPlaybackState:s,startUpload:a,updateUploadProgress:l,completeUpload:c,failUpload:u,markProjectDirty:d,markProjectSaved:h}=oi(),[f,p]=(0,t.useState)({id:"project-".concat(Date.now()),name:"Untitled Project",settings:{resolution:{width:1920,height:1080},fps:30,duration:30},createdAt:(new Date).toISOString()}),[g,m]=(0,t.useState)(null),[y,v]=(0,t.useState)(!1),[b,w]=(0,t.useState)(!0),[k,x]=(0,t.useState)([]),[S,_]=(0,t.useState)([]),[E,C]=(0,t.useState)(!1),[T,I]=(0,t.useState)(!1),[A,R]=(0,t.useState)(null),[P,O]=(0,t.useState)(null),[N,D]=(0,t.useState)([]),[j,L]=(0,t.useState)(!1),[M,U]=(0,t.useState)(!0),F={position:n.position,duration:n.duration,zoomLevel:n.zoomLevel,movePlayhead:r,updateDuration:i,zoomIn:()=>o(1.2*n.zoomLevel),zoomOut:()=>o(n.zoomLevel/1.2)},z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[n,r]=(0,t.useState)(e),[i,o]=(0,t.useState)([]),[s,a]=(0,t.useState)(new Set),[l,c]=(0,t.useState)(new Map),u=((0,t.useRef)(null),(0,t.useRef)(null),(0,t.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.length>=20)return console.warn("Maximum number of tracks reached"),null;if(!e){const t=n.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{});e=Tr.find(e=>0===(t[e]||0))||"video"}const i=Te({id:"track-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:e,name:t.name||"".concat(e.charAt(0).toUpperCase()+e.slice(1)," ").concat(n.filter(t=>t.type===e).length+1),clips:[],order:n.length,enabled:!0,locked:!1,muted:!1,solo:!1,visible:!0,color:t.color||N(e),height:t.height||D(e),volume:"audio"===e?1:null,pan:"audio"===e?0:null,createdAt:(new Date).toISOString()},t);return r(e=>[...e,i]),i.id},[n])),d=(0,t.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e).map((e,t)=>Te(Te({},e),{},{order:t}))),o(t=>t.filter(t=>t!==e))},[]),h=(0,t.useCallback)(e=>{const t=n.find(t=>t.id===e);if(!t)return null;const i=Te(Te({},t),{},{id:"track-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:"".concat(t.name," Copy"),order:n.length,clips:t.clips.map(e=>Te(Te({},e),{},{id:"clip-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}))});return r(e=>[...e,i]),i.id},[n]),f=(0,t.useCallback)((e,t)=>{r(n=>{const r=[...n],[i]=r.splice(e,1);return r.splice(t,0,i),r.map((e,t)=>Te(Te({},e),{},{order:t}))})},[]),p=(0,t.useCallback)((e,t)=>{r(n=>n.map(n=>n.id===e?Te(Te({},n),t):n))},[]),g=(0,t.useCallback)(e=>{var t;p(e,{muted:!(null!==(t=n.find(t=>t.id===e))&&void 0!==t&&t.muted)})},[n,p]),m=(0,t.useCallback)(e=>{const t=n.find(t=>t.id===e);if(!t)return;const i=!t.solo;r(t=>t.map(t=>Te(Te({},t),{},{solo:t.id===e?i:!i&&t.solo})))},[n]),y=(0,t.useCallback)(e=>{var t;p(e,{locked:!(null!==(t=n.find(t=>t.id===e))&&void 0!==t&&t.locked)})},[n,p]),v=(0,t.useCallback)(e=>{var t;p(e,{visible:!(null!==(t=n.find(t=>t.id===e))&&void 0!==t&&t.visible)})},[n,p]),b=(0,t.useCallback)((e,t)=>{const n=Math.max(0,Math.min(2,t));p(e,{volume:n})},[p]),w=(0,t.useCallback)((e,t)=>{const n=Math.max(-1,Math.min(1,t));p(e,{pan:n})},[p]),k=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o(n=>t?n.includes(e)?n.filter(t=>t!==e):[...n,e]:[e])},[]),x=(0,t.useCallback)(()=>{o([])},[]),S=(0,t.useCallback)(()=>{o(n.map(e=>e.id))},[n]),_=(0,t.useCallback)(e=>{a(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]),E=(0,t.useCallback)((e,t)=>{c(n=>new Map(n.set(e,t)))},[]),C=(0,t.useCallback)(e=>n.filter(t=>t.type===e),[n]),T=(0,t.useCallback)(()=>n.filter(e=>i.includes(e.id)),[n,i]),I=(0,t.useCallback)(()=>n.some(e=>"audio"===e.type&&e.solo),[n]),A=(0,t.useCallback)(()=>{const e=C("audio"),t=I();return e.map(e=>({id:e.id,shouldPlay:e.enabled&&!e.muted&&(!t||e.solo),volume:e.volume||1,pan:e.pan||0}))},[C,I]),R=(0,t.useCallback)((e,t)=>{r(n=>n.map(n=>e.includes(n.id)?Te(Te({},n),t):n))},[]),P=(0,t.useCallback)(()=>{const e=T();0!==e.length&&0!==Math.min(...e.map(e=>e.order))&&r(t=>{const n=[...t];return e.forEach(e=>{const t=n.findIndex(t=>t.id===e.id);t>0&&([n[t],n[t-1]]=[n[t-1],n[t]])}),n.map((e,t)=>Te(Te({},e),{},{order:t}))})},[T]),O=(0,t.useCallback)(()=>{const e=T();0!==e.length&&Math.max(...e.map(e=>e.order))!==n.length-1&&r(t=>{const n=[...t];return e.reverse().forEach(e=>{const t=n.findIndex(t=>t.id===e.id);t<n.length-1&&([n[t],n[t+1]]=[n[t+1],n[t]])}),n.map((e,t)=>Te(Te({},e),{},{order:t}))})},[T,n.length]),N=e=>({video:"#ff6b6b",audio:"#4ecdc4",text:"#45b7d1",overlay:"#f39c12"}[e]||"#666666"),D=e=>({video:80,audio:60,text:50,overlay:70}[e]||60),j=n.sort((e,t)=>e.order-t.order),L=n.length,M=i.length,U=C("audio"),F=C("video");return{tracks:j,selectedTrackIds:i,expandedTracks:s,trackHeights:l,trackCount:L,selectedTrackCount:M,audioTracks:U,videoTracks:F,createTrack:u,deleteTrack:d,duplicateTrack:h,updateTrack:p,reorderTracks:f,toggleMute:g,toggleSolo:m,toggleLock:y,toggleVisibility:v,setTrackVolume:b,setTrackPan:w,selectTrack:k,clearSelection:x,selectAllTracks:S,getSelectedTracks:T,toggleTrackExpansion:_,setTrackHeight:E,bulkUpdateTracks:R,moveSelectedTracksUp:P,moveSelectedTracksDown:O,getTracksByType:C,hasAudioSolo:I,getAudioPlaybackState:A}}([]),V=((e,n)=>{const[r,i]=(0,t.useState)([]),[o,s]=(0,t.useState)([]),[a,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(null),f=((0,t.useRef)(null),(0,t.useRef)([])),p=(0,t.useCallback)((e,t)=>{for(const n of t){const t=n.clips.find(t=>t.id===e);if(t)return Te(Te({},t),{},{trackId:n.id})}return null},[]),g=(0,t.useCallback)(()=>e.flatMap(e=>e.clips.map(t=>Te(Te({},t),{},{trackId:e.id}))),[e]),m=(0,t.useCallback)(()=>r.map(t=>p(t,e)).filter(Boolean),[r,p,e]),y=(0,t.useCallback)(e=>g().filter(t=>t.start<=e&&t.end>e),[g]),v=(0,t.useCallback)((e,t)=>{const n=t.find(t=>t.id===e.trackId);if(!n)return e;const r=n.clips.find(t=>t.id!==e.id&&t.start<e.end&&t.end>e.start);return r?Te(Te({},e),{},{start:r.end,end:r.end+e.duration}):e},[]),b=(0,t.useCallback)((e,t,n)=>{const r=[];n.forEach(e=>{e.clips.forEach(e=>{e.id!==t&&r.push(e.start,e.end)})}),r.push(...f.current);const i=r.reduce((t,n)=>Math.abs(n-e)<Math.abs(t-e)?n:t,e);return Math.abs(i-e)<=.1?i:e},[]),w=(0,t.useCallback)(function(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=r.duration||3;"image"===r.type?o=5:("text"===r.type||"font"===r.type)&&(o=3);let s=r.url||r.src||r.thumbnail,a=r.thumbnail;if(r.file&&r.file instanceof File)try{s=URL.createObjectURL(r.file),"image"===r.type&&(a=s)}catch(BA){console.warn("Failed to create object URL for file:",BA),s=r.url||r.src||r.thumbnail||""}const l=Te(Te(Te(Te(Te(Te({id:"clip-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),trackId:t,start:i,duration:o,end:i+o,type:r.type,source:s,name:r.name||"New Clip",assetId:r.id},"video"===r.type&&{thumbnail:a,volume:1,muted:!1}),"audio"===r.type&&{volume:1,muted:!1,waveform:r.waveform}),"image"===r.type&&{opacity:1,thumbnail:a}),"text"===r.type&&{text:r.content||r.name,fontSize:24,fontFamily:"Arial",color:"#ffffff",opacity:1}),"font"===r.type&&{text:"Sample Text",fontSize:24,fontFamily:r.name,color:"#ffffff",opacity:1}),{},{position:{x:0,y:0},scale:{x:1,y:1},rotation:0,trimStart:0,trimEnd:0,effects:[],transitions:{in:null,out:null},createdAt:(new Date).toISOString(),fileSize:r.size,originalAsset:r}),c=v(l,e);return n(e=>e.map(e=>e.id===t?Te(Te({},e),{},{clips:[...e.clips,c].sort((e,t)=>e.start-t.start)}):e)),c.id},[e,n,v]),k=(0,t.useCallback)(function(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=Te({id:"clip-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),trackId:t,start:i,duration:r.duration||3,end:i+(r.duration||3),type:r.type||"video",source:r.source||r.src,name:r.name||"New Clip",opacity:r.opacity||1,volume:r.volume||1,muted:!1,position:{x:0,y:0},scale:{x:1,y:1},rotation:0,trimStart:0,trimEnd:0,effects:[],transitions:{in:null,out:null},createdAt:(new Date).toISOString()},r),s=v(o,e);return n(e=>e.map(e=>e.id===t?Te(Te({},e),{},{clips:[...e.clips,s].sort((e,t)=>e.start-t.start)}):e)),s.id},[e,n,v]),x=(0,t.useCallback)(e=>{n(t=>t.map(t=>Te(Te({},t),{},{clips:t.clips.filter(t=>t.id!==e)}))),i(t=>t.filter(t=>t!==e))},[n]),S=(0,t.useCallback)((e,t)=>{n(n=>n.map(n=>Te(Te({},n),{},{clips:n.clips.map(n=>n.id===e?Te(Te(Te({},n),t),{},{end:t.start?t.start+(t.duration||n.duration):n.end}):n)})))},[n]),_=(0,t.useCallback)(function(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=p(t,e);if(!s)return;let a=Math.max(0,r);o&&(a=b(a,t,e));const l={start:a,end:a+s.duration};i&&i!==s.trackId?(n(e=>e.map(e=>Te(Te({},e),{},{clips:e.clips.filter(e=>e.id!==t)}))),n(e=>e.map(e=>e.id===i?Te(Te({},e),{},{clips:[...e.clips,Te(Te(Te({},s),l),{},{trackId:i})].sort((e,t)=>e.start-t.start)}):e))):S(t,l)},[e,S,n,p,b]),E=(0,t.useCallback)(function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=p(t,e);if(!i)return;let o={};if(null!==n){const e=Math.max(0,n),t=i.start+i.duration-Ir,r=Math.min(e,t);o.start=r,o.duration=i.start+i.duration-r,o.end=r+o.duration}else if(null!==r){const e=Math.max(Ir,r);o.duration=e,o.end=i.start+e}Object.keys(o).length>0&&S(t,o)},[e,S,p]),C=(0,t.useCallback)((t,n)=>{const r=p(t,e);if(!r||n<=r.start||n>=r.end)return null;const i=n-r.start,o=i,s=r.duration-i;return o<Ir||s<Ir?null:(S(t,{duration:o,end:r.start+o}),{firstClipId:t,secondClipId:k(r.trackId,Te(Te({},r),{},{start:n,duration:s,trimStart:r.trimStart+i,name:"".concat(r.name," (2)")}),n)})},[e,S,k,p]),T=(0,t.useCallback)(function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=p(t,e);if(!r)return null;const i=null!==n?n:r.end+.1;return k(r.trackId,Te(Te({},r),{},{name:"".concat(r.name," Copy"),effects:[...r.effects]}),i)},[e,k,p]),I=(0,t.useCallback)(()=>{const e=m();s(e.map(e=>Te({},e)))},[m]),A=(0,t.useCallback)(()=>{I(),r.forEach(e=>x(e))},[I,r,x]),R=(0,t.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0===o.length)return[];const n=[],r=Math.min(...o.map(e=>e.start));return o.forEach(i=>{const o=i.start-r,s=e+o,a=t||i.trackId,l=k(a,Te(Te({},i),{},{name:"".concat(i.name," (Pasted)")}),s);n.push(l)}),i(n),n},[o,k]),P=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r.length>0){const t=r[r.length-1],n=g(),o=n.findIndex(e=>e.id===t),s=n.findIndex(t=>t.id===e);if(-1!==o&&-1!==s){const e=Math.min(o,s),t=Math.max(o,s),r=n.slice(e,t+1).map(e=>e.id);return void i(r)}}i(n=>t?n.includes(e)?n.filter(t=>t!==e):[...n,e]:[e])},[r,g]),O=(0,t.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=g().filter(r=>{const i=r.start<t&&r.end>e,o=!n||n.includes(r.trackId);return i&&o});i(r.map(e=>e.id))},[g]),N=(0,t.useCallback)(()=>{i([])},[]),D=(0,t.useCallback)(()=>{r.forEach(e=>x(e)),i([])},[r,x]),j=(0,t.useCallback)(e=>{r.forEach(t=>{S(t,e)})},[r,S]),L=(0,t.useCallback)(function(e){i(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t=>[...new Set([...t,...e])]:e)},[]),M=r.length,U=(0,t.useMemo)(()=>e.reduce((e,t)=>e+t.clips.length,0),[e]),F=m(),z=o.length>0;return{selectedClipIds:r,selectedClips:F,selectedClipCount:M,totalClipCount:U,hasClipboardContent:z,addClip:k,removeClip:x,updateClip:S,duplicateClip:T,moveClip:_,trimClip:E,splitClip:C,selectClip:P,selectClips:L,selectClipsInRange:O,clearClipSelection:N,deleteSelectedClips:D,bulkUpdateSelectedClips:j,copyClips:I,cutClips:A,pasteClips:R,findClipById:p,getAllClips:g,getSelectedClips:m,getClipsAtTime:y,dragState:a,setDragState:l,resizeState:c,setResizeState:u,addClipFromAsset:w}})(z.tracks,z.updateTrack),B=((e,n)=>{const[r,i]=(0,t.useState)(!1),[o,s]=(0,t.useState)(0),[a,l]=(0,t.useState)((null===e||void 0===e?void 0:e.duration)||30),[c,u]=(0,t.useState)(1),[d,h]=(0,t.useState)(1),[f,p]=(0,t.useState)(!1),[g,m]=(0,t.useState)(!1),[y,v]=(0,t.useState)(!1),[b,w]=(0,t.useState)(!1),[k,x]=(0,t.useState)(""),[S,_]=(0,t.useState)(!1),[E,C]=(0,t.useState)(null),T=(0,t.useRef)(null),I=(0,t.useRef)(new Map),A=(0,t.useRef)(null),R=((0,t.useRef)(0),(0,t.useRef)(null)),P=(0,t.useCallback)(async()=>{if(e)try{m(!0),w(!1),R.current=performance.now()-1e3*o,T.current&&(T.current.currentTime=o,await T.current.play());for(const[e,n]of I.current)if(n&&!n.muted){n.currentTime=o;try{await n.play()}catch(t){console.warn("Audio track ".concat(e," failed to play:"),t)}}i(!0),G()}catch(BA){console.error("Playback failed:",BA),w(!0),x(BA.message)}finally{m(!1)}},[o,e]),O=(0,t.useCallback)(()=>{T.current&&T.current.pause();for(const[e,t]of I.current)t&&t.pause();i(!1),$()},[]),N=(0,t.useCallback)(()=>{O(),D((null===E||void 0===E?void 0:E.start)||0)},[O,E]),D=(0,t.useCallback)(e=>{const t=Math.max(0,Math.min(e,a));s(t),T.current&&(T.current.currentTime=t);for(const[n,r]of I.current)r&&(r.currentTime=t);n&&n(t),r&&(R.current=performance.now()-1e3*t)},[a,n,r]),j=(0,t.useCallback)(function(){D(o+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1))},[o,D]),L=(0,t.useCallback)(function(){D(o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1))},[o,D]),M=(0,t.useCallback)(()=>{const t=(null===e||void 0===e?void 0:e.fps)||30;j(1/t)},[j,null===e||void 0===e?void 0:e.fps]),U=(0,t.useCallback)(()=>{const t=(null===e||void 0===e?void 0:e.fps)||30;L(1/t)},[L,null===e||void 0===e?void 0:e.fps]),F=(0,t.useCallback)(e=>{const t=Math.max(.1,Math.min(4,e));u(t),T.current&&(T.current.playbackRate=t);for(const[r,i]of I.current)if(i)try{i.playbackRate=t}catch(n){console.warn("Audio playback rate not supported for track ".concat(r))}},[]),z=(0,t.useCallback)(()=>{const e=(Ar.findIndex(e=>Math.abs(e-c)<.01)+1)%Ar.length;F(Ar[e])},[c,F]),V=(0,t.useCallback)(e=>{const t=Math.max(0,Math.min(1,e));h(t),T.current&&(T.current.volume=t);for(const[n,r]of I.current)r&&(r.volume=t)},[]),B=(0,t.useCallback)(()=>{const e=!f;p(e),T.current&&(T.current.muted=e);for(const[t,n]of I.current)n&&(n.muted=e)},[f]),H=(0,t.useCallback)((e,t)=>{e>=t||C({start:Math.max(0,e),end:Math.min(a,t)})},[a]),q=(0,t.useCallback)(()=>{C(null)},[]),W=(0,t.useCallback)(()=>{_(e=>!e)},[]),K=(0,t.useCallback)((e,t)=>{t?(I.current.set(e,t),t.currentTime=o,t.volume=d,t.muted=f,t.playbackRate=c):I.current.delete(e)},[o,d,f,c]),G=(0,t.useCallback)(()=>{const e=()=>{if(!r)return;const t=(performance.now()-R.current)/1e3*c,i=Math.min(t,a);if(i>=((null===E||void 0===E?void 0:E.end)||a)){if(!S&&!E)return void O();{const e=(null===E||void 0===E?void 0:E.start)||0;D(e),R.current=performance.now()-1e3*e}}else s(i),n&&n(i);A.current=requestAnimationFrame(e)};A.current=requestAnimationFrame(e)},[r,c,a,E,S,n,D,O]),$=(0,t.useCallback)(()=>{A.current&&(cancelAnimationFrame(A.current),A.current=null)},[]),Q=(0,t.useCallback)(e=>{e&&(T.current=e,e.currentTime=o,e.volume=d,e.muted=f,e.playbackRate=c,e.addEventListener("loadstart",()=>m(!0)),e.addEventListener("canplay",()=>m(!1)),e.addEventListener("waiting",()=>v(!0)),e.addEventListener("playing",()=>v(!1)),e.addEventListener("error",e=>{var t;w(!0),x((null===(t=e.target.error)||void 0===t?void 0:t.message)||"Video playback error")}))},[o,d,f,c]);(0,t.useEffect)(()=>{(null===e||void 0===e?void 0:e.duration)!==a&&(l((null===e||void 0===e?void 0:e.duration)||30),o>(null===e||void 0===e?void 0:e.duration)&&s(0))},[null===e||void 0===e?void 0:e.duration,a,o]),(0,t.useEffect)(()=>()=>{$(),I.current.clear()},[$]);const Y=(0,t.useCallback)(e=>{if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName)switch(e.key){case" ":e.preventDefault(),r?O():P();break;case"ArrowLeft":e.preventDefault(),e.shiftKey?L(1):U();break;case"ArrowRight":e.preventDefault(),e.shiftKey?j(1):M();break;case"Home":e.preventDefault(),D(0);break;case"End":e.preventDefault(),D(a);break;case"m":e.preventDefault(),B();break;case"l":e.preventDefault(),W()}},[r,P,O,L,j,U,M,D,a,B,W]),J=a>0?o/a*100:0,X=o<=0,Z=o>=a,ee=(null===E||void 0===E?void 0:E.end)||a;return{isPlaying:r,currentTime:o,duration:a,playbackRate:c,volume:d,muted:f,isLoading:g,isBuffering:y,hasError:b,errorMessage:k,isLooping:S,playbackRegion:E,progress:J,isAtStart:X,isAtEnd:Z,timeRemaining:ee-o,play:P,pause:O,stop:N,seek:D,stepForward:j,stepBackward:L,nextFrame:M,prevFrame:U,setRate:F,cyclePlaybackRate:z,setPlayerVolume:V,toggleMute:B,setLoopRegion:H,clearLoopRegion:q,toggleLoop:W,registerAudioElement:K,handleVideoLoad:Q,videoRef:T,handleKeyPress:Y}})({duration:F.duration,onTimeUpdate:F.movePlayhead}),H=(0,t.useRef)(null);(0,t.useRef)(null);(0,t.useEffect)(()=>{F.updateDuration(30),z.createTrack("video"),z.createTrack("audio")},[]);const q=(0,t.useCallback)(async e=>{if(e&&0!==e.length){console.log("\ud83d\udce5 Starting upload for assets:",e.length);try{const t=e.map(async e=>{const t=a({filename:e.name,fileSize:e.size,fileType:e.type,thumbnail:e.thumbnail});try{const r=async()=>{for(let n=0;n<=100;n+=15*Math.random()){const r=Math.min(100,n),i=Date.now()-Date.now(),o=e.size*r/100/Math.max(i/1e3,1),s=e.size-e.size*r/100;if(l(t,r,{speed:o,estimatedTime:s/o}),r>=100)break;await new Promise(e=>setTimeout(e,100+200*Math.random()))}};let i;await r();try{i=await dA.uploadAsset(e.file,{onProgress:e=>{l(t,e)}}),console.log("\u2705 Firebase upload successful for:",e.name)}catch(n){console.warn("\u26a0\ufe0f Firebase upload failed, using local version:",n),i=Te(Te({},e),{},{id:"local-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),url:e.file?URL.createObjectURL(e.file):e.url,downloadURL:e.file?URL.createObjectURL(e.file):e.url,source:"local",uploadStatus:"local-fallback"}),console.log("\u2705 Created local asset fallback:",i.name)}return c(t,i),i}catch(BA){return console.error("\u274c Upload processing failed for",e.name,":",BA),u(t,BA),Te(Te({},e),{},{id:"fallback-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),url:e.file?URL.createObjectURL(e.file):e.url,downloadURL:e.file?URL.createObjectURL(e.file):e.url,source:"fallback",uploadStatus:"failed-with-fallback"})}}),n=await Promise.all(t);return x(e=>{const t=[...n,...e];return console.log("\u2705 Updated assets state:",t.length,"total assets"),t}),d(),n}catch(BA){return console.error("\u274c Asset upload processing failed:",BA),[]}}},[a,l,c,u,d]),W=(0,t.useCallback)(()=>{const e={id:"project-".concat(Date.now()),name:"New Project",settings:{resolution:{width:1920,height:1080},fps:30,duration:30},createdAt:(new Date).toISOString()};p(e),F.updateDuration(30),z.clearSelection(),V.clearClipSelection(),B.stop()},[F,z,V,B]),K=(0,t.useCallback)(e=>{var t,n;p(e),(null===(t=e.settings)||void 0===t?void 0:t.duration)!==(null===(n=f.settings)||void 0===n?void 0:n.duration)&&(console.log("\ud83d\udd04 Syncing timeline duration:",e.settings.duration),F.updateDuration(e.settings.duration)),console.log("\u2705 Project updated:",e.name)},[null===(e=f.settings)||void 0===e?void 0:e.duration,F]),G=(0,t.useCallback)(async()=>{I(!0);try{const t=Te(Te({},f),{},{timeline:{duration:F.duration,position:F.position,tracks:z.tracks},settings:f.settings,updatedAt:(new Date).toISOString()});try{await eA.saveProject(f.id,t),R((new Date).toISOString()),h(),console.log("\u2705 Project saved to cloud successfully")}catch(e){console.warn("\u26a0\ufe0f Cloud save failed, using local storage fallback:",e);const n=Te(Te({},t),{},{savedLocally:!0,lastSaved:(new Date).toISOString()});localStorage.setItem("project_".concat(f.id),JSON.stringify(n)),R((new Date).toISOString()),h(),console.log("\u2705 Project saved to local storage as fallback")}}catch(BA){console.error("\u274c Failed to save project:",BA)}finally{I(!1)}},[f,F,z,h]),$=((0,t.useCallback)(async e=>{I(!0);try{const t=await eA.loadProject(e);p(t),F.updateDuration(t.timeline.duration),F.movePlayhead(t.timeline.position),console.log("\u2705 Project loaded successfully")}catch(BA){console.error("\u274c Failed to load project:",BA)}finally{I(!1)}},[F]),(0,t.useCallback)(async()=>{if(0!==z.trackCount){I(!0),O({stage:"Initializing",progress:0});try{const e={timeline:{duration:F.duration,fps:f.settings.fps,resolution:f.settings.resolution,tracks:z.tracks},settings:{quality:"high",format:"mp4"}},t=await ZI.renderAdvanced(e.timeline,e.settings);O({stage:"Completed",progress:100}),console.log("\u2705 Video rendered successfully:",t.renderJob.url),t.renderJob.url&&window.open(t.renderJob.url,"_blank")}catch(BA){console.error("\u274c Render failed:",BA),O(null)}finally{I(!1)}}else console.warn("No tracks to render")},[F,z,f.settings])),Q=(0,t.useCallback)(async()=>{I(!0);try{const e={timeline:{duration:Math.min(F.duration,10),fps:f.settings.fps,resolution:{width:854,height:480},tracks:z.tracks}},t=await ZI.renderPreview(e.timeline,{segment:{start:0,duration:10}});console.log("\u2705 Preview generated:",t.preview.url),t.preview.url&&B.videoRef.current&&(B.videoRef.current.src=t.preview.url)}catch(BA){console.error("\u274c Preview generation failed:",BA)}finally{I(!1)}},[F,z,f.settings,B]),Y=(0,t.useCallback)(async()=>{C(!0);try{console.log("\ud83d\udce6 Loading assets from Firestore...");const e=await dA.getAllAssets();x(e),console.log("\u2705 Loaded assets:",{total:e.length,types:e.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{})})}catch(BA){console.error("\u274c Failed to load assets:",BA),x([])}finally{C(!1)}},[]),J=(0,t.useCallback)(e=>{_([e.id]),console.log("Selected asset:",e.name)},[]),X=(0,t.useCallback)(e=>{if("video"===e.type||"audio"===e.type){new Audio(e.downloadURL).play().catch(console.error)}},[]),Z=(0,t.useCallback)((e,t,n)=>{if(console.log("\ud83c\udfaf handleAssetDrop called with:",{asset:null===e||void 0===e?void 0:e.name,trackId:t,position:n}),e)if(t)try{const r=Te(Te({},e),{},{file:e.file||null,url:e.url||e.src||e.downloadURL,src:e.url||e.src||e.downloadURL,thumbnail:e.thumbnail||e.thumbnailURL});console.log("\ud83d\udce6 Prepared asset for clip:",r);const i=V.addClipFromAsset(t,r,n);return i?console.log("\u2705 Asset successfully added to timeline:",{assetName:e.name,trackId:t,position:n,clipId:i}):console.error("\u274c Failed to get clipId from addClipFromAsset"),i}catch(BA){console.error("\u274c Failed to add asset to timeline:",BA),console.error("Asset data:",e),console.error("Track ID:",t),console.error("Position:",n)}else console.error("\u274c No trackId provided to handleAssetDrop");else console.error("\u274c No asset provided to handleAssetDrop")},[V]),ee=(0,t.useCallback)(()=>{L(!0)},[]),te=(0,t.useCallback)(()=>{L(!1)},[]),ne=(0,t.useCallback)(e=>{D(e);const t=e.reduce((e,t)=>(e[t.name]=t.value,e),{});V.getAllClips().forEach(e=>{if(e.name&&e.name.includes("{{")&&e.name.includes("}}")){let n=e.name;Object.entries(t).forEach(e=>{let[t,r]=e;n=n.replace(new RegExp("{{\\s*".concat(t,"\\s*}}"),"g"),r)}),V.updateClip(e.id,{name:n})}if(e.source&&e.source.includes("{{")&&e.source.includes("}}")){let n=e.source;Object.entries(t).forEach(e=>{let[t,r]=e;n=n.replace(new RegExp("{{\\s*".concat(t,"\\s*}}"),"g"),r)}),V.updateClip(e.id,{source:n})}}),console.log("\ud83d\udd04 Applied merge fields to timeline:",e.length)},[V]),re=(0,t.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(console.log("\ud83c\udfac Advanced clip operation: ".concat(e),{clipIds:t,options:n}),e){case"copy":V.copyClips();break;case"cut":V.cutClips();break;case"paste":V.pasteClips(n.position);break;case"split":t.forEach(e=>{V.splitClip(e,n.position)});break;case"merge":console.log("Merging clips:",t);break;case"align":console.log("Aligning clips:",t,"to",n.alignment);break;case"speed":t.forEach(e=>{var t;V.updateClip(e,{playbackRate:n.speed,duration:(null===(t=V.findClipById(e))||void 0===t?void 0:t.duration)/n.speed})});break;case"selectAll":const r=V.getAllClips().map(e=>e.id);V.selectClips(r);break;case"undo":console.log("Undo operation");break;case"redo":console.log("Redo operation");break;default:console.warn("Unknown clip operation:",e)}d()},[V,d]),ie=(0,t.useCallback)((e,t)=>{switch(console.log("\ud83c\udfb5 Advanced track operation: ".concat(e),{trackIds:t}),e){case"mute":t.forEach(e=>{z.toggleMute(e)});break;case"solo":t.forEach(e=>{z.toggleSolo(e)});break;case"lock":t.forEach(e=>{z.toggleLock(e)});break;default:console.warn("Unknown track operation:",e)}d()},[z,d]);(0,t.useEffect)(()=>{const e=e=>{if(B.handleKeyPress(e),e.ctrlKey||e.metaKey)switch(e.key){case"s":e.preventDefault(),G();break;case"z":case"y":e.preventDefault()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[B,G]),(0,t.useEffect)(()=>{const e=setTimeout(()=>{f.id&&z.trackCount>0&&G()},3e4);return()=>clearTimeout(e)},[f,z.trackCount,G]),(0,t.useEffect)(()=>{Y()},[Y]),(0,t.useEffect)(()=>{const e=EI.onAuthStateChange(e=>{m(e),w(!1),e?(console.log("\u2705 User authenticated, loading user assets"),Y()):console.log("\ud83d\udc4b User not authenticated, showing public assets only")});return e},[Y]);const oe=(0,t.useCallback)(async()=>{try{await EI.signOutUser(),console.log("\u2705 User signed out successfully")}catch(BA){console.error("\u274c Sign out failed:",BA)}},[]),se=(0,t.useCallback)(e=>{console.log("\u2705 Authentication successful:",e.email),v(!1),Y()},[Y]),ae=e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))};return(0,Dr.jsxs)(TA,{children:[(0,Dr.jsxs)(IA,{children:[(0,Dr.jsx)(AA,{children:"JSON2VIDEO Cloud Studio"}),(0,Dr.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,Dr.jsxs)("span",{style:{fontSize:"0.8rem",color:"#666"},children:[f.name," ",A&&"\u2022 Saved ".concat(ae((Date.now()-new Date(A))/1e3)," ago")]}),(0,Dr.jsxs)(MA,{onClick:W,children:[(0,Dr.jsx)(Sr,{size:16}),"New"]}),(0,Dr.jsxs)(MA,{onClick:G,disabled:T,children:[(0,Dr.jsx)(_r,{size:16}),"Save"]}),(0,Dr.jsxs)(MA,{onClick:Q,children:[(0,Dr.jsx)(Er,{size:16}),"Preview"]}),(0,Dr.jsxs)(MA,{$primary:!0,onClick:$,disabled:T,children:[(0,Dr.jsx)(Cr,{size:16}),P?"".concat(P.stage," ").concat(P.progress,"%"):"Render"]}),b?(0,Dr.jsx)("span",{style:{fontSize:"0.8rem",color:"#666"},children:"Loading..."}):g?(0,Dr.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,Dr.jsx)("span",{style:{fontSize:"0.8rem",color:"#999"},children:g.displayName||g.email}),(0,Dr.jsx)(MA,{onClick:oe,children:"Sign Out"})]}):(0,Dr.jsx)(MA,{onClick:()=>v(!0),children:"Sign In"})]})]}),(0,Dr.jsxs)(RA,{children:[(0,Dr.jsx)(PA,{children:(0,Dr.jsx)(wa,{onAssetUpload:q,onAssetSelect:J,onAssetPlay:X,onOpenMergeFields:ee,assets:k,selectedAssets:S,loading:E})}),(0,Dr.jsxs)(OA,{children:[(0,Dr.jsx)(DA,{children:(0,Dr.jsx)(Zr,{ref:H,timeline:F,tracks:z.tracks,currentTime:F.position,resolution:f.settings.resolution,onVideoLoad:B.handleVideoLoad})}),(0,Dr.jsxs)(jA,{children:[(0,Dr.jsx)(ro,{tracks:z,clips:V,onAddTrack:z.createTrack,onDeleteTrack:z.deleteTrack}),(0,Dr.jsx)(od,{selectedClips:V.selectedClipIds||[],onClipOperation:re,onTrackOperation:ie,clipboard:V.clipboardClips||[],undoStack:[],redoStack:[]}),(0,Dr.jsx)(Ui,{tracks:z,clips:V,player:B,onClipSelect:V.selectClip,onClipMove:V.moveClip,onClipTrim:V.trimClip,onClipSplit:V.splitClip,onAssetDrop:Z,onTrackUpdate:z.updateTrack,selectedClips:V.selectedClipIds||[]})]})]}),(0,Dr.jsx)(NA,{children:(0,Dr.jsx)(el,{selectedClips:V.selectedClips,selectedTracks:z.getSelectedTracks(),onClipUpdate:V.updateClip,onTrackUpdate:z.updateTrack,project:f,onProjectUpdate:K})})]}),(0,Dr.jsxs)(LA,{children:[(0,Dr.jsxs)("div",{children:[ae(F.position)," / ",ae(F.duration)," \u2022",z.trackCount," tracks \u2022 ",V.totalClipCount," clips \u2022 Zoom: ",Math.round(100*F.zoomLevel),"%",N.length>0&&" \u2022 Merge Fields: ".concat(N.length," active")]}),(0,Dr.jsxs)("div",{children:[T&&"Processing...",P&&"".concat(P.stage,": ").concat(P.progress,"%")]})]}),(0,Dr.jsx)(Ou,{}),(0,Dr.jsx)(Kl,{isOpen:j,onClose:te,onApplyMergeFields:ne}),(0,Dr.jsx)(UA,{$collapsed:M,children:(0,Dr.jsx)(gc,{json:f,title:"Project Timeline JSON",editable:!1,collapsed:M,onToggleCollapse:()=>U(!M)})}),(0,Dr.jsx)(XI,{isOpen:y,onClose:()=>v(!1),onSuccess:se})]})});const zA=function(){return(0,Dr.jsx)(we,{children:(0,Dr.jsx)("div",{className:"App",children:(0,Dr.jsxs)(ye,{children:[(0,Dr.jsx)(ge,{path:"/",element:(0,Dr.jsx)(pe,{to:"/cloud",replace:!0})}),(0,Dr.jsx)(ge,{path:"/cloud",element:(0,Dr.jsx)(FA,{})}),(0,Dr.jsx)(ge,{path:"/studio",element:(0,Dr.jsx)(FA,{})}),(0,Dr.jsx)(ge,{path:"/editor",element:(0,Dr.jsx)(pe,{to:"/cloud",replace:!0})}),(0,Dr.jsx)(ge,{path:"/advanced",element:(0,Dr.jsx)(pe,{to:"/cloud",replace:!0})}),(0,Dr.jsx)(ge,{path:"/basic",element:(0,Dr.jsx)(pe,{to:"/cloud",replace:!0})}),(0,Dr.jsx)(ge,{path:"*",element:(0,Dr.jsx)(pe,{to:"/cloud",replace:!0})})]})})})};i.createRoot(document.getElementById("root")).render((0,Dr.jsx)(t.StrictMode,{children:(0,Dr.jsx)(zA,{})}))})()})();
//# sourceMappingURL=main.3fb58baf.js.map